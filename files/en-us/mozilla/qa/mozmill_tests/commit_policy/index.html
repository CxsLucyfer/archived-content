---
title: Mozmill commit policy
slug: Mozilla/QA/Mozmill_tests/Commit_Policy
tags:
  - Automated testing
  - Firefox
  - MozMill
---
<p>The following details our policy for committing patches to the mozmill-tests and litmus-data repositories. If you have any questions or need help email <a href="mailto:ahughes@mozilla.com" class="link-mailto" title="mailto:ahughes@mozilla.com">Anthony Hughes</a> or ping <em>ashughes</em> on <a href="irc://irc.mozilla.org/#automation" class="link-irc" title="irc://irc.mozilla.org/#automation">irc.mozilla.org/#automation</a>.</p>
<h3 id="What_is_a_committer">What is a committer?</h3>
<p>A <strong>committer</strong> is someone who physically checks code into the repository. This is a privilege which comes with a lot of responsibility and is typically only granted to those who have proven themselves over an extended period of contribution.</p>
<h3 id="How_do_I_become_a_committer">How do I become a committer?</h3>
<p>When the team feels you are ready to become a committer, you will need to go through the application process. Mozilla has a standard <a href="/en/Getting_commit_access_to_Mozilla_source_code" title="Getting commit access to Mozilla source code">Committer Agreement </a>with everyone who wishes to check code into any repository. If you want to be able to land patches to the mozmill-tests and litmus-data repositories, get in touch with <a href="mailto:ahughes@mozilla.com" class="link-mailto" title="mailto:ahughes@mozilla.com">Anthony Hughes</a>.</p>
<h3 id="Privileges">Privileges</h3>
<p>Once granted commit access you will be granted the following privileges:</p>
<ul> <li>Landing patches to skip/disable a failing test (patch must be approved by one peer)</li> <li>Landing patches to fix a failing test (patch must be approved by one peer and one super-reviewer)</li> <li>Landing patches to add a new test (patch must be approved by one peer and one super-reviewer)</li> <li>Landing patches to litmus-data (patch must be approved by one peer and one super-reviewer)</li> <li>Landing patches to endurance tests (patch must be approved by one peer, one super-reviewer, and the module owner)</li> <li>Landing patches to shared modules (patch must be approved by one peer, one super-reviewer, and the module owner)</li>
</ul>
<h3 id="Responsibilities">Responsibilities</h3>
<p>Once granted commit access you will be granted the following responsibilities:</p>
<ul> <li>Landing your own patches after they have passed review (ideally within 24 hours of r+)</li> <li>Checking the live test results the following day to see if your patch introduced a regression</li> <li>Promptly backing out your patch when a regression is introduced</li> <li>Landing patches for those without commit access after they have passed review</li>
</ul>
<div class="note"><strong>Note: </strong>If you land a bad patch, it is<strong> your </strong>responsibility to back it out. If you write a bad patch, it is<strong> your</strong> responsibility to fix it.</div>
<h3 id="Life-cycle_of_a_patch">Life-cycle of a patch</h3>
<h4 id="Patches_for_Endurance_Tests">Patches for Endurance Tests</h4>
<ul> <li><a href="/en/Mozmill_Tests#Landing_of_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Landing_of_patches">Land the patch</a> on the <code>default</code> branch</li> <li>Update the bug with the following changes <ul> <li><code>[landed]</code> added to the patch summary</li> <li>comment with the URL to the changeset</li> <li>status set to <code>RESOLVED FIXED</code></li> </ul> </li> <li>The next day, verify the test has not caused regressions by checking the <a href="http://mozmill-release.blargon7.com/#/endurance/charts" class="external" title="http://mozmill-release.blargon7.com/#/endurance/charts">Endurance Dashboard</a> for failures <ul> <li>if no failures are found, set the bug status to <code>VERIFIED FIXED</code></li> <li>if the test fails, the bug status is set to <code>REOPENED</code> and the patch is <a href="/en/Mozmill_Tests#Backing_out_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Backing_out_patches">backed out</a></li> </ul> </li>
</ul>
<h4 id="Patches_for_Functional_Tests">Patches for Functional Tests</h4>
<ul> <li><a href="/en/Mozmill_Tests#Landing_of_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Landing_of_patches">Land the patch</a> on the <code>default</code> branch</li> <li>Update the bug with the following changes <ul> <li><code>[landed:default]</code> added to the patch summary</li> <li>comment with the URL to the changeset</li> <li>status set to <code>RESOLVED FIXED</code></li> </ul> </li> <li>The next day, verify the test has not caused regressions by checking the <a href="http://mozmill-release.blargon7.com/#/endurance/charts" class="external" title="http://mozmill-release.blargon7.com/#/endurance/charts">Functional Dashboard</a><a href="http://mozmill-release.blargon7.com/#/functional/reports" class="external" title="http://mozmill-release.blargon7.com/#/functional/reports"> </a>for failures</li> <li>If no failures are found, land the patch on the <code>mozilla-aurora</code>, <code>mozilla-beta</code>, and<code> mozilla-release</code> branches, and update the bug with the following changes: <ul> <li>change <code>[landed:default]</code> to <code>[landed]</code> in the patch summary</li> <li>comment with the URLs to the changesets for each of the branches</li> <li>change the status to <code>VERIFIED FIXED</code></li> </ul> </li> <li>The next day, verify the test has not caused regressions by checking the <a href="http://mozmill-release.blargon7.com/#/endurance/charts" class="external" title="http://mozmill-release.blargon7.com/#/endurance/charts">Functional Dashboard</a><a href="http://mozmill-release.blargon7.com/#/functional/reports" class="external" title="http://mozmill-release.blargon7.com/#/functional/reports"> </a>for failures <ul> <li>if the test fails, the bug status is set to <code>REOPENED</code> and the patch is <a href="/en/Mozmill_Tests#Backing_out_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Backing_out_patches">backed out</a></li> </ul> </li>
</ul>
<div class="note"><strong>NOTE: </strong>Only land your patch on branches where the feature exists. For example, if your test is for a feature which is only active on Nightly, land the patch on <code>default</code>; if your test is for a feature which is active on Beta, land your patch on <code>default</code>, <code>mozilla-aurora</code>, and <code>mozilla-beta</code>; and so on.</div>
<div class="note"><strong>NOTE</strong><strong>:</strong> Be sure to update the corresponding Litmus test with a link the the Mozmill test. Also, clone the Litmus test to the Aurora Mozmill Tests subgroup.</div>
<h4 id="Patches_for_Test_Failures">Patches for Test Failures</h4>
<ul> <li><a href="/en/Mozmill_Tests#Landing_of_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Landing_of_patches">Land the patch</a> on the affected branch</li> <li>Update the bug with the following changes <ul> <li><code>[landed]</code> added to the patch summary</li> <li>comment with the URL to the changeset</li> <li>status set to<code> RESOLVED FIXED</code></li> </ul> </li> <li>The next day, verify the test has not caused regressions by checking the <a href="http://mozmill-release.blargon7.com/#/endurance/charts" class="external" title="http://mozmill-release.blargon7.com/#/endurance/charts">Functional Dashboard</a> for failures</li> <li>If the test is still failing, set the bug status to <code>REOPENED</code> and <a href="/en/Mozmill_Tests#Backing_out_patches" title="https://developer.mozilla.org/en/Mozmill_Tests#Backing_out_patches">back out the patch</a></li> <li>Otherwise, change the status of the bug to <code>VERIFIED FIXED</code></li>
</ul>
<div class="note"><strong>NOTE</strong>: Any failures which only affect the <code>mozilla-1.9.2</code> branch will be disabled, the bug resolved <code>WONTFIX</code>, otherwise follow this process:<br>      1. Disable the test<br>      2. Investigate if the bug is a failure of the test or Firefox<br>      3. If it's a problem with the test, the test will remain disabled until it can be fixed<br>      4. If it's a problem with Firefox, file a Firefox bug, re-enable the test and close the test failure bug</div>
<div class="note"><strong>NOTE</strong>: Any disabled test should also be disabled, any fixed test re-enabled, in Mozmill Tests subgroup in Litmus</div>
<h4 class="note" id="Litmus">Litmus</h4>
<p>After you have landed a new test, or disabled a failing one, you need to update Litmus.</p>
<ul> <li>If the test has been disabled <ul> <li>find the Mozmill Tests subgroup for each branch in Litmus</li> <li>remove the test from the subgroup</li> <li>amend the Mozmill Test block to include the word DISABLED and strike-through the link to the test file</li> <li>Remember to revert this change when the test is being re-enabled</li> </ul> </li> <li>If the test is new <ul> <li>find the Litmus testcase corresponding to your Mozmill test</li> <li>add a comment to the test stating it is covered by Mozmill and provide a link to the file <ul> <li> <pre>This test is covered by Mozmill:
<a href="http://hg.mozilla.org/qa/mozmill-tests/file/default/firefox/testPreferences/testPreferredLanguage.js">testPreferences/testPreferredLanguage.js</a>
</pre> </li> </ul> </li> <li>add the Litmus test to the Mozmill Tests subgroup for that branch</li> <li>This needs to be done for each and every branch the test has landed</li> </ul> </li>
</ul>
<h3 id="Nomenclature_for_patch_landing">Nomenclature for patch landing</h3>
<p>When you land a patch you should do the following in Bugzilla:</p>
<ul> <li>Edit Details for the attached patch <ul> <li>If the patch is landed on all branches, add <em>[landed]</em> to the attachment summary</li> <li>If the patch is landed on a single branch, add <em>[landed:branch_name]</em> to the attachment summary</li> </ul> </li> <li>Add a comment to the bug indicating where the patch was landed and provide a link to the changeset</li>
</ul>
<p>Example:</p>
<pre class="bz_comment_text" id="comment_text_28">Comment on <span><a href="https://bugzilla.mozilla.org/attachment.cgi?id=588432" name="attach_588432" title="test v7 [landed]">attachment 588432</a> <a href="https://bugzilla.mozilla.org/attachment.cgi?id=588432&amp;action=edit" title="test v7 [landed]">[details]</a> <a href="https://bugzilla.mozilla.org/attachment.cgi?id=588432&amp;action=diff" title="test v7 [landed]">[diff]</a></span> <a href="https://bugzilla.mozilla.org/page.cgi?id=splinter.html&amp;bug=705269&amp;attachment=588432">[review]</a>
test v7 [landed]

Landed:
<a href="http://hg.mozilla.org/qa/mozmill-tests/rev/829eb7f3fc87">http://hg.mozilla.org/qa/mozmill-tests/rev/829eb7f3fc87</a> (mozilla-aurora)
<a href="http://hg.mozilla.org/qa/mozmill-tests/rev/49cea842da76">http://hg.mozilla.org/qa/mozmill-tests/rev/49cea842da76</a> (mozilla-beta)
<a href="http://hg.mozilla.org/qa/mozmill-tests/rev/819e3aa37289">http://hg.mozilla.org/qa/mozmill-tests/rev/819e3aa37289</a> (mozilla-release)
</pre>
<h3 id="Non-responsibilities">Non-responsibilities</h3>
<p>The following are not your responsibility as a committer and should <strong>never</strong> be done unless given explicit permission. These will be take care of by the module owners.</p>
<ul> <li>Landing patches for new tests on the <em>mozilla-1.9.2</em> branch</li> <li>Landing patches on the <em>mozilla-esrN</em> branch</li> <li>Merging branches</li>
</ul>
