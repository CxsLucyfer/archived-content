

<h3 id="Summary" name="Summary">Summary</h3>

<p><strong>Environment variable</strong></p>

<p>Control the behavior of failed assertions (<code><a href="/en/NS_ASSERTION" title="en/NS_ASSERTION">NS_ASSERTION</a></code> and friends).</p>

<p>If you've given the <code>--enable-crash-on-assert</code> switch to <code>configure</code>, this environment variable is ignored.</p>

<p>Values:</p>

<ul>
 <li><strong>warn</strong> - This is equivalent to the default of simply spitting an error message to stderr and ringing the bell. (I think this is the default on Mac and Linux.)</li>
 <li><strong>stack</strong> - In addition to ringing the bell and printing a warning, a stack trace is written to stderr.  Be sure to run the output through <code>tools/rb/fix_stacks.py</code> before sharing it. These scripts take the log file that contains the stack trace as STDIN. E.g. <code>tools/rb/fix_stacks.py &lt; logfile &gt; sanitized_logfile</code>     </li>
 <li><strong>suspend</strong> - The process-group is sent a SIGSTOP signal. This suspends all threads so that you can attach to the process with the debugger before the conditions that caused the assertion disappear.</li>
 <li><strong>abort</strong> - This makes <code>NS_ASSERTION</code> act like <code>assert(3)</code>—an assertion failure calls <code>abort</code>—and is equivalent to building with <code>--enable-crash-on-assert</code>.</li>
 <li><strong>trap</strong> or <strong>break</strong> - Break into the debugger, if one is attached. If the process is not being debugged, behavior depends on the OS. On Windows, this will show the usual modal dialog box offering to debug or abort the process, or ignore the error. On other OSes, if no debugger is attached, it will crash.</li>
 <li><strong>stack-and-abort</strong> - The combination platter. Prints a warning, rings the bell, dumps the stack, and aborts. (new in Mozilla 1.9 since August 2007)</li>
</ul>

<h3 id="Syntax" name="Syntax">Syntax</h3>

<p>Assuming you're using bash:</p>

<pre class="eval">export XPCOM_DEBUG_BREAK=stack
</pre>

<h3 id="See_also" name="See_also">See also</h3>

<ul>
 <li><code><a href="/en/NS_ASSERTION" title="en/NS_ASSERTION">NS_ASSERTION</a></code></li>
 <li><a href="/en/Debugging_Mozilla_on_Windows_FAQ#Disabling_ASSERTIONS" title="en/Debugging_Mozilla_on_Windows_FAQ#Disabling_ASSERTIONS">Disabling assertion dialog box on Windows</a></li>
 <li><a class="external" href="http://www.mozilla.org/unix/debugging-faq.html#assertion">Entry in Linux debugging FAQ</a></li>
</ul>