---
title: UInt64
slug: Mozilla/js-ctypes/js-ctypes_reference/UInt64
tags:
  - JavaScript
  - Reference
  - js-ctypes
---
<section class="Quick_links" id="Quick_Links">
 <ol>
  <li><a href="/en-US/docs/Mozilla/js-ctypes"><strong><em>js-ctypes</em></strong></a></li>
  <li class="toggle">
      <details>
        <summary>Introduction</summary>
        <ol><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Debugging_Tips">Debugging Tips</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Declaring_and_calling_functions">Declaring and Calling Functions</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Declaring_and_Using_Callbacks">Declaring and Using Callbacks</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Declaring_types">Declaring types</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Memory_Management">Memory Management</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Standard_OS_Libraries">Standard OS Libraries</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Type_conversion">Type conversion</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Working_with_ArrayBuffers">Working with ArrayBuffers</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/Working_with_data">Working with data</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Using_js-ctypes/ctypes.open">ctypes.open</a></li></ol>
      </details>
  </li>
  <li class="toggle">
      <details open>
        <summary>References</summary>
        <ol><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/ABI"><code>ABI</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/ArrayType"><code>ArrayType</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/CData"><code>CData</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/CType"><code>CType</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/FunctionType"><code>FunctionType</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/Int64"><code>Int64</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/Library"><code>Library</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/PointerType"><code>PointerType</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/StructType"><code>StructType</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/UInt64"><code>UInt64</code></a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/ctypes"><code>ctypes</code></a></li></ol>
      </details>
  </li>
  <li class="toggle">
      <details>
        <summary>Examples</summary>
        <ol><li><a href="/en-US/docs/Mozilla/js-ctypes/Examples/Add_to_iPhoto">Add to iPhoto</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Examples/Using_C_structs_and_pointers">Using C struct and pointers</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Examples/Using_COM_from_js-ctypes">Using COM from js-ctypes</a></li><li><a href="/en-US/docs/Mozilla/js-ctypes/Examples/Using_Objective-C_from_js-ctypes">Using Objective-C from js-ctypes</a></li></ol>
      </details>
  </li>
 </ol>
</section>

<div class="draft notecard">
    <p><strong>Draft</strong><br>
    This page is not complete.</p>

</div>

<p>As JavaScript doesn&apos;t currently include standard support for 64-bit integer values, js-ctypes offers the <a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/Int64" title="Because JavaScript doesn&apos;t currently include standard support for 64-bit integer values, js-ctypes offers the Int64 and UInt64 objects to let you work with C functions and data that need (or may need) values represented using a 64-bit data type."><code>Int64</code></a> and <code>UInt64</code> objects to let you work with C functions and data that need (or may need) to use data represented using a 64-bit data type.</p>

<p>You use the <code>UInt64</code> object to create and manipulate 64-bit unsigned integers.</p>

<div class="note"><strong>Note:</strong> It&apos;s important to note that the 64-bit integer objects created by <code>UInt64</code> are not <code>UInt64</code> objects; rather, they&apos;re opaque objects whose values you manipulate through the other methods on the <code>UInt64</code> object. See <a href="/en/js-ctypes/Using_js-ctypes/Working_with_data#64-bit_integers" title="en/js-ctypes/Using js-ctypes/Working with data#64-bit integers">64-bit integers</a> for details.</div>

<h2 id="Syntax">Syntax</h2>

<p>Creates and returns a new 64-bit unsigned integer.</p>

<pre>UInt64 UInt64(
  value
);
</pre>

<h6 id="Parameters">Parameters</h6>

<dl>
 <dt><code>value</code></dt>
 <dd>The value to assign the new 64-bit unsigned integer object. This may be specified as an integer (if the value can be represented as a 32-bit value), another 64-bit integer object (either signed or unsigned), or as a string, which may consist of an optional minus sign, followed by either a decimal number or &quot;0x&quot; or &quot;0X&quot; followed by a hexadecimal number. The string is then converted into the corresponding 64-bit integer value. You can therefore use a string to represent a 64-bit value that is too large to represent as a 32-bit JavaScript <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" title="The Number JavaScript object is a wrapper object allowing you to work with numerical values. A Number object is created using the Number() constructor. A primitive type object number created using the Number() function."><code>Number</code></a>.</dd>
</dl>

<h6 id="Return_value">Return value</h6>

<p>A new object representing the specified <code>value</code>.</p>

<h6 id="Exceptions_thrown">Exceptions thrown</h6>

<dl>
 <dt><code>TypeError</code></dt>
 <dd>The specified value cannot be converted into a 64-bit integer. Either it&apos;s not a <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" title="The Number JavaScript object is a wrapper object allowing you to work with numerical values. A Number object is created using the Number() constructor. A primitive type object number created using the Number() function."><code>Number</code></a>, <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" title="The String global object is a constructor for strings or a sequence of characters."><code>String</code></a>, or 64-bit integer object, or it&apos;s a string that is incorrectly formatted or contains a value outside the range that can be represented in 64 bits. This will also be thrown if the source value is a floating-point number that can&apos;t be precisely represented as a 64-bit integer.</dd>
</dl>

<h2 id="Method_overview">Method overview</h2>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>Number <a href="#compare%28%29">compare</a>(a, b);</code></td>
  </tr>
  <tr>
   <td><code>Number <a href="#hi%28%29">hi</a>(a);</code></td>
  </tr>
  <tr>
   <td><code>UInt64 <a href="#join%28%29">join</a>(high, low);</code></td>
  </tr>
  <tr>
   <td><code>Number <a href="#lo%28%29">lo</a>(a);</code></td>
  </tr>
  <tr>
   <td><code>String <a href="#toSource%28%29">toSource</a>();</code></td>
  </tr>
  <tr>
   <td><code>String <a href="#toString%28%29">toString</a>([radix]);</code></td>
  </tr>
 </tbody>
</table>

<h2 id="Methods">Methods</h2>

<h3 id="compare">compare()</h3>

<p>Compares two 64-bit integer values.</p>

<pre>Number compare(
  a,
  b
);
</pre>

<h6 id="Parameters_2">Parameters</h6>

<dl>
 <dt><code>a</code></dt>
 <dd>The first value to compare.</dd>
 <dt><code>b</code></dt>
 <dd>The second value to compare.</dd>
</dl>

<h6 id="Return_value_2">Return value</h6>

<p>The returned value is -1 if <em><code>a</code> &lt; </em><code><em>b</em></code>, 0 if <em><code>a</code></em><em> == </em><code><em>b</em></code>, and 1 if <em><code>a</code></em><em> &gt; </em><code><em>b</em></code>.</p>

<h6 id="Exceptions_thrown_2">Exceptions thrown</h6>

<dl>
 <dt><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a></dt>
 <dd>One or both of the specified values is not a 64-bit integer (either signed or unsigned).</dd>
</dl>

<h3 id="hi"><br>
 hi()</h3>

<p>Returns the high 32 bits of the specified value.</p>

<pre>Number hi(
  num
);
</pre>

<h6 id="Parameters_3">Parameters</h6>

<dl>
 <dt><code>num</code></dt>
 <dd>The value whose high 32 bits are to be returned.</dd>
</dl>

<h6 id="Return_value_3">Return value</h6>

<p>The high 32 bits of <code>num</code> are returned. This is essentially <code>num &gt;&gt; 32</code>.</p>

<h6 id="Exceptions_thrown_3">Exceptions thrown</h6>

<dl>
 <dt><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a></dt>
 <dd><code>num</code> is not a 64-bit integer object.</dd>
</dl>

<h3 id="lo"><br>
 lo()</h3>

<p>Returns the low 32 bits of the specified value.</p>

<pre>Number lo(
  num
);
</pre>

<h6 id="Parameters_4">Parameters</h6>

<dl>
 <dt><code>num</code></dt>
 <dd>The <code>Int64</code> value whose low 32 bits are to be returned.</dd>
</dl>

<h6 id="Return_value_4">Return value</h6>

<p>The low 32 bits of <code>num</code> are returned. This is essentially <code>num &amp; 0xFFFFFFFF</code>.</p>

<h6 id="Exceptions_thrown_4">Exceptions thrown</h6>

<dl>
 <dt><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a></dt>
 <dd><code>num</code> is not a 64-bit integer object.</dd>
</dl>

<h3 id="join"><br>
 join()</h3>

<p>Creates a 64-bit integer object with a value constructed using the specified high and low order 32-bit values.</p>

<pre>UInt64 join(
  high,
  low
);
</pre>

<h6 id="Parameters_5">Parameters</h6>

<dl>
 <dt><code>high</code></dt>
 <dd>The high-order 32 bits of the value to create.</dd>
 <dt><code>low</code></dt>
 <dd>The low-order 32 bits of the value to create.</dd>
</dl>

<h6 id="Return_value_5">Return value</h6>

<p>A new 64-bit integer object comprised of the two values merged together. The returned value is <code>(high &lt;&lt; 32) + low</code>.</p>

<h6 id="Exceptions_thrown_5">Exceptions thrown</h6>

<dl>
 <dt><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError" title="The TypeError object represents an error when a value is not of the expected type."><code>TypeError</code></a></dt>
 <dd>One or both of the specified numbers is not a JavaScript number with an integral value.</dd>
</dl>

<h3 id="toSource"><br>
 toSource()</h3>

<p>This method is for internal debugging use only.</p>

<div class="warning notecard"><strong>Warning:</strong> Do not rely on the value returned by this method, as it&apos;s subject to change at any time, depending on the debugging needs of the developers.</div>

<h3 id="toString"><br>
 toString()</h3>

<p>Returns a string representation of the object&apos;s numeric value.</p>

<pre>String toString(
  [radix]
);
</pre>

<h6 id="Parameters_6">Parameters</h6>

<dl>
 <dt><code>radix</code> <span class="optional optionalInline notecard inline">Optional</span></dt>
 <dd>The radix (base) to use when constructing the string. If you don&apos;t specify a radix, base 10 is used.</dd>
</dl>

<h6 id="Return_value_6">Return value</h6>

<p>A string representation of the value in the specified radix. This string consists of a leading minus sign, if the value was negative, followed by one or more lower-case digits in the specified radix.</p>

<h2 id="Arithmetic_Operations">Arithmetic Operations</h2>

<pre class="brush: js">    const UInt64 = ctypes.UInt64;
    const Int64 = ctypes.Int64;

    function ensureUInt64(aArr) {
        // makes elements in aArr a UInt64 if it can be made, else throws
        for (var i=0; i&lt;aArr.length; i++) {
            var cCon = aArr[i].constructor.name;
            if (cCon != &apos;UInt64&apos;) {
                if ([&apos;String&apos;, &apos;Number&apos;].indexOf(cCon) &gt; -1) {
                    aArr[i] = UInt64(aArr[i]);
                } else {
                    throw new Error(&apos;Invalid type at position &apos; + i + &apos; it must be a numeric string, a number, or a UInt64. Type is &quot;&apos; + cCon + &apos;&quot;&apos;);
                }
            }
        }
    }

    function UInt64_add(...uint64) {
        ensureUInt64(uint64);

        var hi = UInt64.hi(uint64[0]);
        var lo = UInt64.lo(uint64[0]);;

        for (var i=1; i&lt;uint64.length; i++) {
            hi += UInt64.hi(uint64[i]);
            lo += UInt64.lo(uint64[i]);

            if (lo &gt; 0x100000000) {
                hi += 1;
            }
            hi = hi &gt;&gt;&gt; 0;
            lo = lo &gt;&gt;&gt; 0;
        }

        return UInt64.join(hi, lo);
    }

    function UInt64_sub(a, b) {
        var valArr = [a, b];
        ensureUInt64(valArr);
        a = valArr[0];
        b = valArr[1];

        var hi = UInt64.hi(a) - UInt64.hi(b);
        var lo = UInt64.lo(a) - UInt64.lo(b);
        if (lo &lt; 0) {
            hi -= 1;
        }

        return UInt64.join(hi &gt;&gt;&gt; 0, lo &gt;&gt;&gt; 0);
    }

    function UInt64_mul(a, b) {
        var valArr = [a, b];
        ensureUInt64(valArr);
        a = valArr[0];
        b = valArr[1];

        var ah = UInt64.hi(a);
        var al = UInt64.lo(a);

        var bh = UInt64.hi(b);
        var bl = UInt64.lo(b);

        var a5 = ah &gt;&gt;&gt; 20;
        var a4 = (ah &gt;&gt;&gt; 7) &amp; 0x1fff;
        var a3 = ((ah &lt;&lt; 6) | (al &gt;&gt;&gt; 26)) &amp; 0x1fff;
        var a2 = (al &gt;&gt;&gt; 13) &amp; 0x1fff;
        var a1 = al &amp; 0x1fff;

        var b5 = bh &gt;&gt;&gt; 20;
        var b4 = (bh &gt;&gt;&gt; 7) &amp; 0x1fff;
        var b3 = ((bh &lt;&lt; 6) | (bl &gt;&gt;&gt; 26)) &amp; 0x1fff;
        var b2 = (bl &gt;&gt;&gt; 13) &amp; 0x1fff;
        var b1 = bl &amp; 0x1fff;

        var c1 = a1 * b1;
        var c2 = a1 * b2 + a2 * b1;
        var c3 = a1 * b3 + a2 * b2 + a3 * b1;
        var c4 = a1 * b4 + a2 * b3 + a3 * b2 + a4 * b1;
        var c5 = a1 * b5 + a2 * b4 + a3 * b3 + a4 * b2 + a5 * b1;

        c2 += c1 &gt;&gt;&gt; 13;
        c1 &amp;= 0x1fff;
        c3 += c2 &gt;&gt;&gt; 13;
        c2 &amp;= 0x1fff;
        c4 += c3 &gt;&gt;&gt; 13;
        c3 &amp;= 0x1fff;
        c5 += c4 &gt;&gt;&gt; 13;
        c4 &amp;= 0x1fff;

        var ch = ((c5 &lt;&lt; 20) | (c4 &lt;&lt; 7) | (c3 &gt;&gt;&gt; 6)) &gt;&gt;&gt; 0;
        var cl = ((c3 &lt;&lt; 26) | (c2 &lt;&lt; 13) | c1) &gt;&gt;&gt; 0;

        return UInt64.join(ch, cl);
    }

    function UInt64_or(...uint64) {
        // bitwise OR
        // if there are logical OR and bitwise OR, bitwise OR may be named `bor` or `bitor`, but I don&apos;t think there could be logical OR, so I think just `or` is the right name

        ensureUInt64(uint64);

        var hi = 0;
        var lo = 0;

        for (var i=0; i&lt;uint64.length; i++) {
            hi |= UInt64.hi(uint64[i]);
            lo |= UInt64.lo(uint64[i]);
        }

        return UInt64.join(hi &gt;&gt;&gt; 0, lo &gt;&gt;&gt; 0);
    }

    function UInt64_and(...uint64) {
        // bitwise AND could be applied to more than 2 operands, not sure if it&apos;s useful tho

        ensureUInt64(uint64);

        var hi = UInt64.hi(uint64[0]);
        var lo = UInt64.lo(uint64[0]);

        for (var i=1; i&lt;uint64.length; i++) {
            hi &amp;= UInt64.hi(uint64[i]);
            lo &amp;= UInt64.lo(uint64[i]);
        }

        return UInt64.join(hi &gt;&gt;&gt; 0, lo &gt;&gt;&gt; 0);
    }</pre>

<h2 id="See_Also">See Also</h2>

<ul>
 <li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/ctypes"><code>ctypes</code></a></li>
 <li><a href="/en-US/docs/Mozilla/js-ctypes/js-ctypes_reference/Int64"><code>Int64</code></a></li>
</ul>
