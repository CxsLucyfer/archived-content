<p>Â </p>

<div class="warning">
<p>Support for extensions using XUL/XPCOM or the Add-on SDK was removed in Firefox 57, released November 2017. As there is no supported version of Firefox enabling these technologies, this page will be removed by December 2020.</p>

<p>Add-ons using the techniques described in this document are considered a legacy technology in Firefox. Don't use these techniques to develop new add-ons. Use <a href="/en-US/Add-ons/WebExtensions">WebExtensions</a> instead. If you maintain an add-on which uses the techniques described here, consider migrating it to use WebExtensions.</p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 53</a>, no new legacy add-ons will be accepted on addons.mozilla.org (AMO) for desktop Firefox and Firefox for Android.</strong></p>

<p><strong>Starting from <a href="https://wiki.mozilla.org/RapidRelease/Calendar">Firefox 57</a>, only extensions developed using WebExtensions APIs will be supported on Desktop Firefox and Firefox for Android. </strong></p>

<p>Even before Firefox 57, changes coming up in the Firefox platform will break many legacy extensions. These changes include multiprocess Firefox (e10s), sandboxing, and multiple content processes. Legacy extensions that are affected by these changes should migrate to use WebExtensions APIs if they can. See the <a href="https://blog.mozilla.org/addons/2017/02/16/the-road-to-firefox-57-compatibility-milestones/">"Compatibility Milestones" document</a> for more information.</p>

<p>A wiki page containing <a href="https://wiki.mozilla.org/Add-ons/developer/communication">resources, migration paths, office hours, and more</a>, is available to help developers transition to the new technologies.</p>
</div>

<section class="Quick_links" id="Quick_Links">
<ol>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions"><strong>Browser extensions</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Getting_started">Getting started</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">What are extensions?</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Your second extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_">What next?</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Concepts">Concepts</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Using the JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Working with files</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalization</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Security best practices</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#User_Interface">User interface</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface">User Interface</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Toolbar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Address bar button</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Sidebars</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Context menu items</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Options page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Extension pages</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Developer tools panels</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#How_to">How to</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercept HTTP requests</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insert external content</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Add a button to the toolbar</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Implement a settings page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Work with the Tabs API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Work with the Bookmarks API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Work with the Cookies API</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Work with contextual identities</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Porting">Porting</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porting a Google Chrome extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porting a legacy Firefox extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">Embedded WebExtensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparison with the Add-on SDK</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparison with XUL/XPCOM extensions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Differences between desktop and Android</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions#Firefox_workflow">Firefox workflow</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">User Experience</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Temporary Installation in Firefox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Testing persistent and restart features</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Developing for Firefox for Android</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Getting started with web-ext</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">web-ext command reference</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Extensions and the Add-on ID</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Request the right permissions</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API">JavaScript APIs</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json">Manifest keys</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/applications">applications</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes"><strong>Themes</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser theme concepts</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_themes">Lightweight themes</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Themes/Lightweight_Themes/FAQ">Lightweight themes FAQ</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution"><strong>Publishing and Distribution</strong></a></li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Publishing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution">Signing and distribution overview</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Package your extension</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Submit an add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Source_Code_Submission">Source code submission</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Resources for publishers</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Listing">Creating an appealing listing</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Review policies</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Developer agreement</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/AMO/Policy/Featured">Featured add-ons</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retiring your extension</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options">Distributing add-ons</a>
  <ol>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">For sideloading</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">For desktop apps</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">For an enterprise</a></li>
  </ol>
 </li>
 <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Community and Support</strong></a></li>
 <li><a href="#">Channels</a>
  <ol>
   <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li>
   <li><a href="https://discourse.mozilla.org/c/add-ons">Add-on forums</a></li>
   <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
   <li><a href="/en-US/docs/Mozilla/Add-ons/#Contact_us">Contact us</a></li>
  </ol>
 </li>
</ol>
</section>

<p>Â </p>

<div class="note">
<p>Unstable</p>
</div>

<p><span class="seoSummary">Functional helper methods.</span></p>

<h2 id="Usage">Usage</h2>

<p>The <code>lang/functional</code> module provides functional helper methods. Some of these functions implement APIs from Jeremy Ashkenas's <a href="http://underscorejs.org">underscore.js</a> and all credits go to him and his contributors.</p>

<h2 id="Globals">Globals</h2>

<h3 id="Functions">Functions</h3>

<h4 class="addon-sdk-api-name" id="method(lambda)"><code>method(lambda)</code></h4>

<p>Takes a function and returns a method associated with an object. When the method is invoked on an instance of the object, the original function is called. It is passed the object instance (i.e. <code>this</code>) as the first parameter, followed by any parameters passed into the method.</p>

<pre class="brush: js"><code>let { method } = require("sdk/lang/functional");</code>
<code>let myNumber = {
  times: method(times),
  add: method(add),
  number: 0
};

function times (target, x) {
  return target.number *= x;
}
function add (target, x) {
  return target.number += x;
}

console.log(myNumber.number); // 0
myNumber.add(10); // 10
myNumber.times(2); // 20
myNumber.add(3); // 23</code></pre>

<h5 id="Parameters">Parameters</h5>

<p><strong>lambda : function</strong><br>
 The function to be wrapped and returned.</p>

<h5 id="Returns">Returns</h5>

<p><strong>function</strong> : The wrapped <code>lambda</code>.</p>

<h4 class="addon-sdk-api-name" id="defer(fn)"><code>defer(fn)</code></h4>

<p>Takes a function and returns a wrapped version of the function. Calling the wrapped version will call the original function during the next event loop. This is similar to calling <a href="/en-US/Add-ons/SDK/High-Level_APIs/timers#setTimeout(callback.2C_ms)">setTimeout</a> with no wait (i.e. <code>setTimeout(function () { ... }, 0)</code>), except that the wrapped function may be reused and does not need to be repeated each time. This also enables you to use these functions as event listeners.</p>

<pre class="brush: js"><code>let { defer } = require("sdk/lang/functional");
let fn = defer(function myEvent (event, value) {
  console.log(event + " : " + value);
});</code>

<code>fn("click", "#home");
console.log("done");</code>

<code>// This will print 'done' before 'click : #home' since
// we deferred the execution of the wrapped `myEvent`
// function, making it non-blocking and executing on the
// next event loop</code></pre>

<h5 id="Parameters_2">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function to be deferred.</p>

<h5 id="Returns_2">Returns</h5>

<p><strong>function</strong> : The new, deferred function.</p>

<h4 class="addon-sdk-api-name" id="remit()"><code>remit()</code></h4>

<p>An alias for <a href="/en-US/Add-ons/SDK/Low-Level_APIs/lang_functional#defer(fn)">defer</a>.</p>

<h4 class="addon-sdk-api-name" id="invoke(callee_params_self)"><code>invoke(callee, params, self)</code></h4>

<p>Invokes <code>callee</code>, passing <code>params</code> as an argument and <code>self</code> as <code>this</code>. Returns the value that is returned by <code>callee</code>.</p>

<pre class="brush: js"><code>let { invoke } = require("sdk/lang/functional");</code>

<code>invoke(sum, [1,2,3,4,5], null); // 15</code>

<code>function sum () {
  return Array.slice(arguments).reduce(function (a, b) {
    return a + b;
  });
}</code></pre>

<h5 id="Parameters_3">Parameters</h5>

<p><strong>callee : function</strong><br>
 Function to invoke.</p>

<p><strong>params : Array</strong><br>
 Parameters to be passed into <code>callee</code>.</p>

<p><strong>self : mixed</strong><br>
 Object to be passed as the <code>this</code> context to <code>callee</code>.</p>

<h5 id="Returns_3">Returns</h5>

<p><strong>mixed</strong> : Returns the return value of <code>callee</code>.</p>

<h4 class="addon-sdk-api-name" id="partial(fn_arguments...)"><code>partial(fn, arguments...)</code></h4>

<p>Takes a function and bind values to one or more arguments, returning a new function of smaller arity.</p>

<pre class="brush: js"><code>let { partial } = require("sdk/lang/functional");
let add = function add (x, y) { return x + y; }
let addOne = partial(add, 1);</code>

<code>addOne(5); // 6
addOne(10); // 11
partial(add, addOne(20))(2); // 23</code></pre>

<h5 id="Parameters_4">Parameters</h5>

<p><strong>fn : function</strong><br>
 Function on which partial application is to be performed.</p>

<p><strong>arguments... : mixed</strong><br>
 Additional arguments</p>

<h5 id="Returns_4">Returns</h5>

<p><strong>function</strong> : The partial function.</p>

<h4 class="addon-sdk-api-name" id="compose(fn...)"><code>compose(fn...)</code></h4>

<p>Returns the <a href="http://en.wikipedia.org/wiki/Function_composition_(computer_science)">composition</a> of a list of functions, where each function consumes the return value of the function that follows. In math terms, composing the functions <code>f()</code>, <code>g()</code>, and <code>h()</code> produces <code>f(g(h()))</code>.</p>

<pre class="brush: js"><code>let { compose } = require("sdk/lang/functional");</code>

<code>let welcome = compose(exclaim, greet);</code>

<code>welcome('moe'); // "hi: moe!";</code>

<code>function greet (name) { return "hi: " + name; }
function exclaim (statement) { return statement + "!"; }</code></pre>

<h5 id="Parameters_5">Parameters</h5>

<p><strong>fn... : function</strong><br>
 Takes a variable number of functions as arguments and composes them from right to left.</p>

<h5 id="Returns_5">Returns</h5>

<p><strong>function</strong> : The composed function.</p>

<h4 class="addon-sdk-api-name" id="wrap(fn_wrapper)"><code>wrap(fn, wrapper)</code></h4>

<p>Returns the first function passed as an argument to the second, allowing you to adjust arguments, run code before and after, and conditionally execute the original function.</p>

<pre class="brush: js"><code>let { wrap } = require("sdk/lang/functional");</code>

<code>let wrappedHello = wrap(hello, function (fn, name) {
  return "before, " + fn(name) + "after";
});</code>

<code>wrappedHello("moe"); // "before, hello: moe, after"</code>

<code>function hello (name) { return "hello: " + name; }</code></pre>

<h5 id="Parameters_6">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function to be passed into the <code>wrapper</code> function.</p>

<p><strong>wrapper : function</strong><br>
 The function that is called when the return function is executed, taking the wrapped <code>fn</code> as the first parameter.</p>

<h5 id="Returns_6">Returns</h5>

<p><strong>function</strong> : A function which, when called, executes <code>wrapper</code> with <code>fn</code> as the first parameter, and passes in any additional parameters to the <code>wrapper</code> function.</p>

<h4 class="addon-sdk-api-name" id="identity(value)"><code>identity(value)</code></h4>

<p>Returns the same value that is used as the argument. In math: f(x) = x.</p>

<pre class="brush: js"><code>let { identity } = require("sdk/lang/functional");</code><code>
let x = 5;
identity(x); // 5</code></pre>

<h5 id="Parameters_7">Parameters</h5>

<p><strong>value : mixed</strong><br>
 The value to be returned.</p>

<h5 id="Returns_7">Returns</h5>

<p><strong>mixed</strong> : The value that was originally passed in.</p>

<h4 class="addon-sdk-api-name" id="memoize(fn_hasher)"><code>memoize(fn, hasher)</code></h4>

<p><a href="http://en.wikipedia.org/wiki/Memoization">Memoizes</a> a given function by caching the computed result. Useful for speeding up slow-running computations. If passed an optional <code>hashFunction</code>, it will be used to compute the hash key for storing the result, based on the arguments to the original function. The default <code>hashFunction</code> just uses the first argument to the memoized function as the key.</p>

<pre class="brush: js"><code>let { memoize } = require("sdk/lang/functional");</code>

<code>let memoizedFn = memoize(primeFactorization);</code>

<code>memoizedFn(50); // Returns [2, 5, 5], had to compute
memoizedFn(100); // Returns [2, 2, 5, 5], had to compute
memoizedFn(50); // Returns [2, 5, 5] again, but pulled from cache</code>

<code>function primeFactorization (x) {
  // Some tricky stuff
}</code>

<code>// We can also use a hash function to compute a different
// hash value. In this example, we'll fabricate a function
// that takes a string of first and last names that
// somehow computes the lineage of that name. Our hash
// function will just parse the last name, as our naive
// implementation assumes that they will share the same lineage</code>

<code>let getLineage = memoize(function (name) {
  // computes lineage
  return data;
}, hasher);</code>

<code>// Hashing function takes a string of first and last name
// and returns the last name.
function hasher (input) {
  return input.split(" ")[1];
}</code>

<code>getLineage("homer simpson"); // Computes and returns information for "simpson"
getLineage("lisa simpson"); // Returns cached for "simpson"</code></pre>

<h5 id="Parameters_8">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function that becomes memoized.</p>

<p><strong>hasher : function</strong><br>
 An optional function that takes the memoized function's parameter and returns a hash key for storing the result.</p>

<h5 id="Returns_8">Returns</h5>

<p><strong>function</strong> : The memoized version of <code>fn</code>.</p>

<h4 class="addon-sdk-api-name" id="delay(fn_ms_arguments)"><code>delay(fn, ms, arguments)</code></h4>

<p>Much like <code>setTimeout</code>, <code>delay</code> invokes a function after waiting a set number of milliseconds. If you pass additional, optional, arguments, they will be forwarded on to the function when it is invoked.</p>

<pre class="brush: js"><code>let { delay } = require("sdk/lang/functional");</code>

<code>delay(printAdd, 2000, 5, 10);</code>

<code class="brush: js">// Prints "5+10=15" in two seconds (2000ms)
function printAdd (a, b) { console.log(a + "+" + b + "=" + (a+b)); }</code></pre>

<h5 id="Parameters_9">Parameters</h5>

<p><strong>fn : function</strong><br>
 A function to be delayed.</p>

<p><strong>ms : number</strong><br>
 Number of milliseconds to delay the execution of <code>fn</code>.</p>

<p><strong>arguments : mixed</strong><br>
 Additional arguments to pass to <code>fn</code> upon execution</p>

<h4 class="addon-sdk-api-name" id="once(fn)"><code>once(fn)</code></h4>

<p>Creates a version of the input function that can only be called one time. Repeated calls to the modified function will have no effect, returning the value from the original call. Useful for initialization functions, instead of having to set a boolean flag and checking it later.</p>

<pre class="brush: js"><code class="brush: js">let { once } = require("sdk/lang/functional");</code><code class="brush: js">
let setup = once(function (env) {
  // initializing important things
  console.log("successfully initialized " + env);
  return 1; // Assume success and return 1
});</code>

<code>setup('dev'); // returns 1
// prints "successfully initialized dev"</code>

<code>// Future attempts to call this function just return the cached
// value that was returned previously
setup('production'); // Returns 1
// No print message is displayed since the function isn't executed</code></pre>

<h5 id="Parameters_10">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function that will be executed only once inside the once wrapper.</p>

<h5 id="Returns_9">Returns</h5>

<p><strong>function</strong> : The wrapped <code>fn</code> that can only be executed once.</p>

<h4 class="addon-sdk-api-name" id="chain(fn)"><code>chain(fn)</code></h4>

<p>Creates a version of the input function that will return <code>this</code>.</p>

<pre class="brush: js"><code>let { chain } = require("sdk/lang/functional");</code>

<code>function Person (age) { this.age = age; }
Person.prototype.happyBirthday = chain(function () this.age++);</code>

<code>let person = new Person(30);</code>

<code>person
  .happyBirthday()
  .happyBirthday()
  .happyBirthday()</code>

<code>console.log(person.age); // 33</code></pre>

<h5 id="Parameters_11">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function that will be wrapped by the chain function.</p>

<h5 id="Returns_10">Returns</h5>

<p><strong>function</strong> : The wrapped function that executes <code>fn</code> and returns <code>this</code>.</p>

<h4 class="addon-sdk-api-name" id="cache()"><code>cache()</code></h4>

<p>An alias for <a href="/en-US/Add-ons/SDK/Low-Level_APIs/lang_functional#once(fn)">once</a>.</p>

<h4 class="addon-sdk-api-name" id="debounce(fn_wait)"><code>debounce(fn, wait)</code></h4>

<div class="geckoVersionNote">
<p>This function is new in Firefox 30.</p>
</div>

<p>From <a href="http://underscorejs.org/#debounce">Underscore's <code>debounce()</code></a> function: this takes a function and returns a new version of the function which, when invoked, will not be executed until it has not been invoked for <code>wait</code> milliseconds. This means that if the function's called many times in quick succession the function will only execute once, after the blizzard of calls has finished. This could be useful, for example, if we are checking the user's keyboard input, and want to wait until they've paused in their typing before we do so.</p>

<h5 id="Parameters_12">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function to debounce.</p>

<p><strong>wait : integer</strong><br>
 The number of milliseconds to wait before the function is executed.</p>

<h5 id="Returns_11">Returns</h5>

<p><strong>function</strong> : The debounced version of <code>fn</code>.</p>

<h4 class="addon-sdk-api-name" id="throttle(fn_wait_options)"><code>throttle(fn, wait, options)</code></h4>

<div class="geckoVersionNote">
<p>This function is new in Firefox 30.</p>
</div>

<p>From <a href="http://underscorejs.org/#throttle">Underscore's <code>throttle()</code></a> function: this takes a function and returns a new version of the function which, when invoked repeatedly, will not excute the function more than once per <code>wait</code> milliseconds.</p>

<h5 id="Parameters_13">Parameters</h5>

<p><strong>fn : function</strong><br>
 The function to debounce.</p>

<p><strong>wait : integer</strong><br>
 The number of milliseconds to wait before the function is executed.</p>

<p><strong>options : object</strong><br>
 By default the function is called as soon as it is invoked (the leading edge of the <code>wait</code> period), and at the end of <code>wait</code> (the trailing edge of the <code>wait</code> period). Pass <code>{leading : false}</code> to stop the function being called at the leading edge, and <code>{trailing : false}</code> to stop it being called at the trailing edge.</p>

<h5 id="Returns_12">Returns</h5>

<p><strong>function</strong> : The throttled version of <code>fn</code>.</p>