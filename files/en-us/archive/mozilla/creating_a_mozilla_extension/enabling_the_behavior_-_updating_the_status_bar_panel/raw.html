<p> </p>

<p>In order for <code>loadTinderboxStatus()</code> to have any effect we need to define a matching <code>updateTinderboxStatus()</code> function.</p>

<pre class="eval">function updateTinderboxStatus()
{
  var icon = document.getElementById('tinderbox-status');

  if (gXMLHttpRequest.responseText.match("EE0000"))
    icon.setAttribute("status", "busted");
  else if (gXMLHttpRequest.responseText.match("FFAA00"))
    icon.setAttribute("status", "testfailed");
  else if (gXMLHttpRequest.responseText.match("11DD11"))
    icon.setAttribute("status", "success");
  else
    icon.setAttribute("status", "");
}
</pre>

<p><code>updateTinderboxStatus()</code> retrieves a reference to the <code>statusbarpanel</code> element then searches through the retrieved HTML document (stored in the <code>responseText</code> property of the <code>XMLHttpRequest</code> instance) for one of several color references. The color red (represented by the RGB code EE0000) means a tinderbox client failed to build Mozilla. The color orange ("FFAAOO") means a client successfully built Mozilla, but the build failed tests. The color green ("11DD11") means the client successfully built and tested Mozilla. When it finds a color, it sets the panel's <code>status</code> attribute to the corresponding status, which causes the previously defined CSS rules to switch to the icon appropriate for that status. Because our conditional looks for worse states (bustage, test failures) first, it will display those states before displaying the success state.</p>

<p></p><div style="text-align: right;" class="prevnext">
    <p><a style="float: left;" href="/en-US/docs/Creating_a_Mozilla_Extension:Enabling_the_behavior_-_retrieving_tinderbox_status">« Previous</a><a href="/en-US/docs/Creating_a_Mozilla_Extension:Enabling_the_behavior_-_updating_the_status_periodically">Next  »</a></p>
</div><p></p>