---
title: How Mozilla finds its configuration files
slug: >-
  Archive/Mozilla/Automatic_Mozilla_Configurator/How_Mozilla_finds_its_configuration_files
tags:
  - Administration
  - Configuration management
  - enterprise
---
<p>
</p>
<h2 id="How_Mozilla_finds_its_configuration_files" name="How_Mozilla_finds_its_configuration_files">How Mozilla finds its configuration files</h2>
<p>Mozilla looks into the binary <code>%USERPROFILE%\Application Data\Mozilla\registry.dat</code> file for its "registry", which contains, amongst other information, a pointer to the directory where the profile is stored (located at <code>Common/Profiles/profileName/directory</code>. The value contained in this key is a litteral value, no variables (such as <code>%USERPROFILE%/MozProfile</code>) allowed. We chose to point this to the user's home directory (<code>H:\Mozilla</code>).
</p><p>The configuration itself is stored in the specified directory, in a file named <code>prefs.js</code>. This is a readable file of javascript commands. All other files in that directory are dynamically created by Mozilla on first start.
</p><p>The of the binary registry file is described <a href="http://groups.google.com/groups?th=d4e7f0c64c38234&amp;seekm=ashf8f%24rra2%40ripley.netscape.com" class="external">here</a>.
</p><p>You may use the following items:
</p>
<ul><li> A <a href="http://alain.knaff.lu/howto/MozillaCustomization/readMozProfile.pl" class="external">program</a> to convert <code>registry.dat</code> file into a readable (and editable) XML file. Usage: <code>./readMozProfile.pl &lt; registry.dat &gt;registry.xml</code>
</li><li> A <a href="http://alain.knaff.lu/howto/MozillaCustomization/writeMozProfile.pl" class="external">program</a> to convert the XML file back into the binary registry.dat file. Usage: <code>./writeMozProfile.pl &lt; registry.xml &gt;registry.dat</code>
</li><li> A ready-to-use <code><a href="http://alain.knaff.lu/howto/MozillaCustomization/registry.dat" class="external">registry.dat</a></code> file pointing to <code>H:\Mozilla</code>
</li><li> A <code><a href="http://alain.knaff.lu/howto/MozillaCustomization/registry.xml" class="external">registry.xml</a></code> file pointing to <code>H:\Mozilla</code>
</li><li> An example of a <code><a href="http://alain.knaff.lu/howto/MozillaCustomization/prefs.js" class="external">prefs.js</a></code> file (to put into the user's <code>H:\Mozilla</code> directory). If you use the userd system from the <a href="http://www.lll.lu" class="external">LLL project</a>, you can generate this automatically with the user's personal values by using this template file <code><a href="http://alain.knaff.lu/howto/MozillaCustomization/prefs.js.tmpl" class="external">prefs.js.tmpl</a></code>
</li></ul>
<p>N.B. Mozilla includes a profile manager, but unfortunately this always include a random part (salt) into the profile's filename, and thus cannot be used to point Mozilla to a profile of the our chosing.
</p><p>N.B. The above scripts have been tested with perl-5.8.0, <a href="http://search.cpan.org/~msergeant/XML-Parser-2.34/" class="external">XML-Parser-2.34</a>, <a href="http://search.cpan.org/author/MSERGEANT/XML-SAX-0.13/" class="external">XML-SAX-0.13</a> and <a href="http://search.cpan.org/author/GRANTM/XML-Simple-2.14/" class="external">XML-Simple-2.14</a>. Different versions of perl, or of these modules may lead to bugs. If you have trouble gettings these scripts to work on your system, there is also an online version available.
</p>
