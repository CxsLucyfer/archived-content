<p>
« <a href="https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference">Gecko Plugin API Reference</a> « <a href="https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Side_Plug-in_API">Plug-in Side Plug-in API</a>
</p>
<h3 id="Summary" name="Summary">Summary</h3>
<p>Represents an event passed by <code>NPP_HandleEvent()</code> to a windowless plug-in.
</p>
<h3 id="Syntax" name="Syntax">Syntax</h3>
<h5 id="Microsoft_Windows" name="Microsoft_Windows">Microsoft Windows</h5>
<pre>typedef struct _NPEvent
{
    uint16 event;
    uint32 wParam;
    uint32 lParam;
} NPEvent;
</pre>
<h5 id="Mac_OS" name="Mac_OS">Mac OS</h5>
<pre>typedef EventRecord NPEvent;
TYPE EventRecord =
    RECORD {
       what:      Integer;
       message:   LongInt;
       when:      LongInt;
       where:     Point;
       modifiers: Integer;
    END;
</pre> <h5 id="XWindows" name="XWindows">XWindows</h5>
<pre>typedef XEvent NPEvent;
</pre> <h3 id="Fields" name="Fields">Fields</h3>
<h5 id="NPEvent_on_Microsoft_Windows" name="NPEvent_on_Microsoft_Windows"><code>NPEvent</code> on Microsoft Windows</h5>
<p>The data structure has the following fields:
</p>
<dl><dt>event
</dt><dd>One of the following event types:
<ul><li> <code>WM_PAINT</code>
</li><li> <code>WM_LBUTTONDOWN</code>
</li><li> <code>WM_LBUTTONUP</code>
</li><li> <code>WM_LBUTTONDBLCLK</code>
</li><li> <code>WM_RBUTTONDOWN</code>
</li><li> <code>WM_RBUTTONUP</code>
</li><li> <code>WM_RBUTTONDBLCLK</code>
</li><li> <code>WM_MBUTTONDOWN</code>
</li><li> <code>WM_MBUTTONUP</code>
</li><li> <code>WM_MBUTTONDBLCLK</code>
</li><li> <code>WM_MOUSEMOVE</code>
</li><li> <code>WM_KEYUP</code>
</li><li> <code>WM_KEYDOWN</code>
</li><li> <code>WM_SETCURSOR</code>
</li><li> <code>WM_SETFOCUS</code>
</li><li> <code>WM_KILLFOCUS </code>
</li></ul>
</dd></dl>
<div class="note">For information about these events, see the Microsoft Windows developer documentation.</div>
<dl><dt><code>wParam</code>
</dt><dd>32 bit field for the Windows event parameter; parameter value depends upon event type.
</dd></dl>
<dl><dt><code>lParam</code>
</dt><dd>32 bit field for the Windows event parameter; parameter value depends upon event type.
</dd></dl>
<h5 id="EventRecord_NPEvent_on_Mac_OS" name="EventRecord_NPEvent_on_Mac_OS"><code>EventRecord</code> <code>NPEvent</code> on Mac OS</h5>
<p><code>NPEvent</code> is defined as an <code>EventRecord</code> data structure, which has the following fields:
</p>
<dl><dt><code>what</code>
</dt><dd>Integer representing an event type. Both windowed and windowless plug-ins receive the same events. </dd><dd>Values:
<ul><li>0 <code>nullEvent</code>
</li><li>1 <code>mouseDown</code>
</li><li>2 <code>mouseUp</code>
</li><li>3 <code>keyDown</code>
</li><li>4 <code>keyUp</code>
</li><li>5 <code>autoKey</code>
</li><li>6 <code>updateEvt</code>
</li><li>7 <code>diskEvt</code>
</li><li>8 <code>activateEvt</code>
</li><li>15 <code>osEvt</code>
</li><li>23 <code>kHighLevelEvent</code>
</li></ul>
</dd></dl>
<dl><dt><code>getFocusEvent</code>
</dt><dd>0, 1 (<code>true</code>, <code>false</code>)
</dd></dl>
<dl><dt><code>loseFocusEvent</code>
</dt><dd><code>adjustCursorEvent</code> 0, 1 (<code>true</code>, <code>false</code>)
</dd></dl>
<div class="note">For information about these events, see the Mac OS developer documentation.</div>
<dl><dt><code>message</code>
</dt><dd><code>LongInt</code>. Additional information about the event. Type of information depends on the event type. Undefined for null, <code>mouseUp</code>, and <code>mouseDown</code> events.
</dd></dl>
<dl><dt><code>when</code>
</dt><dd><code>LongInt</code>. Ticks since start-up.
</dd></dl>
<dl><dt><code>where</code>
</dt><dd><code>Point</code>. Cursor location.
</dd></dl>
<dl><dt><code>modifiers</code>
</dt><dd><code>Integer</code>. Flags.
</dd></dl>
<h5 id="XEvent_NPEvent_on_Unix.2FX11" name="XEvent_NPEvent_on_Unix.2FX11"><code>XEvent</code> <code>NPEvent</code> on Unix/X11</h5>
<p><code>NPEvent</code> is defined as an <code>XEvent</code> data structure, which is a union of a number of different X11 event structures.
</p>
<dl><dt><code>type</code>
</dt><dd>The <code>type</code> member is an int representing an event type, and indicating which structure is relevant. The event type may be any of the ollowing:
<ul><li> <code>GraphicsExpose</code>
</li><li> <code>FocusIn</code>
</li><li> <code>FocusOut</code>
</li><li> <code>EnterNotify</code>
</li><li> <code>LeaveNotify</code>
</li><li> <code>MotionNotify</code>
</li><li> <code>ButtonPress</code>
</li><li> <code>ButtonRelease</code>
</li><li> <code>KeyPress</code>
</li><li> <code>KeyRelease</code>
</li></ul>
</dd></dl>
<h3 id="Description" name="Description">Description</h3>
<h5 id="Microsoft_Windows_Description" name="Microsoft_Windows_Description">Microsoft Windows Description</h5>
<p>The type <code>NPEvent</code> represents an event passed by <a href="en/NPP_HandleEvent">NPP_HandleEvent()</a> to a windowless plug-in. For information about these events, see your Microsoft Windows documentation.
</p>
<h5 id="Mac_OS_Description" name="Mac_OS_Description">Mac OS Description</h5>
<p>The <code>NPEvent</code> object represents an event passed by <a href="en/NPP_HandleEvent">NPP_HandleEvent()</a> to a windowless plug-in. This structure is defined as <code>EventRecord</code>, the event type used by Mac OS. On Mac OS, plug-ins receive the same events for both windowed and windowless plug-ins, as follows.
</p>
<ul><li> Mouse events: Sent if the mouse is within the bounds of the instance.
</li><li> Key events: Sent if the instance has text focus (see below).
</li><li> Update events: Sent if the update region intersects the instance's bounds.
</li><li> Activate events: Sent to all instances in the window being activate or deactivated.
</li><li> Suspend/Resume events: Sent to all instances in all windows.
</li><li> Null events: Sent to all instances in all windows. </li></ul>
<p>In addition to these standard types, the browser provides three additional event types that can be passed in the <code>what</code> field of the <code>EventRecord</code>:
</p>
<ul><li> <code>getFocusEvent</code>: Sent when the instance could become the focus of subsequent key events, when the user clicks the instance or presses the tab key to focus the instance.
</li><li> If your instance accepts key events, return <code>true</code>, and key events will be sent to the instance until it receives a <code>loseFocusEvent</code>.
</li><li> If your plug-in ignores key events, return <code>false</code>, and the key events will be processed by the browser itself.
</li><li> <code>loseFocusEvent</code>: Sent when the instance has lost the text focus, as a result of the user clicking elsewhere on the page or pressing the Tab key to move the focus. No key events are sent to the instance until the next <code>getFocusEvent</code>.
</li><li> <code>adjustCursorEvent</code>: Sent when the mouse enters or leaves the bounds of the instance.
</li><li> If your plug-in wants to set the cursor when the mouse is within the instance, set the cursor and return <code>true</code>.
</li><li> If you don't want a special cursor, return <code>false</code> and the browser will use the standard arrow cursor. </li></ul>
<h5 id="XWindows_Description" name="XWindows_Description">XWindows Description</h5>
<p>The <code>NPEvent</code> object represents an event passed by <a href="en/NPP_HandleEvent">NPP_HandleEvent()</a> to a windowless plug-in. The <code>NPEvent</code> structure is defined as XEvent, the definition of the event type used by the XWindows platform. For information about the XEvent structure and XWindows events, see the XWindows documentation.
</p><p>As the XEvents sent to the plug-in are synthesized and there is not
a native window corresponding to the plug-in rectangle, some of the
members of the XEvent structures are not set to their normal
Xserver values. e.g. Key events don't have a position.
</p><p>Mouse events have x and y coordinates relative
to the top-left corner of the plugin rectangle.
</p>
<h3 id="See_Also" name="See_Also">See Also</h3>
<p><a href="en/NPP_HandleEvent">NPP_HandleEvent()</a>
</p>