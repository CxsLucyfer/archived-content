---
title: NPP_DestroyStream
slug: Archive/Plugins/Reference/NPP_DestroyStream
tags:
  - NPAPI
  - Plugins
---
<p> </p>

<p>« <a href="https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference">Gecko Plugin API Reference</a> « <a href="https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Side_Plug-in_API">Plug-in Side Plug-in API</a></p>

<h3 id="Summary" name="Summary">Summary</h3>

<p>Tells the plug-in that a stream is about to be closed or destroyed.</p>

<h3 id="Syntax" name="Syntax">Syntax</h3>

<pre>#include &lt;npapi.h&gt;

NPError NPP_DestroyStream(NPP       instance,
                           NPStream* stream,
                           NPReason  reason);
</pre>

<h3 id="Parameters" name="Parameters">Parameters</h3>

<p>The function has the following parameters:</p>

<dl>
 <dt>instance</dt>
 <dd>Pointer to current plug-in instance.</dd>
</dl>

<dl>
 <dt>stream</dt>
 <dd>Pointer to current stream.</dd>
</dl>

<dl>
 <dt>reason</dt>
 <dd>Reason the stream was destroyed. Values:
 <ul>
  <li>NPRES_DONE (Most common): Completed normally; all data was sent to the instance.</li>
  <li>NPRES_USER_BREAK: User canceled stream directly by clicking the Stop button or indirectly by some action such as deleting the instance or initiating higher-priority network operations.</li>
  <li>NPRES_NETWORK_ERR: Stream failed due to problems with network, disk I/O, lack of memory, or other problems.</li>
 </ul>
 </dd>
</dl>

<h3 id="Returns" name="Returns">Returns</h3>

<ul>
 <li>If successful, the plug-in should return NPERR_NO_ERROR.</li>
 <li>If unsuccessful, the plug-in should return an error code. For possible values, see <a href="/en/NPAPI/Constants#Error_Codes">Error Codes</a>.</li>
</ul>

<h3 id="Description" name="Description">Description</h3>

<p>The browser calls the <code>NPP_DestroyStream</code> function when a data stream sent to the plug-in is finished, either because it has completed successfully or terminated abnormally. After this, the browser deletes the <a href="/en/NPStream" title="en/NPStream">NPStream</a> object.</p>

<p>You should delete any private data allocated in stream-&gt;pdata at this time, and should not make any further references to the stream object.</p>

<h3 id="See_Also" name="See_Also">See Also</h3>

<p><a href="/en/NPP_NewStream" title="en/NPP_NewStream">NPP_NewStream</a>, <a href="/en/NPStream" title="en/NPStream">NPStream</a></p>
