<p class="summary">This article provides a reference for all the B2G build, Gaia build, and Gecko build variables and commands you might need during Firefox OS-related build operations.</p>

<h2 id="B2G_build">B2G build</h2>

<h3 id="Variables">Variables</h3>

<dl>
 <dt>Example</dt>
 <dd>xxx</dd>
</dl>

<h3 id="Commands">Commands</h3>

<dl>
 <dt><code>./repo sync</code></dt>
 <dd>xxx</dd>
 <dt><code>./config.sh</code></dt>
 <dd>xxx</dd>
</dl>

<h2 id="Gaia_build">Gaia build</h2>

<h3 id="Variables_2">Variables</h3>

<p>See the <a href="https://github.com/mozilla-b2g/gaia/blob/master/Makefile#L497">Gaia MakeFile</a> for the definition of all these variables.</p>

<dl>
 <dt><code>ADB</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>APP</code></dt>
 <dd>Some commands can act on all of gaia or on one application only. This environment variable defines if we want a command to act on one app only, and if so, which app.</dd>
 <dt><code>B2G_SYSTEM_APPS</code></dt>
 <dd>Ensures that the system apps are installed on the system partition.</dd>
 <dt><code>GAIA_DIR</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>PROFILE_DIR</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>PROFILE_FOLDER</code></dt>
 <dd>This defines the folder where the profile will be generated. By default it's <code>gaia/profile</code> for normal profiles and <code>gaia/profile-debug</code> for <code>DEBUG=1</code> profiles (see below.)</dd>
 <dt><code>COREWEBAPPS_DIR</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>SCHEME</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_DOMAIN</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>DEBUG</code></dt>
 <dd>When set to 1, the generated profile is suitable to be used with Firefox desktop or the Firefox OS simulator (B2G Desktop): <code>DEBUG=1 DESKTOP=0 make</code>.<br>
 This includes the <code>httpd.js</code> extension and configured preferences so that you can access applications using <code>app://&lt;appname&gt;.gaiamobile.org/</code>. Some applications are known to work like this, most notably the SMS application.</dd>
 <dt><code>LOCAL_DOMAINS</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>DESKTOP</code></dt>
 <dd>This includes a set of extensions in the <code>DEBUG</code> profile to allow the Gaia System app to be loaded in Firefox. This is quite broken these days and deprecated in favor of Mulet. It's set to 1 by default when <code>DEBUG=1</code> is used, but because this is really broken these days, so you'll want to disable it.<br>
 Be  careful as this also doesn't work with the Firefox OS Simulator (B2G Desktop) at all.</dd>
 <dt><code>DEVICE_DEBUG</code></dt>
 <dd>Enables a more developer-friendly experience: turns on adb debugging with devtools, disables the lock screen, and enables prefs to allow debugging of certified apps.</dd>
 <dt><code>NO_LOCK_SCREEN</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>SCREEN_TIMEOUT</code></dt>
 <dd>When set to 0, this sets a preference in the profile to disable screen timeout.</dd>
 <dt><code>SYSTEM</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_PORT</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_LOCALES_PATH</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_INSTALL_PARENT</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>LOCALES_FILE</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_KEYBOARD_LAYOUTS</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_KEYBOARD_DOWNLOADABLE_LAYOUTS</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>GAIA_KEYBOARD_ENABLE_USER_DICT</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>LOCALE_BASEDIR</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>BUILD_APP_NAME</code></dt>
 <dd>Essentially an alias for <code>APP</code> (see above).</dd>
 <dt><code>PRODUCTION</code></dt>
 <dd>Creates a production build (rather than engineering); Facebook app id and some other production app ids are used with this.  Alternatively <code>make production</code> will work</dd>
 <dt><code>GAIA_OPTIMIZE</code></dt>
 <dd>When set to 1 this runs optimization steps when building Gaia applications such as JS code minification. Not all gaia applications are affected by this, as the feature is opt-in.</dd>
 <dt><code>GAIA_DEVICE_TYPE</code></dt>
 <dd><code>xxx</code></dd>
 <dt><code>G</code><code>AIA_DEV_PIXELS_PER_PX</code></dt>
 <dd>The pixel density of the target device. This affects which image and/or video assets are copied into the build. This defaults to 1, but  higher spec devices need higher resolultion assets — for example the <a href="/en-US/Firefox_OS/Phone_guide/Flame">Flame</a> should use a value of 1.5. It is aliased as <code>GAIA_DPPX</code>.</dd>
 <dt><code>DOGFOOD</code></dt>
 <dd>Turns on Dogfood Gaia build.</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">MOZILLA_OFFICIAL</span></span></code></dt>
 <dd><span class="pl-s"><span class="pl-smi">When nonzero, a Mozilla-branded build will be produced. T</span></span>he default is 0.</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_DEFAULT_LOCALE</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_PRETRANSLATE</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_CONCAT_LOCALES</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_DISTRIBUTION_DIR</span></span></code></dt>
 <dd>Use this to specify a customized Gaia; see the <a href="/en-US/Firefox_OS/Developing_Gaia/Market_customizations_guide">Market customizations guide</a> for more details.</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_APPDIRS</span></span></code></dt>
 <dd><code>xxx</code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_ALLAPPDIRS</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_MEMORY_PROFILE</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">NOFTU</span></span></code></dt>
 <dd>When set to 1, this sets a preference in the profile to disable the FTU.</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">REMOTE_DEBUGGER</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">TARGET_BUILD_VARIANT</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-s"><span class="pl-smi">SETTINGS_PATH</span></span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-s"><span class="pl-smi">xxx</span></span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">FTU_PING_URL</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">KEYBOARD_LAYOUTS_PATH</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">CONTACTS_IMPORT_SERVICES_PATH</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">EMAIL_SERVICES_PATH</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">STAGE_DIR</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">GAIA_APP_TARGET</span></span></code></dt>
 <dd><code><span class="pl-s"><span class="pl-smi">xxx</span></span></code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">BUILD_DEBUG</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">VARIANT_PATH</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">REBUILD</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">P</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">VERBOSE</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">RAPTOR</span></span></code></dt>
 <dd>Enables performance marks and measures to output metadata to logcat. Usage: <code>RAPTOR=1 make reset-gaia</code></dd>
 <dt><code><span class="pl-s"><span class="pl-smi">SHARE_PERF_USAGE</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">DEFAULT_KEYBOAD_SYMBOLS_FONT</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code><span class="pl-s"><span class="pl-smi">DEFAULT_GAIA_ICONS_FONT</span></span></code></dt>
 <dd>xxx</dd>
 <dt><code>MOZ_APPROX_LOCATION</code></dt>
 <dd>Use this to turn on the privacy panel; the default is off, except in engineering builds.</dd>
</dl>

<h3 id="Commands_2">Commands</h3>

<p>The following is an abbreviated list of the most common commands you'll need. A much more detailed list can be found in the <a href="/en-US/Firefox_OS/Developing_Gaia/make_options_reference">Gaia make options reference</a>.</p>

<dl>
 <dt><code>make</code></dt>
 <dd>Makes only the profile.</dd>
 <dt><code>make reset-gaia</code></dt>
 <dd>Deletes the previous profile and installs a new Gaia profile.</dd>
 <dt><code>make install-gaia</code></dt>
 <dd>Installs Gaia on top without deleting anything.</dd>
 <dt><code>make production</code></dt>
 <dd>Does the same thing as <code>PRODUCTION=1 make reset-gaia</code>.</dd>
 <dt><code>make clean</code></dt>
 <dd>Removes the generated profile.</dd>
 <dt><code>make really-clean</code></dt>
 <dd>Removes the generated profile and the directory's xul-runner; you should only run this when things are totally borked.</dd>
</dl>

<h2 id="Gecko_build">Gecko build</h2>

<h3 id="Variables_3">Variables</h3>

<dl>
 <dt><code>MOZ_BUILD_DATE</code></dt>
 <dd>Sets the build id to a specific build date/time.</dd>
 <dt><code>B2G_DEBUG</code></dt>
 <dd>xxx</dd>
 <dt><code>VARIANT</code></dt>
 <dd>Specifies the Gecko variant you want to build. Valid types are detailed below:</dd>
</dl>

<table>
 <tbody>
  <tr>
   <th scope="row"><code>eng<code> </code></code></th>
   <td>
    <p>This is the default flavor. A plain <code>make</code> is the same as <code>make eng</code>.</p>

    <ul>
     <li>Installs modules tagged with: <code>eng</code>, <code>debug</code>, <code>user</code>, and/or <code>development</code>.</li>
     <li>Installs non-APK modules that have no tags specified.</li>
     <li>Installs APKs according to the product definition files, in addition to tagged APKs.</li>
     <li><code>ro.secure=0</code></li>
     <li><code>ro.debuggable=1</code></li>
     <li><code>ro.kernel.android.checkjni=1</code></li>
     <li><code>adb</code> is enabled by default.</li>
     <li>marionette is enabled</li>
     <li>Does not have update notifications by default ( B2G_UPDATER=1 to turn on )</li>
    </ul>
   </td>
  </tr>
  <tr>
   <th scope="row"><code>user<code> </code></code></th>
   <td>
    <p>This is the flavor intended for final release.</p>

    <ul>
     <li>Installs modules tagged with <code>user</code>.</li>
     <li>Installs non-APK modules that have no tags specified.</li>
     <li>Installs APKs according to the product definition files; tags are ignored for APK modules.</li>
     <li><code>ro.secure=1</code></li>
     <li><code>ro.debuggable=0</code></li>
     <li><code>adb</code> is disabled by default.</li>
     <li>Optimizes by default</li>
    </ul>
   </td>
  </tr>
  <tr>
   <th scope="row"><code>userdebug<code> </code></code></th>
   <td><code>make userdebug</code>
    <p>The same as <code>user</code>, except:</p>

    <ul>
     <li>Also installs modules tagged with <code>debug</code>.</li>
     <li><code>ro.debuggable=1</code></li>
     <li><code>adb</code> is enabled by default.</li>
     <li>marionette is enabled</li>
    </ul>
   </td>
  </tr>
 </tbody>
</table>

<div class="note">
<p><strong>Note</strong>: This table is inspired by the <a href="http://www.kandroid.org/online-pdk/guide/build_system.html#androidBuildVariants">Android Build Variants</a> table.</p>
</div>

<h3 id="Commands_3">Commands</h3>

<dl>
 <dt><code>./build.sh buildsymbols</code></dt>
 <dd>Makes build symbols for debugging; see <a href="/en-US/docs/Uploading_symbols_to_Mozillas_symbol_server">Uploading symbols to Mozilla's symbol server</a>.</dd>
 <dt><code>./build.sh gecko-update-full</code></dt>
 <dd>Creates an OTA mar file; see <a href="/en-US/Firefox_OS/Building_and_installing_Firefox_OS/Firefox_OS_update_packages">Firefox OS update packages</a>.</dd>
 <dt><code>./build.sh gecko-update-fota</code></dt>
 <dd>Creates a FOTA mar/zip based on files containing only a subset of files and directories; see <a href="/en-US/Firefox_OS/Building_and_installing_Firefox_OS/Firefox_OS_update_packages">Firefox OS update packages</a>.</dd>
 <dt><code>./build.sh gecko-update-fota-full</code></dt>
 <dd>Creates a FOTA mar/zip based on files; see <a href="/en-US/Firefox_OS/Building_and_installing_Firefox_OS/Firefox_OS_update_packages">Firefox OS update packages</a>.</dd>
 <dt><code>./build.sh gecko-update-fota-fullimg</code></dt>
 <dd>Creates a FOTA mar/zip based on partitions; see <a href="/en-US/Firefox_OS/Building_and_installing_Firefox_OS/Firefox_OS_update_packages">Firefox OS update packages</a>.</dd>
</dl>