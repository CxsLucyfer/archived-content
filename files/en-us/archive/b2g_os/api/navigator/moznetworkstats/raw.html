<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/en-US/docs/Mozilla/Firefox_OS/API/Archive"><code>Archive</code></a></strong></li><li data-default-state="open"><a href="#"><strong>Related pages for Firefox OS</strong></a><ol><li><a href="/en-US/docs/Mozilla/Firefox_OS/API/MozAlarmsManager"><code>MozAlarmsManager</code></a></li><li><a href="/en-US/docs/Mozilla/Firefox_OS/API/MozMobileNetworkInfo"><code>MozMobileNetworkInfo</code></a></li><li><a href="/en-US/docs/Mozilla/Firefox_OS/API/MozWifiP2pGroupOwner"><code>MozWifiP2pGroupOwner</code></a></li></ol></li></ol></section><div class="warning">
    <p style="text-align: center;">This API is available on <a href="/en-US/docs/Mozilla/Firefox_OS">Firefox OS</a> for <a href="/en-US/docs/Mozilla/Firefox_OS/Security/Application_security#App_Types">internal applications</a> only.</p>
</div><p></p>

<h2 id="Summary">Summary</h2>

<p>The <code>MozNetworkStatsManager</code> interface provides methods and properties to monitor data usage.</p>

<h2 id="Syntax" name="Syntax">Syntax</h2>

<pre class="eval">var stats = window.navigator.mozNetworkStats;
</pre>

<h2 id="Properties">Properties</h2>

<dl>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/maxStorageAge" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.maxStorageAge</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span></dt>
 <dd>A number representing the time in milliseconds recorded by the API until present time for each type of connection. All samples older than maxStorageAge from now are deleted.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/sampleRate" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.sampleRate</code></a> <span class="inlineIndicator readOnly readOnlyInline" title="This value may not be changed.">Read only </span></dt>
 <dd>A number representing the minimum time in milliseconds between samples stored in the database.</dd>
</dl>

<h2 id="Methods">Methods</h2>

<dl>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/addAlarm" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.addAlarm()</code></a></dt>
 <dd>Allows to install an alarm on a network. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/clearAllStats" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.clearAllStats()</code></a></dt>
 <dd>Allows to clear all the statistics about the data usage. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/clearStats" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.clearStats()</code></a></dt>
 <dd>Allows to clear all the statistics about the data usage on a specific network. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/getAllAlarms" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getAllAlarms()</code></a></dt>
 <dd>Allows to obtain all alarms for those networks returned by <a href="/en-US/docs/Web/API/MozNetworkStatsManager/getAvailableNetworks" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getAvailableNetworks</code></a>. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/getAvailableNetworks" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getAvailableNetworks()</code></a></dt>
 <dd>Allows to obtain an Array of available networks that used to be saved in the database. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/getAvailableServiceTypes" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getAvailableServiceTypes()</code></a></dt>
 <dd>Allows to obtain an Array of available service types that used to be saved in the database. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/getSamples" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getSamples()</code></a></dt>
 <dd>Allows to access the data usage statistics. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
 <dt><a href="/en-US/docs/Web/API/MozNetworkStatsManager/removeAlarms" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.removeAlarms()</code></a></dt>
 <dd>Allows to remove all network alarms, or a specific network alarm, if an alarmId is provided. Returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> object to handle the success or failure of the request.</dd>
</dl>

<h2 id="Constants">Constants</h2>

<dl>
 <dt>MozNetworkStatsManager.WIFI</dt>
 <dd>Returns 0, identifying Wifi</dd>
 <dt>MozNetworkStatsManager.MOBILE</dt>
 <dd>Returns 1, identifying Mobile</dd>
</dl>

<h2 id="Example_1">Example 1</h2>

<p>Information about the volume of data received and sent are automatically stored by the system. Accessing them is possible by using the <a href="/en-US/docs/Web/API/MozNetworkStatsManager/getSamples" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getSamples()</code></a> method. This method expects three parameters, and a fourth parameter is optional. Here are those parameters:</p>

<dl>
 <dt><code>network</code></dt>
 <dd>The origin of the data, which can represent wifi or mobile. If null, data measurement from both origins are merged. To know in advance which kind of origin is available, the <a href="/en-US/docs/Web/API/MozNetworkStatsManager/getAvailableNetworks" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.getAvailableNetworks</code></a> method returns an <a href="/en-US/docs/JavaScript/Reference/Global_Objects/Array">Array</a> of MozNetworkStatsInterface objects representing each supported interface.</dd>
 <dt>start</dt>
 <dd>A <a href="/en-US/docs/JavaScript/Reference/Global_Objects/Date">Date</a> object representing the beginning of data measurement.</dd>
 <dt>end</dt>
 <dd>A <a href="/en-US/docs/JavaScript/Reference/Global_Objects/Date">Date</a> object representing the end of data measurement.</dd>
 <dt>options <span class="inlineIndicator optional optionalInline">Optional</span></dt>
 <dd>A <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDOMMozNetworkStatsManager#NetworkStatsGetOptions">NetworkStatsGetOptions</a> dictionary. It consists of three keys, two of which are DOMStrings called appManifestURL and serviceType, and the third is the boolean browsingTrafficOnly. appManifestURL is used to filter network stats by app, while serviceType is used to filter stats by system service. Note that these two options cannot be specified at the same time for now; otherwise, an NS_ERROR_NOT_IMPLEMENTED exception will be thrown. As for browsingTrafficOnly, if it is set as true, only the browsing traffic, which is generated from the mozbrowser iframe element within an app, is returned in result. If it is set as false or not set, the total traffic, which is generated from both the mozapp and mozbrowser iframe elements, is returned.</dd>
</dl>

<p>When called, this method returns a <a href="/en-US/docs/Web/API/DOMRequest" title="The documentation about this has not yet been written; please consider contributing!"><code>DOMRequest</code></a> to handle the success or failure of the information request. In case of success the request's result is a <a href="/en-US/docs/Web/API/MozNetworkStats" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStats</code></a> object.</p>

<pre class="brush: js">var networks = navigator.mozNetworkStats.getAvailableNetworks();

networks.onsuccess = function() {
  var network = this.result[0]; // 0 for Wifi; returns a mozNetworkInterface object

  var end = new Date();
  var start = new Date();

  var samples = navigator.mozNetworkStats.getSamples(network, start, end); // returns a mozNetworkStats object

  samples.onsuccess = function () {
    console.log("Data received: " + samples.result.data[0].rxBytes + " Bytes");
    console.log("Data sent: " + samples.result.data[0].txBytes + " Bytes");
  };

  samples.onerror = function () {
    console.log("Something went wrong: ", samples.error);
  };
};

networks.onerror = function () {
  console.log("Something went wrong: ", networks.error);
};</pre>

<h2 id="Example_2">Example 2</h2>

<p>To get a vision of data usage over time, the information about the amount of data is stored in chunks. Each chunk is a value representing the amount of data exchanged since the last chunk was stored.</p>

<p>When requesting the stats, the resulting <a href="/en-US/docs/Web/API/MozNetworkStats" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStats</code></a> object contains as many data chunks as possible for the interval defined between the start and end date. The total number of chunks depends on two parameters (note that those parameters are read-only):</p>

<ul>
 <li><a href="/en-US/docs/Web/API/MozNetworkStatsManager/sampleRate" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.sampleRate</code></a>, which represents the minimum time in milliseconds between samples stored in the database</li>
 <li><a href="/en-US/docs/Web/API/MozNetworkStatsManager/maxStorageAge" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager.maxStorageAge</code></a>, which represents the time in milliseconds recorded by the API until present time. All samples older than maxStorageAge from now are deleted.</li>
</ul>

<p>Each data chunk is a <a href="/en-US/docs/Web/API/MozNetworkStatsData" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsData</code></a> object, and all the data chunks for a given time frame are available through the <a href="/en-US/docs/Web/API/MozNetworkStats/data" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStats.data</code></a> property, which is an <a href="/en-US/docs/JavaScript/Reference/Global_Objects/Array">Array</a> of <a href="/en-US/docs/Web/API/MozNetworkStatsData" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsData</code></a> objects.</p>

<pre class="brush: js">var networks = navigator.mozNetworkStats.getAvailableNetworks();

networks.onsuccess = function() {
  var network = this.result[0]; // 0 for Wifi; returns a mozNetworkInterface object

  var end = new Date();
  var oneHour = 3600000; //in milliseconds
  var start = new Date(end.getTime() - oneHour);

  var samples = navigator.mozNetworkStats.getSamples(network, start, end); // returns a mozNetworkStats object

  samples.onsuccess = function () {
    var total = {
      receive: 0,
      send   : 0
    };

    samples.result.data.forEach(function (chunk) { // array of MozNetworkStatsData objects
      total.receive += chunk.rxBytes;
      total.send    += chunk.txBytes;
    });

    console.log("Since: " + start.toString());
    console.log("Data received: " + total.receive + " Bytes");
    console.log("Data sent: " + total.send + " Bytes")
  };

  samples.onerror = function () {
    console.log("Something went wrong: ", samples.error);
  };
};

networks.onerror = function () {
  console.log("Something went wrong: ", networks.error);</pre>

<h2 id="Permissions">Permissions</h2>

<pre class="brush: json">"permissions": {
  "networkstats-manage": {
    "description": "Required for accessing network statistics information on the device."
  }
}</pre>

<h2 id="Specification">Specification</h2>

<p>Not part of any specification.</p>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/WebAPI/Network_Stats" title="/en-US/docs/WebAPI/Network_Stats">Network Stats API</a></li>
 <li><a href="/en-US/docs/Web/API/MozNetworkStats" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStats</code></a></li>
 <li><a href="/en-US/docs/Web/API/MozNetworkStatsData" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsData</code></a></li>
 <li><a href="/en-US/docs/Web/API/MozNetworkStatsManager" title="The documentation about this has not yet been written; please consider contributing!"><code>MozNetworkStatsManager</code></a></li>
</ul>