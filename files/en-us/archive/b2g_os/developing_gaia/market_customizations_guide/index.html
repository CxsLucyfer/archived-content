---
title: Market customizations guide
slug: Archive/B2G_OS/Developing_Gaia/Market_customizations_guide
tags:
  - Customization
  - Firefox OS
  - Gaia
  - Marketplace
  - build
---
<p></p><section class="Quick_links" id="Quick_Links">

<ol>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting B2G OS</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
  </ol>
 </li>
 <li data-default-state="open"><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>

   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<div class="summary">
<p>Market customizations allow you to specify build-time customization instructions (for example, which apps should be included in your build) in separate directories, without modifying the core Gaia repo. You can include your own customizations in distinct directories, or use the preexisting directories that come with the source. These customizations are specified with build options. In this article we look in detail at how to create and use these customizations.</p>
</div>

<h2 id="Customization_Overview">Customization Overview</h2>

<p>Since 1.0.1, Firefox OS has used the same mechanism as Firefox for customization. All features discussed in this article work inside Firefox OS 1.0.1, unless otherwise indicated.<br>
 <br>
 We have created a full-featured <a href="https://github.com/mozilla-b2g/gaia/tree/master/customization">Gaia distribution customization sample</a> as part of the Gaia repo: study this to learn first-hand what can be done with build-time customization. It will also be referenced in the article below.</p>

<div class="note">
<p><strong>Note</strong>: Send a pull request to the above referenced Github repo if you have any suggestions for improving the customization sample, or see something that has been changed in this article but not updated in the code.</p>
</div>

<p>Below is the tree structure for the customization sample:</p>

<pre>  customize-sample
  ├── power
  │   ├── carrier_power_on.png
  │   └── carrier_power_off.png
  ├── ringtones
  │   ├── list.json
  │   └── ringer_dream_theme.ogg
  ├── wallpapers
  │   ├── customize.png
  │   └── list.json
  ├── browser.json
  ├── calendar.json
  ├── contacts.json
  ├── costcontrol.json
  ├── device-features.json
<span style="font-size: 1rem;">  ├── eu-roaming.json</span>
  ├── homescreens.json
  ├── network.json
  ├── settings.json
  ├── sms-blacklist.json
  ├── support.json
  ├── wapuaprof.json
  └── apps.list</pre>

<div class="note">
<p><strong>Note</strong>: All files are optional. If you don&apos;t provide a file, it will fallback to the system default.</p>
</div>

<p>We will discuss all these optional customizations in the sections that follow, but first let&apos;s see how to apply the customization to Gaia.</p>

<h2 id="Steps_to_apply_customization">Steps to apply customization</h2>

<p>To apply the customization sample to Gaia:</p>

<ol>
 <li>Clone the Gaia source code from <a href="https://github.com/mozilla-b2g/gaia">https://github.com/mozilla-b2g/gaia</a>.</li>
 <li>You can either copy the <code>gaia/customization/</code> directory to a new directory to contain your own customizations, or make edits in the <code>gaia/customization/</code> directory itself. The path to this directory is referred to below as <code>&lt;DISTRIBUTION_PATH&gt;</code>; obviously change this to your directory path.</li>
 <li>Make your changes as required.</li>
 <li>Attach a Firefox OS device to your computer via USB, and check that it is recognised via <a href="/en-US/Firefox_OS/Debugging/Installing_ADB">ADB</a>.</li>
 <li>Build Gaia, specifying the location of the customization sample with the <code>GAIA_DISTRIBUTION_DIR</code> environment variable, like this:
  <pre class="brush: bash">make production GAIA_DISTRIBUTION_DIR=&lt;DISTRIBUTION_PATH&gt;</pre>
 </li>
 <li>You should now get a Gaia build on your Firefox OS device with customizations applied.</li>
</ol>

<p>If you copy the customization sample directory to <code>gaia/distribution/</code>, you can then just run the <code>make</code> command without the extra environment variable:</p>

<pre class="brush: bash">make production</pre>

<div class="note">
<p><strong>Note</strong>: Some customizations are done by the Gaia build scripts. Check our <a href="/en-US/Firefox_OS/Developing_Gaia/make_options_reference">make options reference</a> for Build Script customizations.</p>
</div>

<div class="note">
<p><strong>Note</strong>: SIM card-specific customizations are included at build time, but applied at runtime during the First Time Usage experience.</p>
</div>

<h2 id="Buildtime_Customizations">Buildtime Customizations</h2>

<p>Let&apos;s now go through the different options available in the sample.</p>

<h3 id="power">power/</h3>

<p>Custom power on/off animations (or static images) are included here. Files can be MP4 for animations or PNG for static images.</p>

<p>Valid file names are:</p>

<ul>
 <li><code>carrier_power_on.png</code></li>
 <li><code>carrier_power_on.mp4</code></li>
 <li><code>carrier_power_off.png</code></li>
 <li><code>carrier_power_off.mp4</code></li>
</ul>

<h3 id="ringtones">ringtones/</h3>

<p>Custom ringtones are included here. <code>list.json</code> should contain the filenames of the ringtones, like this:</p>

<pre class="brush: js">  {
    &quot;ringer_classic_courier.opus&quot;: &quot;&quot;,
    &quot;ringer_dream_theme.ogg&quot;: &quot;&quot;,
    &quot;ringer_loud_windchimes.opus&quot;: &quot;&quot;,
    &quot;ringer_bitbounce.opus&quot;: &quot;&quot;
  }</pre>

<p>Custom ringtones are selectable in the Firefox OS settings app through <em>Sound &gt; Ringer</em>. The default ringtone must be set in <code>settings.json</code>, using a DataURI; you can use the <strong>datauri</strong> command to create the DataURI, which is available on node/npm:</p>

<ol>
 <li>Install it using the <strong>npm install datauri -g</strong> command.</li>
 <li>Convert the file to a DataURI with <strong>datauri &lt;FILE&gt;</strong>.</li>
</ol>

<h3 id="wallpapers">wallpapers/</h3>

<p>Custom wallpapers (PNG files) should be included here and listed in <code>list.json</code>, after which they can be selected in the Firefox OS settings app through <em>Display &gt; Wallpaper</em>.</p>

<p>The default wallpaper must be set in <code>settings.json</code>, using the following line:</p>

<pre class="brush: js">&quot;wallpaper.image&quot;: &quot;image location&quot;</pre>

<div class="note">
<p><strong>Note</strong>: The image can be specified as a file path, or a dataURI.</p>
</div>

<h3 id="browser.json">browser.json</h3>

<p>This file allows you to add customizations into the actual Browser app, such as bookmarks and default search engine. See the section <a href="/en-US/Firefox_OS/Hacking_Firefox_OS/Market_customizations_guide#Browser_bookmarks_.26_default_search_engine">Browser bookmarks &amp; default search engine</a> for more details on what to put in this file.</p>

<h3 id="calendar.json">calendar.json</h3>

<p>This file allows you to use your own custom calendars in the Firefox OS Calendar app. You&apos;ll need to specify your own Google Oauth credentials.  In addition, calendar CalDav API access is needed: To  generate the required API key and secret, you need to apply at Google&apos;s <a href="https://developers.google.com/google-apps/calendar/caldav/v2/guide#creating_your_client_id">creating your client ID</a> page; follow these instructions:</p>

<ol>
 <li>Open the <a href="https://code.google.com/apis/console/b/0">API console</a>.</li>
 <li>Create a project and enable <em>Calendar CalDav API</em> in <em>APIs &amp; auth &gt; APIs</em>.</li>
 <li>Click on <em>Credentials</em>.</li>
 <li>Click on <em>Create new client ID</em></li>
 <li>Set the <em>Application type</em> to Installed application, and <em>Installed application type</em> to <em>Other</em>, then press <em>Create Client ID</em>. This should give you a <em>Client ID</em> and <em>Client secret</em>.</li>
 <li>Open the <code>calendar.json</code> file, change the <code>client_id</code> and <code>client_secret</code> to the <em>Client ID</em> and <em>Client secret</em> you got from the Google API console, and save and close.</li>
</ol>

<div class="note">
<p><strong>Note</strong>: API usage is limited to 1,000,000 requests/day.</p>
</div>

<h3 id="camera-config.js_(Gallery_and_Camera_app_image_sizes)">camera-config.js (Gallery and Camera app image sizes)</h3>

<div class="code-body highlight">
<pre class="line"><span class="p">{</span>
  <span class="nt">&quot;maxImagePixelSize&quot;</span><span class="p">:</span> <span class="mi">6000000</span><span class="p">,</span>
  <span class="nt">&quot;maxSnapshotPixelSize&quot;</span><span class="p">:</span> <span class="mi">4000000</span><span class="p">,</span>
  <span class="nt">&quot;requiredEXIFPreviewSize&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;width&quot;</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span>
    <span class="nt">&quot;height&quot;</span><span class="p">:</span> <span class="mi">1222</span>
  <span class="p">}</span>
<span class="p">}</span></pre>
</div>

<p><code>maxImagePixelSize</code> and <code>maxSnapshotPixelSize</code> are the maximum pixel sizes of an image the Gallery and Camera apps are allowed to view. This defaults to 5 mega pixels (5*2<sup>20</sup> pixels; 5MP).</p>

<p>Optionally, you can also define variables to specify the minimum EXIF preview size that will be displayed as a full-screen preview by adding <code>requiredEXIFPreviewSize</code> property. If you do not specify this property then EXIF previews will only be used if they are big enough to fill the screen (via either width or height) in both landscape and portrait mode.</p>

<h3 id="contacts.json">contacts.json</h3>

<p>Contacts listed here will be included in the phone&apos;s contacts database as soon as Gaia is built.</p>

<p>Here&apos;s an example <code>contacts.json</code> file:</p>

<pre class="brush: js">[
   {
     &quot;name&quot;: [&quot;John Doe&quot;],
     &quot;givenName&quot;: [&quot;John&quot;],
     &quot;familyName&quot;: [&quot;Doe&quot;],
     &quot;nickname&quot;: [&quot;Johnny&quot;],
     &quot;category&quot;: [&quot;Work&quot;, &quot;Racing Team&quot;],
     &quot;email&quot;: [
       {
         &quot;type&quot;: [&quot;personal&quot;],
         &quot;value&quot;: &quot;john.doe@example.org&quot;,
         &quot;pref&quot;: true
       },
       {
         &quot;type&quot;: [&quot;work&quot;],
         &quot;value&quot;: &quot;jdoe@example.com&quot;
       }
     ],
     &quot;adr&quot;: [
       {
         &quot;type&quot;: [&quot;personal&quot;],
         &quot;streetAddress&quot;: &quot;123 Foopy St.&quot;,
         &quot;locality&quot;: &quot;San Francisco&quot;,
         &quot;region&quot;: &quot;Downtown&quot;,
         &quot;postalCode&quot;: &quot;94030&quot;,
         &quot;countryName&quot;: &quot;US&quot;
       }
     ]
   },
   {
     &quot;name&quot;: [&quot;CarrierX&quot;],
     &quot;email&quot;: [
       {
         &quot;type&quot;: [&quot;work&quot;],
         &quot;value&quot;: &quot;support@carrierx.com&quot;
       }
     ],
     &quot;url&quot;: [
       {
         &quot;type&quot;: [&quot;work&quot;],
         &quot;value&quot;: &quot;https://www.carrierx.com&quot;
       }
     ]
   }
 ]</pre>

<div class="note">
<p><strong>Note</strong>: See the <a href="/en-US/docs/WebAPI/Contacts">Contacts API page</a> for details on the layout of Contacts objects.</p>
</div>

<div class="note">
<p><strong>Note</strong>: For SIM-card dependent customizations, see the <a href="#Browser_bookmarks_and_default_search_engine">Browser bookmarks and default search engine</a> section.</p>
</div>

<h3 id="device-features.json">device-features.json</h3>

<p>Defines the hardware capabilities of the device. By default it contains:</p>

<pre class="brush: js">{
  &quot;ambientLight&quot;: true,
  &quot;vibration&quot;: true,
  &quot;usbHotProtocolSwitch&quot;: false
}</pre>

<p>You can set the value to <code>false</code> if you want to disable device capabilities.</p>

<h3 style="line-height: 24px; font-size: 1.71428571428571rem;" id="eu-roaming.json">eu-roaming.json</h3>

<p>This file lists the operators that should follow the EU roaming regulation and the apn setting for it. The file comprises three parts. The first part, <code>home</code>,  contains the operator codes of operators that should follow the regulation.  <span style="line-height: 1.5;">The next part, </span><code style="font-style: normal; line-height: 1.5;">foreign</code><span style="line-height: 1.5;">,  contains the operator codes of the foreign operators that the EU roaming notification should be displayed when roaming to. The last part is the content of the EU roaming apn setting. By default the file looks like this:</span></p>

<pre style="font-size: 14px;" class="brush: js">{
  &quot;home&quot;: null,
  &quot;foreign&quot;: null,
  &quot;defaultApns&quot;: []
}
</pre>

<p>If you would like to make the OS display the a roaming notification, you would fill in the file something like the following. This example displays the EU roaming notification when a user roams to a foreign network with operator codes &quot;002, 02&quot;, with a sim card of codes &quot;001, 01&quot;:</p>

<pre style="font-size: 14px;" class="brush: js">{
  &quot;home&quot;: {
    &quot;001&quot;: {
      &quot;01&quot;: true
    }
  },
  &quot;foreign&quot;: {
    &quot;002&quot;: {
      &quot;02&quot;: true
    }
  },
  &quot;defaultApns&quot;: [{
    &quot;apn&quot;: &quot;eu.apn&quot;,
    &quot;types&quot;: [&quot;default&quot;]
  }]
}
</pre>

<div class="note">
<p><strong>Note</strong>: All apn settings listed in the <span style="font-family: courier new,andale mono,monospace;">defaultApns</span> field will also be displayed in the settings app by default.</p>
</div>

<h3 id="homescreens.json">homescreens.json</h3>

<p><a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/homescreens.json">homescreens.json</a> defines what apps to show in the Firefox OS dock and homescreen, and in which order. By default the file looks like this:</p>

<pre class="brush: js">{&quot;homescreens&quot;: [
   [
     [&quot;apps&quot;, &quot;communications&quot;, &quot;dialer&quot;],
     [&quot;apps&quot;, &quot;sms&quot;],
     [&quot;apps&quot;, &quot;browser&quot;],
     [&quot;apps&quot;, &quot;camera&quot;]
   ]
 ]}</pre>

<p>This causes the four described apps to appear in the dock. If we added another array, that set of apps would appear on page 1 of the homescreen, the next set on page 2, etc.</p>

<pre class="brush: js">{&quot;homescreens&quot;: [
   [ // We&apos;re in the dock!
     [&quot;apps&quot;, &quot;communications&quot;, &quot;dialer&quot;],
     [&quot;apps&quot;, &quot;sms&quot;],
     [&quot;apps&quot;, &quot;browser&quot;],
     [&quot;apps&quot;, &quot;camera&quot;]
   ],
   [ // We&apos;re on Page 1 of the homescreen
     [&quot;apps&quot;, &quot;email&quot;],
     [&quot;apps&quot;, &quot;settings&quot;],
     [&quot;apps&quot;, &quot;clock&quot;],
     [&quot;apps&quot;, &quot;calendar&quot;]
   ],
   [ // We&apos;re on Page 2 of the homescreen
     [&quot;external-apps&quot;, &quot;customapp1&quot;],
     [&quot;external-apps&quot;, &quot;customapp2&quot;],
     [&quot;external-apps&quot;, &quot;customapp3&quot;],
     [&quot;external-apps&quot;, &quot;customapp4&quot;]
   ]
 ]}</pre>

<p>The first item inside each sub-array is the folder the app appears inside; the second is the app directory name.</p>

<h4 id="Collections">Collections</h4>

<div class="note">
<p><strong>Note</strong>: In Firefox 2.0, the <code>collections</code> directory was moved from being inside the <code>homescreen</code> app to being inside their own <code>collections</code> app. Note also that some of the manifest fields also changed (see the <a href="https://github.com/mozilla-b2g/gaia/blob/master/apps/collection/collections/funny/manifest.collection">funny collection manifest</a> for an example): <code>provider_id</code> changed to <code>categoryId</code>, and <code>apps</code> changed to <code>pinned</code>.</p>
</div>

<p>Collections are groups of apps that have their own icon that appears on the homescreen. When this icon is tapped, a new screen appears containing all the icons for the apps in the collection. Have a look at the <a href="https://github.com/mozilla-b2g/gaia/tree/master/apps/collection/collections">collections directory in the source code</a> to see what collections are available by default:</p>

<ul>
 <li><code>funny</code>: Enjoy the latest funny apps.</li>
 <li><code>games</code>: Play games online.</li>
 <li><code>local</code>: What&apos;s happening around you?</li>
 <li><code>music</code>: Listen to favorite songs.</li>
 <li><code>news</code>: Keep updated with your world news sources.</li>
 <li><code>shopping</code>: Follow shopping trends.</li>
 <li><code>showbiz</code>: Discover entertainment apps.</li>
 <li><code>social</code>: Follow you social networks in everywhere.</li>
 <li><code>sports</code>: The best apps about sports.</li>
 <li><code>tv</code>: Apps related to media.</li>
</ul>

<p>In each of these directories you will find different resolution icon files, plus a manifest file that defines metadata about the scollection such as name, role, and paths to its icons.</p>

<div class="note">
<p><strong>Note</strong>: There are additional collections available on the E.me server, a total of 19 (the 10 above plus 9 additional ones.) These can be seen when you long tap the homescreen and choose the <em>Add Smart Collections</em> option.</p>
</div>

<p>In <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/homescreens.json"><code>homescreens.json</code></a> it&apos;s possible to define what collections to load, what pages they should appear on and in what order. For example, if we wanted to specify the <code>shopping</code>, <code>social</code>, <code>sports</code> and <code>tv</code> collections to appear, we would write this:</p>

<pre class="brush: js">{&quot;homescreens&quot;: [
   [
     [&quot;apps/collection/collections&quot;, &quot;shopping&quot;],
     [&quot;apps/collection/collections&quot;, &quot;social&quot;],
     [&quot;apps/collection/collections&quot;, &quot;sports&quot;],
     [&quot;apps/collection/collections&quot;, &quot;tv&quot;]
   ], [
     [&quot;apps&quot;, &quot;communications&quot;, &quot;dialer&quot;],
     [&quot;apps&quot;, &quot;sms&quot;],
     [&quot;apps&quot;, &quot;browser&quot;],
     [&quot;apps&quot;, &quot;camera&quot;]
   ]
 ]}</pre>

<p>Each top level array position refers to a page of the homescreen. Here, the collections would appear in the dock, and the individual apps would appear on page 1 of the homescreen.</p>

<div class="note">
<p><strong>Note</strong>: By default, four Collections are prefilled on the first page of the Gaia homescreen: <em>Social</em>, <em>Games</em>, <em>Music</em>, and <em>Entertainment</em>.</p>
</div>

<div class="note">
<p><strong>Note</strong>: Collection names are written in lowercase.</p>
</div>

<h5 id="What_collections_contain">What collections contain</h5>

<p>Collections are composed of two types of app.<br>
 <br>
 <strong>Local apps</strong> are defined at build time by manifest files located at <code>/apps/collection/collections/&lt;collectionName&gt;/manifest.collection</code>. The local apps contained within each collection are defined in the manifest file. For example, the social collection (contains dialer, sms, contacts and email apps) manifest looks like so:</p>

<pre class="brush: js">{
  &quot;name&quot;: &quot;Social&quot;,
  &quot;role&quot;: &quot;collection&quot;,
  &quot;provider_id&quot;: &quot;289&quot;, // adaptive search identifier
  &quot;apps&quot;: [
    [&quot;apps&quot;, &quot;communications&quot;, &quot;dialer&quot;],
    [&quot;apps&quot;, &quot;sms&quot;],
    [&quot;apps&quot;, &quot;communications&quot;, &quot;contacts&quot;],
    [&quot;apps&quot;, &quot;email&quot;]
  ],
  &quot;default_locale&quot;: &quot;en-US&quot;,
  &quot;icons&quot;: {
    &quot;60&quot;: &quot;/collections/social/icon.png&quot;,
    &quot;90&quot;: &quot;/collections/social/icon@1.5x.png&quot;,
    &quot;120&quot;: &quot;/collections/social/icon@2x.png&quot;
  }
 }</pre>

<p><strong>Remote apps</strong> are supplied by the adaptive search provider at runtime, when the device is online.</p>

<h5 id="How_to_translate_collections">How to translate collections</h5>

<p>Collection translations have to be defined in locale files in within the homescreen app, in the <code>apps/collection/locales/</code> directory. Each different locale file has a name structure looking like <code>collections.&lt;langCode&gt;.properties</code> — where <code>&lt;langCode&gt;</code> is for example <code>fr</code> for French — and contains simple lines containing the default English string and translated version. An example from the French locale file follows:</p>

<pre><span class="c1"># Add bookmark to homescreen</span><span class="na">
add-to-home-screen</span><span class="o">=</span><span class="s">Ajouter à l’écran d’accueil</span><span class="na">
add-to-home-screen-header</span><span class="o">=</span><span class="s">Ajouter un lien</span><span class="na">
website-name</span><span class="o">=</span><span class="s">Nom du site web</span><span class="na">
address</span><span class="o">=</span><span class="s">Adresse</span><span class="na">
added-to-home-screen</span><span class="o">=</span><span class="s">Ajouté à l’écran d’accueil</span></pre>

<h5 id="Custom_collections">Custom collections</h5>

<p>As of Firefox OS 1.3, you can define your own custom collections. You simply create them inside the <a href="https://github.com/mozilla-b2g/gaia/tree/master/apps/collection/collections">collections directory</a>, and point to them inside <code>collections.json</code>, as shown above.</p>

<h4 id="Vertical_homescreen_properties">Vertical homescreen properties</h4>

<p>In Firefox 2.0 and above, you can choose a vertical homescreen display instead of the default horizontal display. The vertical homescreen properties are set in <a href="https://github.com/mozilla-b2g/gaia/blob/master/apps/verticalhome/build/default-homescreens.json">default-homescreens.json</a>, including what apps and collections should appear, how many columns the homescreen should have, and what bookmarks should appear. This can be overridden by a file called <code>homescreens.json</code> in the GAIA_DISTRIBUTION_DIR directory.</p>

<h3 id="network.json_(not_in_customization_folder)">network.json (not in customization folder)</h3>

<div class="warning notecard">
<p><strong>Important</strong>: This is no longer supported, as of Firefox OS 1.4+.</p>
</div>

<p>In Firefox OS &lt; 1.4, this file can be created in <code>gaia/apps/settings/resources</code>, and it allows you to set the network types supported by the device. Firefox OS supports the following types:</p>

<ul>
 <li>&apos;wcdma/gsm&apos; (WCDMA preferred)</li>
 <li>&apos;gsm&apos;</li>
 <li>&apos;wcdma&apos;</li>
 <li>&apos;wcdma/gsm-auto&apos; (GSM preferred)</li>
 <li>&apos;cdma/evdo&apos; (CDMA preferred)</li>
 <li>&apos;cdma&apos;</li>
 <li>&apos;evdo&apos;</li>
 <li>&apos;wcdma/gsm/cdma/evdo&apos; (Automatic)</li>
</ul>

<p>An example is as follows:</p>

<pre class="brush: js">{
  &quot;types&quot;:  [
    &quot;cdma/evdo&quot;,
    &quot;cdma&quot;, &quot;evdo&quot;
  ]
}</pre>

<h3 id="settings.json">settings.json</h3>

<ul>
 <li>Settings general: 1.0.1</li>
 <li>Default Rocketbar search provider: 2.0</li>
</ul>

<p>This file allows you to set default wallpaper/ringtones, lockscreen enabled/disabled status, bluetooth on/off status, etc. You can consult <a href="https://github.com/mozilla-b2g/gaia/blob/master/build/config/common-settings.json">build/config/common-settings.json</a> to find out what settings can be set;  for example you can set <code><span class="nt">&quot;wifi.enabled&quot;</span><span class="p">:</span> <span class="kc">false</span></code> to disable wifi by default.</p>

<p>You put your custom settings in <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/settings.json">customization/settings.json</a>.</p>

<h4 id="Default_Rocketbar_search_provider">Default Rocketbar search provider</h4>

<p>In Firefox OS 2.0 and above, you can set the following additional settings inside <code>settings.json</code>, to set the default Rocketbar search provider:</p>

<pre>&quot;search.urlTemplate&quot;: &quot;https://www.google.com/search?q={searchTerms}&quot;,
&quot;search.suggestionsUrlTemplate&quot;: &quot;https://www.google.com/complete/search?client=firefox&amp;q={searchTerms}&quot;,
&quot;search.iconUrl&quot;: &quot;data:image/x-icon;base64,AAABAAIAEBAAAAAAAAB9AQAAJ [TRUNCATED FOR BREVITY]
</pre>

<h3 id="Search_provider_customization">Search provider customization</h3>

<p>In Firefox 2.0+, there is a default list of search providers and icon files in <a href="/en-US/docs/https://github.com/mozilla-b2g/gaia/blob/master/apps/settings/resources/search/providers.json">apps/settings/resources/search/providers.json</a>. You can configure these at build time by modifying <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/search/providers.json">customization/search/providers.json</a> and adding the appropriate icon files into the same directory. The contents of this directory will overwrite <code>app/settings/resources/search</code> if it is found to exist at build time, and if you&apos;ve built with <code>make production GAIA_DISTRIBUTION_DIR=customization</code>.</p>

<h3 id="Customize_default_Homescreen_apps">Customize default Homescreen apps</h3>

<p><code>homescreen.appName</code> allows you to set specific apps as default Homescreen apps.</p>

<div class="code-body highlight">
<pre class="line"><span class="p">{</span> <span class="nt">&quot;homescreen.appName&quot;</span><span class="p">:</span> <span class="s2">&quot;homescreen-stingray&quot;</span> <span class="p">}</span></pre>
</div>

<h3 id="sms-blacklist.json">sms-blacklist.json</h3>

<p>This file contains a custom SMS blacklist: numbers specified in this file can&apos;t have SMS messages sent to them. This list will overwrite <code>blacklist.json</code> in the SMS app. The numbers are specified in an array, like so:</p>

<pre>[&quot;11223344&quot;, &quot;55667788&quot;]</pre>

<h3 id="cellbroadcast">cellbroadcast</h3>

<p>Listening Channels:</p>

<ul>
 <li>availability: runtime: Settings — <code>ril.cellbroadcast.searchlist</code></li>
 <li>type: string</li>
 <li>valid format: <code>\d(-\d)?(,\d(-\d))*</code></li>
</ul>

<p>Disable event reporting:</p>

<ul>
 <li>availability:
  <ul>
   <li>run time: Settings — <code>ril.cellbroadcast.disabled</code></li>
   <li>build time: Preference — <code>ril.cellbroadcast.disabled</code></li>
  </ul>
 </li>
 <li>type: boolean</li>
 <li>meaning: true to completely shutdown Cell Broadcast reporting.</li>
</ul>

<div class="note">
<p><strong>Note</strong>: Default settings are available in <a href="https://mxr.mozilla.org/gaia/source/shared/resources/apn/operator_variant.xml">operator_variant.xml</a>.</p>
</div>

<h3 id="support.json">support.json</h3>

<p>This file contains support contacts, including online support &amp; telephone support. When included, this file will overwrite <code>support.json</code> in the Settings app. Since these customizations will overwrite the default settings, you should copy those settings from the built-in apps and add your own customization onto them if you want to keep default settings and add extra resources.</p>

<p>Here&apos;s an example of what the JSON should look like:</p>

<pre class="brush: js">{
   &quot;onlinesupport&quot;: {
     &quot;href&quot;: &quot;http://support.mozilla.org/&quot;,
     &quot;title&quot;: &quot;Mozilla Support&quot;
   },
   &quot;callsupport&quot;: [
     {
       &quot;href&quot;: &quot;tel:12345678&quot;,
       &quot;title&quot;: &quot;Call Support 1&quot;
     },
     {
       &quot;href&quot;: &quot;tel:87654321&quot;,
       &quot;title&quot;: &quot;Call Support 2&quot;
     }
   ]
 }</pre>

<h3 id="WAP_user_agent_profile_(wapuaprof.json)">WAP user agent profile (wapuaprof.json)</h3>

<p>The WAP user agent profile overrides the user agent information when sending WAP packets. If you want to override the default WAP user agent profile based on MCC/MNC, you can use this one to do it  (further explained in <a href="#runtime_customization">runtime customization</a>).</p>

<h3 id="apps.list">apps.list</h3>

<p>This allows you to specify which apps you want to load up at runtime (in a similar manner to <code>variant.json</code>, as explained in the <a href="#Applications">Applications</a> section below.) The applications are specified like so:</p>

<pre class="brush: bash">apps/*
external-apps/*
outoftree_apps/*</pre>

<p>You can specify individual apps rather than whole folders of apps, like this:</p>

<pre class="brush: bash">apps/email
apps/settings</pre>

<div class="note">
<p><strong>Note</strong>: If you want to include custom external apps as part of your Gaia build, you need to build them in a specific way, and then place them into the <code>gaia/external-apps/</code> folder. Read <a href="#Building_Prebundled_web_apps">Building Prebundled web apps</a> to find out how.</p>
</div>

<div class="warning notecard">
<p><strong>Important</strong>: Apps that you add as part of a customized Firefox OS build need to be added in agreement with Mozilla&apos;s Distribution Agreement.</p>
</div>

<h2 id="Other_customization_options">Other customization options</h2>

<p>There are many other customizations that can be made, which we should explore more. Let&apos;s look at them now.</p>

<div class="note">
<p><strong>Note</strong>: The build script used in many of the below sections can be found in <a href="https://github.com/mozilla-b2g/gaia/blob/master/build/applications-data.js">gaia/build/applications-data.js</a>. This gets copied into an <code>init.json</code> file in the browser app directory at build time.</p>
</div>

<h3 id="Browser_bookmarks_and_default_search_engines">Browser bookmarks and default search engines</h3>

<ul>
 <li>Bookmarks: 1.0.1</li>
 <li>Default search engines: 1.2</li>
</ul>

<p>The default bookmarks and default search engine can be customised at build time, with different variants for each country and network in a single build. The customised data is inserted into the browser app the first time it is run, based on the <a href="http://en.wikipedia.org/wiki/Mobile_country_code">MCC and MNC</a> codes of the SIM card present in the device at the time.</p>

<div class="note">
<p><strong>Note</strong>: Bookmarks can be customised in Firefox OS 1.0.1+, but the procedure for doing so changed in version 2.1 as explained in <a href="#Other_single_variant_customizations"><span style="line-height: 1.5;">Other single variant customizations</span></a> section<span style="line-height: 1.5;">; default search engines can be customised in Firefox OS 1.2+.</span></p>
</div>

<p>The example below (<code>browser.json</code>) shows a configuration for Vivo in Brazil (724006, where 724 is Brazil and 006 is Vivo according to the MCC and MNC codes), along with a default fallback (000000) in case a non-matching SIM card or no SIM card is present.</p>

<pre class="brush: js">content = {
   &apos;000000&apos;: {
     &apos;bookmarks&apos;: [
       { &apos;title&apos;: &apos;Mozilla&apos;,
         &apos;uri&apos;: &apos;https://mozilla.org&apos;,
         &apos;iconUri&apos;:
           &apos;data:image/png;base64,AAABAAIAEBAAAAEAIABo[truncated]&apos;
       },
       { &apos;title&apos;: &apos;Firefox OS&apos;,
         &apos;uri&apos;: &apos;https://mozilla.org/firefoxos&apos;,
         &apos;iconUri&apos;:
           &apos;data:image/png;base64,AAABAAIAEBAAAAEA[truncated]&apos;
       }
     ],
     &apos;searchEngines&apos; : [
        {
          &apos;title&apos;: &apos;Google&apos;,
          &apos;uri&apos;: &apos;https://www.google.com/search?q={searchTerms}&apos;,
          &apos;iconUri&apos;:
            &apos;data:image/png;base64,AAABAAIAEBAAAAEAIABoBAA[truncated]&apos;
        }
      ],
      &apos;settings&apos; : {
        &apos;defaultSearchEngine&apos;: &apos;https://www.google.com/search?q={searchTerms}&apos;
      }
   },

   &apos;724006&apos;: {
     &quot;bookmarks&quot;: [
       { &quot;title&quot;: &quot;Vivo Busca&quot;,
         &quot;uri&quot;: &quot;https://www.google.com.br/m/search&quot;,
         &quot;iconUri&quot;: &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC[truncated]&quot;
       },
       { &quot;title&quot;: &quot;Serviços e Downloads&quot;,
         &quot;uri&quot;: &quot;http://vds.vivo.com.br&quot;,
         &quot;iconUri&quot;: &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACA[truncated]&quot;
       },
       {
         &quot;title&quot;: &quot;Site Vivo&quot;,
         &quot;uri&quot;: &quot;http://www.vivo.com.br/conteudosmartphone&quot;,
         &quot;iconUri&quot;: &quot;data:image/jpg;base64,/9j/4AAQSkZJRg[truncated]&quot;
       }
     ],
     &apos;searchEngines&apos; : [
        {
          &apos;title&apos;: &apos;Yahoo&apos;,
          &apos;uri&apos;: &apos;https://search.yahoo.com/search?q={searchTerms}&apos;,
          &apos;iconUri&apos;:
            &apos;data:image/png;base64,AAABAAIAEBAAAAEAIABoBAA[truncated]&apos;
        }
      ],
      &apos;settings&apos; : {
        &apos;defaultSearchEngine&apos;: &apos;https://search.yahoo.com/search?q={searchTerms}&apos;
      }
   }
 };</pre>

<p>In the example, if a Vivo SIM card from Brazil is entered on first run the user will see Vivo bookmarks, and Yahoo as the default search engine. If another SIM card or no SIM card is entered on first run the user will see Mozilla bookmarks, and Google as the default search engine. There are a few important points to note:</p>

<ul>
 <li>The <code>defaultSearchEngine</code> property <em>must</em> match the <code>uri</code> property of the search engine specified. This string acts as a template for the <code>{searchTerms}</code> placeholder, which will get replaced with the user&apos;s search query at run time. Other values such as search strings may be appended to the query string in the URL template.</li>
 <li>The favicon URLs shown are base64-encoded dataURIs of the image data (truncated for brevity) rather than HTTP URLs. This is recommended so that the icons will still appear the first time the browser is run, even if the user has not connected to the Internet yet.</li>
 <li>Notice that multiple customisations can be applied for different networks and different countries in a single build, with a different 6 digit code representing each variant. The 6 digit code is constructed from the MCC code plus the MNC code, each padded with zeros to ensure it is 3 digits long.</li>
 <li>When populating the default data the browser will first look for an exact match with the MCC and MNC codes, then if there is no match it will look for MCC+000, and finally if there&apos;s still no match it will fall back to 000+000.</li>
 <li>When upgrading between versions of Gaia, new customisations will only be applied if that type of customisation is a new feature in the new version of Gaia being upgraded to. Previous customisations will not be overwritten.</li>
</ul>

<div class="note">
<p><strong>Note</strong>: The browser application will show bookmarks in reverse order, the first bookmark in the json will be shown the last one and so on.</p>
</div>

<h3 id="Single_variant_customization_to_override_list_of_providers_and_Rocketbar_search_provider">Single variant customization to override list of providers and Rocketbar search provider</h3>

<ol>
 <li>The default Rocketbar search provider and list of providers can also be customized per MCC/MNC — data added the first time the relevant SIM card is inserted into the phone — by specifying them in JSON files in your distribution directory:
  <ul>
   <li>The list of providers per MCC/MNC is specified in <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/mobizilla/mobizilla_search.json">mobizilla_search.json</a> in our customization sample:</li>
   <li>The default Rocketbar search provider is specified in <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/mobizilla/mobizilla_default_search.json">mobizilla_default_search.json</a> in our customization sample.</li>
  </ul>
 </li>
 <li><a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/variant.json">variant.json</a> then defines which <code>.json</code> file is used to specify the settings for each MCC/MNC pair; see <a href="https://github.com/mozilla-b2g/gaia/blob/master/customization/variant.json#L47-L48">lines 47–48</a> in our sample:
  <pre class="brush: json">&quot;search&quot;: &quot;mobizilla/mobizilla_search.json&quot;,
&quot;default_search&quot;: &quot;mobizilla/mobizilla_default_search.json&quot;,</pre>
 </li>
 <li><code>variant.json</code> is placed in the root of your distribution directory.</li>
 <li>In order to apply the single variant configuration you have to set the <code>GAIA_DISTRIBUTION_DIR</code> variable to the path of your distribution directory when building Gaia.</li>
</ol>

<h3 id="Data_and_messaging_settings">Data and messaging settings</h3>

<p>Device data and messaging settings are runtime-customizable.</p>

<p>To apply specific settings, change <code>gaia/shared/resources/apn/apns_conf_local.xml</code>, simply adding or editing carrier blocks as required:</p>

<pre class="brush: xml"> &lt;apn carrier=&quot;Test Network&quot;
      mcc=&quot;001&quot;
      mnc=&quot;01&quot;
      apn=&quot;internet&quot;
      user=&quot;user&quot;
      password=&quot;password&quot;
      proxy=&quot;127.0.0.1&quot;
      port=&quot;8080&quot;
      mmsc=&quot;http://127.0.0.1&quot;
      mmsproxy=&quot;127.0.0.1&quot;
      mmsport=&quot;8080&quot;
      authtype=&quot;0&quot;
      type=&quot;default,supl,mms&quot;
  /&gt;</pre>

<h3 id="Voicemail_and_cell_broadcast_settings">Voicemail and cell broadcast settings</h3>

<p>To apply specific voicemail and cell broadcast settings, change <code>gaia/shared/resources/apn/operator_variant.xml</code>. Add or edit a carrier block, changing attributes as needed:</p>

<pre class="brush: xml">   &lt;operator carrier=&quot;Test Network with Operator Variant Settings&quot;
       mcc=&quot;001&quot;
       mnc=&quot;01&quot;
       cellBroadcastSearchList=&quot;0,1,2,3&quot;
       voicemail=&quot;999999&quot;
   /&gt;</pre>

<h3 id="WAP_user_agent_profile">WAP user agent profile</h3>

<p>The WAP user agent profile is another app that supports runtime customization. It overrides the user agent information when sending WAP packets, based on MCC/MNC. The profile overriding has <code>url</code> and <code>tagname</code> parts, but we only support <code>url</code> in our current implementation.</p>

<p>The WAP user agent profile uses the same coding style for its key as the browser app, although &quot;000000&quot; is used as the default profile. An example follows:</p>

<pre class="brush: js">   {
     &quot;000000&quot;: {
       &quot;url&quot;: &quot;http://example.url/default.xml&quot;
     },
     &quot;123001&quot;: {
       &quot;url&quot;: &quot;http://example.url/custom123001.xml&quot;
     }
   }</pre>

<p>In this example, the <code>url</code> of the default profile is <code>http://example.url/default.xml</code>; for MCC = 123 and MNC = 001, the <code>url</code> <code>is http://example.url/custom123001.xml</code>. If there was another ic card with MCC = 123 and MNC = 100, its <code>url</code> would be <code>http://example.url/default.xml</code>.</p>

<p>If the 000000 is removed from this example, like so:</p>

<pre class="brush: js">  {
     &quot;123001&quot;: {
       &quot;url&quot;: &quot;http://example.url/custom123001.xml&quot;
     }
   }</pre>

<p>the UA profile <code>url</code> of the ic card with MCC = 123 and MNC = 001 is now overridden as <code>http://example.url/custom123001.xml</code>. No others will be overridden.</p>

<p>If we have the &quot;000000&quot; as before, but we also have a &quot;123001&quot; case with no <code>url</code> inside it, like so:</p>

<pre class="brush: js">   {
     &quot;000000&quot;: {
       &quot;url&quot;: &quot;http://example.url/default.xml&quot;
     },
     &quot;123001&quot;: {}
   }</pre>

<p>All UA profile urls will now be overridden as <code>http://example.url/default.xml</code></p>

<h3 id="Applications">Applications</h3>

<p>Applications installed in Firefox OS can be customized at runtime, in a number of ways (see also <a href="/en-US/Firefox_OS/Platform/Gaia/Hacking#Customizing_the_build-time_apps">Customizing the build-time apps</a>). Perhaps the most powerful way is to edit the <code>variant.json</code> configuration file, which allows apps to be selectively installed and placed in the desired position in the homescreen, depending on the MCC/MNC. The customized applications will be added to the standard applications list.</p>

<p>The relevant part of the <code>variant.json</code> file typically looks like so.</p>

<pre class="brush: js">   {
     &quot;apps&quot;: {
       &quot;puzzle&quot;:
         {
           &quot;manifestURL&quot;: &quot;https://owd.tid.es/store/packages/fe8e4a866c518a42db9d2041568684c1.webapp&quot;
         },
       &quot;store&quot;:
         {
           &quot;manifestURL&quot;: &quot;https://owd.tid.es/store/manifest.webapp&quot;,
           &quot;installOrigin&quot;: &quot;https://www.openwebdevice.com&quot;
         }
     },
     &quot;operators&quot;: [
       {
         &quot;id&quot;: &quot;movistar-co&quot;,
         &quot;mcc-mnc&quot;: [
           &quot;214-01&quot;,
           &quot;214-02&quot;
         ],
         &quot;apps&quot;: [
           {
             &quot;id&quot;: &quot;store&quot;,
             &quot;screen&quot;: 0,
             &quot;location&quot;: 2
           }
         ]
       },
       {
         &quot;id&quot;: &quot;movistar-mx&quot;,
         &quot;mcc-mnc&quot;: [
           &quot;215-23&quot;
         ],
         &quot;apps&quot;: [
           {
             &quot;id&quot;: &quot;store&quot;,
             &quot;screen&quot;: 0,
             &quot;location&quot;: 2
           },
           {
             &quot;id&quot;: &quot;puzzle&quot;
           }
         ]
       }
     ]
   }</pre>

<ul>
 <li>The first object of the JSON is called <code>apps</code>, and defines the custom applications to be copied at buildtime. The example uses two applications, one hosted (store) and one packaged (puzzle). Notice that while packaged apps only require the <code>manifestURL</code>, hosted ones also need the <code>installOrigin</code> in order to download them.</li>
 <li>The second object, called <code>operators</code>, is responsible of the configuration based on MCC/MNC. The object contains an array of objects for each MCC/MNC pair. These objects define the <code>id</code> of the operator, a MCC/MNC list for the configuration and a list of <code>apps</code> objects defining which applications are going to be installed at runtime in each case.</li>
 <li>Each <code>apps</code> object requires an <code>id</code> property and has two optional arguments to set the position in the homescreen:
  <ul>
   <li>The <code>screen</code> property sets the screen number.</li>
   <li>The <code>location</code> property sets the position on that screen.</li>
  </ul>
 </li>
</ul>

<h3 id="Other_single_variant_customizations">Other single variant customizations</h3>

<p>The same file <code>variant.json</code> file — used to configure applications at runtime depending on the MCC/MNC — also allows you to configure specific resources by adding some attributes under each operator object. Thus, an operator can have the following settings:</p>

<pre class="brush: js">   {
     &quot;apps&quot;: {
       ...
     },
     &quot;operators&quot;: [
       {
         &quot;id&quot;: &quot;movistar-co&quot;,
           &quot;mcc-mnc&quot;: [
             &quot;214-01&quot;,
             &quot;214-02&quot;
           ],
         &quot;apps&quot;: [
           {
             &quot;id&quot;: &quot;store&quot;,
             &quot;screen&quot;: 0,
             &quot;location&quot;: 2
           }
         ],
         &quot;support_contacts&quot;: &quot;resources/support_contacts_movistar.json&quot;,
         &quot;default_contacts&quot;: &quot;resources/contacts_movistar.json&quot;,
         &quot;ringtone&quot;: {
           &quot;path&quot;: &quot;resources/Movistar_Mid_ABR_128kbps.ogg&quot;,
           &quot;name&quot;: &quot;Tono Movistar&quot;
         },
         &quot;wallpaper&quot;: &quot;resources/customize.jpg&quot;,
         &quot;keyboard&quot;: &quot;resources/keyboard_movistar.json&quot;,
         &quot;network_type&quot;: &quot;resources/network_type_movistar.json&quot;,
         &quot;known_networks&quot;: &quot;resources/known_networks_movistar.json&quot;,
         &quot;data_ftu&quot;: true,
         &quot;sms&quot;: &quot;resources/sms_movistar.json&quot;,
         &quot;topsites&quot;: &quot;resources/topsites_movistar.json&quot;,
         &quot;bookmarks&quot;: &quot;resources/bookmarks_movistar.json&quot;,
         &quot;data_roaming&quot;: true,
         &quot;power&quot;: {
           &quot;poweron&quot;: {
             &quot;video&quot;: &quot;app://operatorresources/resources/power/latam_power_on.mp4&quot;
           },
           &quot;poweroff&quot;: {
             &quot;video&quot;: &quot;resources/latam_power_off.mp4&quot;
           }
         },
         &quot;nfc&quot;: true
       }
       ...
     ]
   }
</pre>

<p><span style="line-height: 1.5;">And here are the details of the specific resources for each operator.</span></p>

<h4 id="Support_contacts">Support contacts</h4>

<p><code>support_contacts</code> specifies a path to a file containing contacts to be shown on the help screen (<code>Settings &gt; Help</code>), offering the same functionality as <a href="#support.json">support.json</a>. The file format is:</p>

<pre class="brush: js">   {
     &quot;onlinesupport&quot;: {
       &quot;title&quot;: &quot;Mozilla Support&quot;,
       &quot;href&quot;: &quot;http://test.mozilla.org/support&quot;
     },
     &quot;callsupport1&quot;: {
       &quot;title&quot;: &quot;Call Support (Primary)&quot;,
       &quot;href&quot;: &quot;tel:14155550001&quot;
     },
     &quot;callsupport2&quot;: {
       &quot;title&quot;: &quot;Call Support (Secondary)&quot;,
       &quot;href&quot;: &quot;tel:14155550002&quot;
     }
   }</pre>

<h4 id="Default_contacts">Default contacts</h4>

<p><code>default_contacts</code> contains the path to a file containing contacts that will be preloaded to the Contacts application, depending on the MCC/MNC pair present at run time. The section names are the MCC/MNC pair, and section contents should be an array of contacts following the same format as <a href="#contacts.json">contacts.json</a>. For example:</p>

<pre class="brush: js">    {
        &quot;123123&quot;:
        [
            {name: [&quot;John Doe&quot;]},
            // etc
        ],
    }
</pre>

<h4 id="Ringtone">Ringtone</h4>

<p><code>ringtone</code> sets the default ringtone and contains two attributes, both mandatory:</p>

<ul>
 <li><code>path</code>: The path to the ringtone audio file.</li>
 <li><code>name</code>: The name to display when the ringtone is shown in settings.</li>
</ul>

<h4 id="Wallpaper">Wallpaper</h4>

<p><code>wallpaper</code> contains the path to the image file (PNG) that will be set as the default wallpaper.</p>

<h4 id="Keyboard_settings">Keyboard settings</h4>

<p><code>keyboard</code> contains the path to a file containing keyboard settings configuration information. The file format is as follows:</p>

<pre class="brush: js"> {
   &quot;keyboard.vibration&quot;: true,
   &quot;keyboard.autocorrect&quot;: false,
   &quot;keyboard.clicksound&quot;: true,
   &quot;keyboard.wordsuggestion&quot;: false
 }</pre>

<h4 id="Network_Display_Indicator">Network Display Indicator</h4>

<p><code>network_type</code> contains the path to a file that will hold an associated text that will be shown to the user when that network is being used by the device — for each of the network types supported by the device. The text will be shown on the Settings app, status bar, and quick settings.</p>

<p>The status bar and all the occurrences on the Settings app will use the text value indicated in the file. For quick settings the file must contain a <code>data_sprite</code> key that will point to a css sprite holding the icons for all the supported network types.</p>

<p>The <code>data_sprite</code> key must always be a URL pointing to a preinstalled app on the device. A file format example follows:</p>

<pre class="brush: js"> {
  &quot;lte&quot;: &quot;4G&quot;,
  &quot;ehrpd&quot;: &quot;4G&quot;,
  &quot;hspa+&quot;: &quot;H+&quot;,
  &quot;hsdpa&quot;: &quot;H&quot;,
  &quot;hsupa&quot;: &quot;H&quot;,
  &quot;hspa&quot;: &quot;H&quot;,
  &quot;evdo0&quot;: &quot;E&quot;,
  &quot;evdoa&quot;: &quot;E&quot;,
  &quot;evdob&quot;: &quot;E&quot;,
  &quot;1xrtt&quot;: &quot;1x&quot;,
  &quot;umts&quot;: &quot;3G&quot;,
  &quot;edge&quot;: &quot;E&quot;,
  &quot;is95a&quot;: &quot;2G&quot;,
  &quot;is95b&quot;: &quot;2G&quot;,
  &quot;gprs&quot;: &quot;2G&quot;,
  &quot;wcdma/gsm&quot;: &quot;2G/3G GSM auto&quot;,
  &quot;gsm&quot;: &quot;2G GSM&quot;,
  &quot;wcdma&quot;: &quot;3G GSM&quot;,
  &quot;wcdma/gsm-auto&quot;: &quot;2G GSM Preferred&quot;,
  &quot;cdma/evdo&quot;: &quot;2G/3G CDMA auto&quot;,
  &quot;cdma&quot;: &quot;2G CDMA&quot;,
  &quot;evdo&quot;: &quot;3G CDMA&quot;,
  &quot;wcdma/gsm/cdma/evdo&quot;: &quot;2G-3G GSM/CDMA auto&quot;,
  &quot;data_sprite&quot;: &quot;app://operatorresources/resources/quick_settings/images/data-sprite-latam.png&quot;
 }</pre>

<h4 id="Pre-populate_WiFi_SSIDs">Pre-populate WiFi SSIDs</h4>

<p><code>known_networks</code> contains the path to a file containing descriptions of known wifi networks. Here is a file format example:</p>

<pre class="brush: js"> {
  &quot;OPEN&quot;: {
    &quot;ssid&quot;: &quot;OPEN&quot;
  },
  &quot;WEP-WITHOUTKEY&quot;: {
    &quot;ssid&quot;: &quot;wifi-WEP-WITHOUTKEY&quot;,
    &quot;keyType&quot;: &quot;WEP&quot;
  },
  &quot;WEP_KEY&quot;: {
    &quot;ssid&quot;: &quot;WEP-KEYOK&quot;,
    &quot;keyType&quot;: &quot;WEP&quot;,
    &quot;capabilities&quot;: &quot;&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;
  },
  &quot;WEP_KEYOK_WPS&quot;: {
    &quot;ssid&quot;: &quot;WEP-KEYOK-WPS&quot;,
    &quot;keyType&quot;: &quot;WEP&quot;,
    &quot;capabilities&quot;:&quot;WPS&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;
  },
  &quot;wpa&quot;: {
    &quot;ssid&quot;: &quot;macaFirefoxHotspot&quot;,
    &quot;keyType&quot;: &quot;WPA-PSK&quot;
  },
  &quot;WPA-PSK_KEY&quot;: {
    &quot;ssid&quot;: &quot;WPA-PSK-KEYOK&quot;,
    &quot;keyType&quot;: &quot;WPA-PSK&quot;,
    &quot;capabilities&quot;:&quot;&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;
  },
  &quot;WPA-PSK_KEY_WPS&quot;: {
    &quot;ssid&quot;: &quot;WPA-PSK-KEYOK-WPS&quot;,
    &quot;keyType&quot;: &quot;WPA-PSK&quot;,
    &quot;capabilities&quot;:&quot;WPS&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;
  },
  &quot;WPA-EAP-PSK_WITHOUTEAP&quot;: {
    &quot;ssid&quot;: &quot;WPA-EAP-WITHOUTKEY&quot;,
    &quot;keyType&quot;: &quot;WPA-EAP&quot;
  },
  &quot;WPA-EAP_SIM&quot;: {
    &quot;ssid&quot;: &quot;WPA-EAP-SIM&quot;,
    &quot;keyType&quot;: &quot;WPA-EAP&quot;,
    &quot;eap&quot;: &quot;SIM&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;
  },
  &quot;WPA-EAP-KEYOK-WPS&quot;: {
    &quot;ssid&quot;: &quot;WPA-EAP-KEYOK-WPS&quot;,
    &quot;keyType&quot;: &quot;WPA-EAP&quot;,
    &quot;eap&quot;: &quot;PEAP&quot;,
    &quot;capabilities&quot;: &quot;WPS&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;,
    &quot;identity&quot;: &quot;HI\\usr&quot;
  },
  &quot;WPA-EAP-KEYOK-CAPOK-PHASE2-OK&quot;: {
    &quot;ssid&quot;: &quot;WPA-EAP-KEYOK-CAPOK-PHASE2&quot;,
    &quot;keyType&quot;: &quot;WPA-EAP&quot;,
    &quot;eap&quot;: &quot;PEAP&quot;,
    &quot;capabilities&quot;:&quot;WPS&quot;,
    &quot;phase2&quot;: &quot;PAP&quot;,
    &quot;password&quot;: &quot;constrasenya1&quot;,
    &quot;identity&quot;: &quot;HI\\usr&quot;
  }
 }</pre>

<h4 id="Data_enableddisabled_by_default_during_FTU">Data enabled/disabled by default during FTU</h4>

<p>The <code>data_ftu</code> attribute defines if the data setting is enabled or disabled by default during FTU. This is a boolean value (true or false).</p>

<h4 id="Maximum_number_of_SMS_to_convert_to_MMS">Maximum number of SMS to convert to MMS</h4>

<p><code>sms</code> contains the path to a file holding some customization details for SMS. Currently the only attribute that can be set is the maximum number of SMS messages that can be converted to MMS. A file format example follows:</p>

<pre class="brush: js"> {
  &quot;smsMaxConcat&quot;: 9
 }</pre>

<h4 id="Pre-populate_browser_top_sites">Pre-populate browser top sites</h4>

<p><code>topsites</code> contains the path to a file containing an array of topsite objects. A topsite object has three parameters: the <code>title</code> (string), the <code>uri</code> (url) and the <code>iconPath</code>. Here is a file format example:</p>

<pre class="brush: js">{
  &quot;topsites&quot;: [
    {
      &quot;title&quot;: &quot;Movistar&quot;,
      &quot;uri&quot;: &quot;http://www.movistar.es&quot;,
      &quot;iconPath&quot;: &quot;resources/movistar.ico&quot;
    }
  ]
}</pre>

<h4 id="Bookmarks">Bookmarks</h4>

<div class="note">
<p><strong>Note</strong>: For information about customizing bookmarks on earlier versions of Firefox OS see the <a href="#Browser_bookmarks_and_default_search_engines">Browser bookmarks and default search engines</a> section.</p>
</div>

<p><code>bookmarks</code> contains the path to a file containing an array of bookmark objects. The bookmark object has three parameters: the <code>title</code> (string), the <code>uri</code> (url) and the <code>iconPath</code>. File format example:</p>

<pre class="brush: js">{
  &quot;bookmarks&quot;: [
    {
      &quot;title&quot;: &quot;Google&quot;,
      &quot;uri&quot;: &quot;http://www.google.es&quot;,
      &quot;iconPath&quot;: &quot;resources/google.ico&quot;
    }
  ]
}</pre>

<h4 id="Data_roaming_onoff_by_default">Data roaming on/off by default</h4>

<p>The <code>data_roaming</code> attribute defines if data roaming is enabled by default; its value is a boolean (<code>true</code> or <code>false</code>).</p>

<h4 id="Power_onoff_operator_animation">Power on/off operator animation</h4>

<p>Custom power on/off animations are configured using an object as a value for the <code>power</code> attribute. The object contains two attributes, one for the boot animation when the device is switched on (<code>poweron</code>) and the other one for the animation when the device shuts down. Both attributes are configured with a key value identifying the resource to be loaded — the resource key should be <code>video</code> and the value is a path to the resource. Note that the path can be a local path to the resource in the build machine filesystem (for example <code>resource/afile.png</code>) or a URI to file inside a Gaia application that will be installed in the device (for example <code>app://name.domain/path/to/video.mp4</code>).</p>

<p>Here is an example of the full structure of a power object:</p>

<pre class="brush: js">&quot;power&quot;: {
  &quot;poweron&quot;: {
    &quot;video&quot;: &quot;app://operatorresources/resources/power/latam_power_on.mp4&quot;
  },
  &quot;poweroff&quot;: {
    &quot;video&quot;: &quot;resources/Power_off_test.mp4&quot;
  }
}</pre>

<h4 id="NFC_enableddisabled_by_default">NFC enabled/disabled by default</h4>

<p>The <code>nfc</code> attribute defines if Near Field Communication is enabled by default; its value is a boolean (<code>true</code> or <code>false</code>).</p>

<h2 id="Building_Prebundled_web_apps">Building Prebundled web apps</h2>

<p>Earlier on, we discussed the <a href="#apps.list">apps.list</a> file, and how this can be used to add built-in apps to your build. These apps need to be built in a certain way, then added to the <code>gaia/external-apps</code> directory.<br>
 <br>
 To build Prebundled web apps, you can utilize our <a href="https://github.com/mozilla-b2g/preload-app-toolkit">preload-app-toolkit</a> script, which builds a prebundled webapp from a given <code>.webapp</code> URL. It can accept hosted web app manifests, or packaged app mini-manifests.</p>

<h3 id="To_bundle_a_single_web_app">To bundle a single web app</h3>

<p>Find a <code>.webapp</code> URL that want to bundle, and run the command to bundle it, as follows:</p>

<pre>python preload.py http://&lt;webapp url&gt;</pre>

<p>This will generate a directory with the same name as the target webapp&apos;s name, e.g. <code>accuweather</code>.</p>

<h3 id="Batch_process_to_bundle_multiple_web_apps">Batch process to bundle multiple web apps</h3>

<p>You can create a file called <code>list</code>, containing all the app names and <code>.webapp</code> locations you want to bundle all together in a batch. The format is:</p>

<pre>myFirstApp,https://www.firstapp.com/manifest.webapp
mySecondApp,https://www.secondapp.com/manifest.webapp
etc.</pre>

<p>You need to save this <code>list</code> file in the same directory as our <code>preload.py</code> script, then run the following command:</p>

<pre>$ python preload.py</pre>

<p>The <code>preload.py</code> script will parse the list file and do the batch conversion for you.</p>

<h3 id="Prebundled_web_app_metadata.json">Prebundled web app metadata.json</h3>

<p>Every Prebundled webapp should have a <code>metadata.json</code> file contained within its root directory. The <a href="https://marketplace.firefox.com/">Firefox Marketplace</a> counts on this <code>metadata.json</code> file for auto-updating. This file is auto-generated by the <code>preload.py</code> script.<br>
 <br>
 For a hosted webapp, the properties of <code>metadata.json</code> are:</p>

<ul>
 <li><code>origin</code>: The domain name of the webapp url.</li>
 <li><code>manifestURL</code>: The location of the web app manifest for a hosted app.</li>
 <li><code>installOrigin(hosted)</code>: The location the app was installed from in the customization. For customizations, this should always be <code>https://marketplace.firefox.com</code>.</li>
 <li><code>etag</code>: This is the webapp manifest <code>etag</code> used for checking for updates. The <code>etag</code> value is retrieved by the <code>parse</code> <code>html</code> header when downloading the <code>.webapp</code> file from the server.</li>
 <li><code>external</code>: This is a required field in Firefox OS 2.1+. The value is <code>true</code> for prebundled apps, and <code>false</code> for non-external apps. This is used for checking if fine tuning the file order in the application.zip is necessary (fine tuning will occur if the value is set to <code>true</code>).</li>
</ul>

<p>For a packaged webapp, the properties of <code>metadata.json</code> are:</p>

<ul>
 <li><code>manifestURL</code>: This should be the location of the mini-manifest. For customizations right now, the <code>manifestURL</code> will always be a mini-manifest from <code>marketplace.firefox.com</code>.</li>
 <li><code>installOrigin(hosted)</code>: The location the app was installed from in the customization. For customizations, this should always be <code>https://marketplace.firefox.com</code>.</li>
 <li><code>etag</code>: This is the webapp manifest <code>etag</code> used for checking for updates. The <code>etag</code> value is retrieved by the <code>parse html</code> header when downloading the <code>.webapp</code> file from the server.</li>
 <li><code>external</code>: This is a required field in Firefox OS 2.1+. The value is <code>true</code> for prebundled apps, and false for For non-external apps it should be false. Use for checking if fine tunining file order in the application.zip is needed ( fine tune if the value is true ).</li>
 <li><code>packageEtag</code>: This is the app package&apos;s <code>etag,</code> retrieved by the <code>parse html</code> header when downloading the package from the server once an update has been detected.</li>
</ul>

<h3 id="Packaged_web_app_auto-updates_update.webapp_format">Packaged web app auto-updates: update.webapp format</h3>

<p>Packaged webapps have an <code>update.webapp</code> file, which is used for auto-updates. The format is similar to <a href="https://developer.mozilla.org/en-US/Apps/Build/Manifest"><code>manifest.webapp</code></a>, but you have to include additional attributes:</p>

<ul>
 <li><code>package_path</code> is the path to the packaged (zip) file.</li>
 <li><code>size</code> is the package size, in bytes.</li>
</ul>

<pre class="brush: js">  {
    &quot;name&quot;: &quot;Game Pack&quot;,
    &quot;icons&quot;: {
      &quot;60&quot;: &quot;/icon-60.png&quot;,
      &quot;128&quot;: &quot;/icon-128.png&quot;
    },
    &quot;version&quot;: &quot;1.1.2&quot;,
    &quot;package_path&quot;: &quot;/application.zip&quot;,
    &quot;developer&quot;: {
      &quot;url&quot;: &quot;http://abc.com&quot;,
      &quot;name&quot;: &quot;abc Inc.&quot;
    },
    &quot;release_notes&quot;: &quot;2nd release&quot;,
    &quot;locales&quot;: {
      &quot;es&quot;: {
        &quot;launch_path&quot;: &quot;/index-es.html&quot;,
        &quot;description&quot;: &quot;show me customization.&quot;
      }
    },
    &quot;size&quot;: 5460141
  }</pre>

<h3 id="Pre-bundled_web_app_AppCache_format">Pre-bundled web app AppCache format</h3>

<p>If your web app&apos;s <a href="https://developer.mozilla.org/en-US/Apps/Build/Manifest"><code>manifest.webapp</code></a> has an <a href="https://developer.mozilla.org/en-US/Apps/Build/Manifest#appcache_path"><code>appcache_path</code></a> included in it, the <code>preload.py</code> script will fetch the AppCache file pointed to, and pre-fetch all the resources described in the AppCache file. The Pre-bundled webapp AppCache is a bit different, as Gecko recognizes a different format, but this is auto-generated by the <code>preload.py</code> script.</p>

<p>The translated file structure is:</p>

<pre>    &lt;app name&gt;
       ├── manifest.webapp
       ├── metadata.json
       └── cache
             ├── manifest.appcache
             └── &lt;resources&gt;
</pre>

<div class="note">
<p><strong>Note</strong>: If a different name is given to the AppCache file in the <code>appcache_path</code>, it needs to be renamed to <code>manifest.appcache</code> and saved in the <code>cache</code> folder.</p>
</div>

<h2 id="FAQ">FAQ</h2>

<p>The following is a list of common questions and answers about market customizations.</p>

<h3 id="What_can_be_customized">What can be customized?</h3>

<ul>
 <li>Brand
  <ul>
   <li>Start up &amp; Power off animations</li>
   <li>Network name on Lock screen and in Utility Tray</li>
   <li>First Run Experience logos</li>
  </ul>
 </li>
 <li>Localization
  <ul>
   <li>Installed locales (shared/locales)</li>
   <li>Default locale (<code>GAIA_DEFAULT_LOCALE</code>)</li>
   <li>Default keyboard layouts (Multiple keyboards can be enabled, not tied to locale)</li>
  </ul>
 </li>
 <li>Apps
  <ul>
   <li>Preinstalled third party apps</li>
   <li>Home grid app placement</li>
   <li>Licensing</li>
   <li>In-app payment provider configuration</li>
  </ul>
 </li>
 <li>Settings
  <ul>
   <li>Default screen brightness</li>
   <li>Device Information — Model (name or #)</li>
   <li>Device Information — Legal Information link or content</li>
   <li>Help — Online support link</li>
   <li>Help — Call support phone number</li>
   <li>Help — User guide link</li>
   <li>APN</li>
   <li>MMS message size limitation</li>
   <li>MMS message retrieval mode</li>
  </ul>
 </li>
 <li>Media preloads
  <ul>
   <li>Wallpapers</li>
   <li>Music</li>
   <li>Videos</li>
   <li>Gallery</li>
  </ul>
 </li>
 <li>Sounds
  <ul>
   <li>Start up &amp; Power off</li>
   <li>Ring tone</li>
   <li>Message tone</li>
  </ul>
 </li>
 <li>Everything.me
  <ul>
   <li>Option to enable or disable the feature</li>
   <li>Set of default categories and apps</li>
  </ul>
 </li>
 <li>Browser
  <ul>
   <li>Default bookmarks</li>
   <li>Default search engine</li>
  </ul>
 </li>
</ul>

<h3 id="How_and_where_do_you_define_a_customized_app_grid_layout">How and where do you define a customized app grid layout?</h3>

<p>This is currently defined in <code>gaia/apps/homescreen/js/init.json</code>. <code>customize.py</code> takes care of building this in the correct format.</p>

<h3 id="Is_it_possible_to_define_whether_an_app_is_removable_in_the_homescreen_configuration">Is it possible to define whether an app is removable in the homescreen configuration?</h3>

<p>No. All apps in <code>/system/b2g</code> are non-removable; those in <code>/data</code> are removable. Since all preloaded apps come from <code>/system</code>, we need to move them to <code>/data</code> if we want them to be removable.</p>

<h3 id="How_do_you_add_a_preloaded_packaged_or_hosted_app_to_the_build">How do you add a preloaded packaged or hosted app to the build?</h3>

<p>These should both be added to <code>gaia/external-apps</code>. <code>customize.py</code> will allow entry of the URL to a packaged app or a hosted app manifest, and will download it into the correct place and create <code>metadata.json</code>. This will serve as the &quot;build step&quot;.</p>

<p>We have different metadata for packaged and hosted apps to distinguish them.</p>

<p>See <a href="#Building_Prebundled_web_apps">Building Prebundled web apps</a> for more details.</p>

<h3 id="How_do_you_prepare_a_preloaded_hosted_app_for_initial_offline_support">How do you prepare a preloaded hosted app for initial offline support?</h3>

<p>You need to provide all the files to cache in the directory <code>external-apps/MY_APP/cache</code>, along with the AppCache manifest.</p>

<p>See <a href="#Building_Prebundled_web_apps">Building Prebundled web apps</a> for more details.</p>

<h3 id="What_Marketplace_Customizations_Are_Possible">What Marketplace Customizations Are Possible?</h3>

<ul>
 <li>On-device
  <ul>
   <li>The customization on the device regarding payments is limited to populating a whitelist of payment providers. There are a couple prefs for this, documented on <a href="https://wiki.mozilla.org/WebAPI/WebPayment#Testing">Web Payments</a>.</li>
   <li>For example, Mozilla B2G phones will ship with <a href="https://github.com/mozilla/webpay#readme">our implementation of the payment provider</a> in a whitelist so that it is accessible to the Marketplace and third party apps for in-app purchases via <a href="/en-US/docs/Web/API/Navigator/mozPay"><code>navigator.mozPay</code></a>. Some more info on providers is available at <a href="https://wiki.mozilla.org/WebAPI/WebPaymentProvider">Web Payment Providers</a>.</li>
   <li>If any carrier wants to implement their own payment processor and whitelist it, they are free to do so. However, the <a href="https://marketplace.firefox.com/">Firefox Marketplace</a> is only configured to enable purchases through Mozilla&apos;s payment provider at this time.</li>
  </ul>
 </li>
 <li>On-server
  <ul>
   <li>The merchant app sets a price point for the product and Mozilla&apos;s backend payment processor chooses the currency based on the user&apos;s network. None of currency, regional taxation, or l10n can be controlled by device configs (yet).</li>
   <li>Category in the Firefox Marketplace specific to the carrier with your operator logo/name in the region.</li>
   <li>Featured apps / promotions in the Firefox Marketplace, specified by the Carrier.</li>
  </ul>
 </li>
</ul>

<p>There are many other considerations when adding a region or carrier.  See <a href="https://wiki.mozilla.org/Marketplace/AddingRegionsAndCarriers">Adding Regions and Carriers</a> for more details.</p>

<h3 id="How_do_I_package_and_store_per-market_customization_changes">How do I package and store per-market customization changes?</h3>

<p>Store only the files changed; currently these are in various locations in the filesystem. In B2G v2, we are considering consolidating these into a single location, similar to the branding directories we have for Gecko.</p>

<h3 id="How_do_you_build_the_product_with_a_specific_market&apos;s_configuration">How do you build the product with a specific market&apos;s configuration?</h3>

<p>Copy your changed files into a checkout of Gaia, and build using that modified Gaia. <code>customize.py</code> will provide a UI for setting relevant switches, create the appropriate files in the appropriate places in the gaia checkout, and then build the profile from that Gaia.</p>

<h3 id="How_to_customize_power_on_off_animation">How to customize power on / off animation?</h3>

<ul>
 <li>This animation uses <a href="http://www.droidforums.net/forum/droid-hacks/33932-bootanimation-zip-file-explained.html">Android&apos;s <code>bootanimation.zip</code>/<code>desc.txt</code> format</a>.</li>
 <li>This lets us create multi-part animation sequences where we can specify things like size, framerate, and number of times an animation sequence loops for each part.</li>
 <li>There is also an animated PNG transition animation that bridges the gap between this <code>bootanimation.zip</code> sequence and the transition to the lockscreen, which is performed by Gaia.</li>
 <li>The size on disk of the default animation is 8.2MB (looping) + 3.6MB (frame 18 transition) = 11.8MB total.</li>
 <li>Currently, the shutdown animation is a custom css animation based on a design specified in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=809342">bug 809342</a>.</li>
</ul>
