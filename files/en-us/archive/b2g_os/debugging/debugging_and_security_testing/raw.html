<p></p><section class="Quick_links" id="Quick_Links">

<ol>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting B2G OS</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>

   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/Mozilla/Firefox_OS/Debugging/Intercepting_traffic_using_a_proxy">Next  »</a></p>
</div><p></p>

<div class="summary">
<p>This guide is aimed at security testers wanting to start testing Firefox OS; it will help community members audit apps and the Firefox OS platform itself.</p>
</div>

<div class="note">
<p><strong>Note</strong>: If you are not already familiar with Firefox OS security, head over to our <a href="/en-US/Firefox_OS/Security">Security section</a> to find out all about it. Start by reading the <a href="/en-US/docs/Mozilla/Firefox_OS/Security/Security_model" title="/en-US/docs/Mozilla/Firefox_OS/Security/Security_model">Firefox OS security overview</a> — this article provides a basic background in the terminology and architecture.</p>
</div>

<p>This guide includes the following subsections:</p>

<dl>
 <dt><a href="#Getting_started">Getting started</a></dt>
 <dd>Covers how to get started with a desktop build of Firefox OS, and how to use Marionette to inspect and control apps running on Firefox OS.</dd>
 <dt><a href="/en-US/docs/Mozilla/Firefox_OS/Debugging/Intercepting_traffic_using_a_proxy" title="/en-US/docs/Mozilla/Firefox_OS/Security/Intercepting_traffic_using_a_proxy">Intercepting Firefox OS traffic using a proxy</a></dt>
 <dd>How to use a proxy to intercept network traffic to inspect it.</dd>
 <dt><a href="/en-US/docs/Mozilla/Firefox_OS/Debugging/Testing_in_a_privileged_context" title="/en-US/docs/Mozilla/Firefox_OS/Apps/Testing_in_a_privileged_context">Modifying Gaia</a></dt>
 <dd>How to run the Firefox OS simulator with a custom profile, as well as how to create and install your privileged apps.</dd>
</dl>

<p>All of our testing will happen against the <a href="/en-US/Firefox_OS/Building_the_Firefox_OS_simulator" title="/en-US/docs/Mozilla/Firefox_OS/Using_the_B2G_desktop_client">Firefox OS simulator</a>; a native Firefox OS built for your desktop computer. Start downloading your <a href="ftp://ftp.mozilla.org/pub/b2g/nightly/latest-mozilla-central/">flavor of nightly build (Linux, Mac OS, Windows)</a> before you read any further.</p>

<h2 id="Getting_started">Getting started</h2>

<p>Assuming you've already downloaded the Firefox OS simulator as instructed above, you're ready to proceed, as follows.</p>

<h3 id="Linux">Linux</h3>

<p>Setting up the Firefox OS simulator is as simple as extracting the archive and running the <code>b2g</code> binary:</p>

<pre>tar xf b2g-something-something.tar.bz2
cd b2g
./b2g</pre>

<h3 id="Mac">Mac</h3>

<p>Open the downloaded disk image file, and copy the B2G application to your <code>/Applications</code> directory. Once that's done, launch the Firefox OS simulator by clicking the B2G application icon. Alternatively, you can launch it from Terminal as follows:</p>

<pre>/Applications/B2G.app/Contents/MacOS/b2g</pre>

<h3 id="Windows">Windows</h3>

<p>Download and extract the zip file to a convenient location. Double-click on <code>b2g.exe</code> to start the Firefox OS simulator.</p>

<h3 id="Getting_started_tips">Getting started tips</h3>

<p>You can now play with a Firefox OS instance running in a desktop window. Go and play around: Open the browser (lower right icon) and visit a web page, or try opening a few apps. You will notice that some device-specific functionality — such as the dialer, camera, and radio — won't work for obvious reasons.</p>

<p>Make yourself comfortable with the Firefox OS simulator; be sure to read <a href="/en-US/Firefox_OS/Building_the_Firefox_OS_simulator" title="/en-US/docs/Mozilla/Firefox_OS/Using_the_B2G_desktop_client">Building the Firefox OS simulator</a> to learn how it works.</p>

<p>Now on to the real deal. We want to make JavaScript calls from inside Firefox OS.</p>

<h2 id="Getting_a_debugging_shell_for_Firefox_OS">Getting a debugging shell for Firefox OS</h2>

<p><a href="/en-US/docs/Marionette" title="/en-US/docs/Marionette">Marionette</a> is based on the Selenium/WebDriver API, and provides the basis for the debugging shell we use to automate Firefox OS testing. First, set up the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS/Platform/Testing/Setting_up_Marionette?redirectlocale=en-US&amp;redirectslug=Mozilla/Firefox_OS/Setting_Up_Marionette_for_B2G#Setting_up_the_Marionette_client">marionette client</a> (written in Python) and follow the installation instructions given there.</p>

<div class="note">
<p><strong>Note:</strong> Recent tests have shown that you may have problems with certain versions of mozbase. The last known-working state of mozbase is at <a href="https://github.com/mozilla/mozbase/tree/9ee2dee5fdde6cf5d6bf7caac4db6673112df79d/" title="https://github.com/mozilla/mozbase/tree/9ee2dee5fdde6cf5d6bf7caac4db6673112df79d/">commit 9ee2de</a>.</p>
</div>

<div class="note">
<p><strong>Note</strong>: Since you are using a nightly build, your b2g profile (just like in the Firefox browser, all user settings are stored within a profile) should already have Marionette enabled, via the line <code>user_pref("marionette.defaultPrefs.enabled", true);</code> in <code>gaia/profile/<code>prefs.js</code></code>. If not, you might be using the wrong build.</p>
</div>

<p>At this point, you might be thinking of spinning up a Python console, importing the marionette-client library and creating a debugging session, but we can do something else: Stefan Arentz has created a simple JavaScript console that runs on top of the marionette-client library. So, let's download <a href="https://raw.github.com/st3fan/fxos-repl/master/fxos-repl.py">fxos-repl.py</a>.</p>

<p>For our example, we will remotely control the Browser app. Start it by clicking the browser icon in the Firefox OS home screen's lower right with your mouse. Is the B2G binary showing the browser app? Good. The following commend will return a list of URLs representing the different apps we've got running, and allow us to start debugging them:</p>

<pre class="brush: bash">$ <strong>python fxos-repl.py list</strong>
app://homescreen.gaiamobile.org/index.html#root
app://browser.gaiamobile.org/index.html
app://keyboard.gaiamobile.org/index.html</pre>

<p>Now let's connect to the browser app and examine it:</p>

<pre class="brush: bash">$ <strong>python fxos-repl.py connect app://browser.gaiamobile.org/index.html</strong>
Connected to app://browser.gaiamobile.org/index.html</pre>

<p>Let's use the <a href="/en-US/docs/Web/API/Document/querySelector" title="Returns the first Element within the document that matches the specified selector, or group of selectors, or null if no matches are found."><code>document.querySelector()</code></a> API to find a <a href="/en-US/docs/Web/HTML/Element/menu" title="The HTML &lt;menu> element represents a group of commands that a user can perform or activate. This includes both list menus, which might appear across the top of a screen, as well as context menus, such as those that might appear underneath a button after it has been clicked."><code>&lt;menu&gt;</code></a> tag with the ID <code>toolbar-start</code>, and view its HTML:</p>

<pre class="brush: bash">&gt;&gt;&gt; <strong>document.querySelector("menu#toolbar-start").outerHTML</strong>
&lt;menu type="toolbar" id="toolbar-start"&gt;
        &lt;form id="url-bar" novalidate=""&gt;
          &lt;input id="ssl-indicator" value="" type="image"&gt;
          &lt;input id="url-input" placeholder="Enter search or address" data-l10n-id="enter-search-or-address" x-inputmode="verbatim" type="text"&gt;
          &lt;input style="background-image: url(&amp;quot;style/images/go.png&amp;quot;);" id="url-button" value="" type="image"&gt;
        &lt;/form&gt;
        &lt;span id="tabs-badge"&gt;1&lt;span id="more-tabs"&gt;›&lt;/span&gt;&lt;/span&gt;
        &lt;button id="awesomescreen-cancel-button"&gt;&lt;/button&gt;
        &lt;div id="throbber"&gt;&lt;/div&gt;
      &lt;/menu&gt;</pre>

<p>Does it look familiar? It's the toolbar that contains the address bar and the new tab button!</p>

<p>Let's use our shell to simulate a click on the new tab button. Its ID is <code>tabs-badge</code>.</p>

<pre class="brush: bash">&gt;&gt;&gt; <strong>document.querySelector("#tabs-badge").click()</strong></pre>

<p>The new tab UI should show now. Let's try something else:</p>

<pre class="brush: bash">&gt;&gt;&gt; <strong>alert(location.href)</strong></pre>

<p>Now go play!</p>

<p></p><div class="prevnext" style="text-align: right;">
    <p><a href="/en-US/docs/Mozilla/Firefox_OS/Debugging/Intercepting_traffic_using_a_proxy">Next  »</a></p>
</div><p></p>