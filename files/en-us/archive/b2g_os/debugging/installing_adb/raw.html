<p></p><section class="Quick_links" id="Quick_Links">

<ol>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS">Build and install overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_build_process_summary">B2G OS build process summary</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/B2G_OS_build_prerequisites">Build prerequisites</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Preparing_for_your_first_B2G_build">Preparing for your first build</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building">Building B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_installer_add-on">B2G installer add-on</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Building_for_Flame_on_OS_X">Building B2G OS for Flame on Mac OS X</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Choosing_how_to_run_Gaia_or_B2G">Choosing how to run Gaia or B2G OS</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/Compatible_Devices">Compatible Devices</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Installing_on_a_mobile_device">Installing B2G OS on a mobile device</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_OS_update_packages">Creating and applying B2G OS update packages</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building/FOTA_community_builds">Building and installing FOTA community builds</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Building_and_installing_B2G_OS/B2G_Build_Variables_Reference_Sheet">B2G build variables reference sheet</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting B2G OS</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS">Porting overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/basics">Porting basics</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Porting_B2G_OS/Porting_on_CyanogenMod">Porting on CyanogenMod</a></li>
  </ol>
 </li>
 <li data-default-state="closed"><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia</a>
  <ol>
   <li><strong><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia">Developing Gaia overview</a></strong></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Running_the_Gaia_codebase">Running the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Mulet">Run Gaia on desktop using Mulet</a></li>

   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Understanding_the_Gaia_codebase">Understanding the Gaia codebase</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Making_Gaia_code_changes">Making Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Testing_Gaia_code_changes">Testing Gaia code changes</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Submitting_a_Gaia_patch">Submitting a Gaia patch</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Build_System_Primer">Gaia build system primer</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Different_ways_to_run_Gaia">Different ways to run Gaia</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/make_options_reference">Make options reference</a></li>
   <li><a href="/en-US/docs/Mozilla/B2G_OS/Developing_Gaia/Gaia_tools_reference">Gaia tools reference</a></li>
  </ol>
 </li>
 <li><a href="/en-US/docs/Mozilla/B2G_OS/API">B2G OS APIs</a></li>
</ol>
</section><p></p>

<div class="summary">
<p>Many aspects of Firefox OS development require installation of ADB, the Android Debug Bridge, and the Fastboot tool. This article explains how to do that, and shares some common useful ADB commands.</p>
</div>

<h2 id="Installing_ADB_and_fastboot">Installing ADB and fastboot</h2>

<p>You can download and install <code>adb</code> and fastboot as part of the Android SDK package, for Mac, Linux or Windows — visit the <a href="http://developer.android.com/sdk/index.html">Get the Android SDK</a> page.</p>

<p>Newer Linux distributions have <code>adb</code> already in their repositories. For Ubuntu 12.10 and later, run the following command:</p>

<pre> sudo apt-get install android-tools-adb android-tools-fastboot</pre>

<p>On Fedora 22/23/24:</p>

<pre>sudo dnf install android-tools</pre>

<p>Or on OSX using <a href="http://brew.sh/">Homebrew</a>:</p>

<pre>brew install android-platform-tools</pre>

<p>If your distribution does not have packages for <code>adb </code>available (e.g. Ubuntu 12.04 or Fedora 17/18), you'll need to install the <a class="external" href="http://developer.android.com/sdk/index.html" title="http://developer.android.com/sdk/index.html">Android SDK starter package</a> for your platform (you'll want the <em>ADT Bundle</em>, not the <em>SDK Tools Only</em> option). Then run their package manager, <code>$SDK_HOME/tools/android</code>, and use the GUI to install "Android SDK Platform-tools".</p>

<p>Find out where <code>adb</code> is installed (usually in <code>usr/bin</code>, possibly additionally inside <code>adt/platform-tools</code>, depending on how you installed it). Be sure to add this directory to your <code>PATH</code>. This can be done by adding the line</p>

<pre>PATH=$SDK_HOME:$PATH</pre>

<p>replacing <code>$SDK_HOME</code> with the location of the android sdk, to your <code>~/.bashrc</code> or equivalent.</p>

<h2 id="Troubleshooting">Troubleshooting</h2>

<p>This section contains some troubleshooting tips.</p>

<h3 id="General">General</h3>

<p>In general if you find that your Firefox OS device is not being recognised by <code>adb devices</code> or <a href="/en-US/docs/Tools/WebIDE">WebIDE</a> or whatever, you are advised to try unplugging and replugging the USB cable, turning <a href="/en-US/Firefox_OS/Debugging/Developer_settings#Debugging_via_USB">Debugging via USB</a> off and on again (make sure it was on in the first place), and also trying <code>adb kill-server</code>/<code>adb start-server</code> to restart the adb server if all else fails.</p>

<h3 id="adb_still_doesn't_recognise_the_device_—_udev_issues">adb still doesn't recognise the device — udev issues</h3>

<p>Linux has the extra setup step in that you need to <a href="/en-US/Firefox_OS/Firefox_OS_build_prerequisites#For_Linux_configure_the_udev_rule_for_your_phone">configure the udev rule for your phone</a> before it will be recognised.</p>

<p>On top of this, some devices may require extra work. The <a href="/en-US/docs/Mozilla/Firefox_OS/Phone_guide/Flame">Flame</a> device has specific issues because it has a modeswitch rule that renders it invisible to adb devices (see the solution.)</p>

<p>General advice for all devices is to check your device's <a class="external external-icon" href="https://developer.android.com/tools/device.html#VendorIds">USB vendor ID</a> by running the <code>lsusb</code> command with your phone plugged in, and search your Linux distribution's udev rules (typically under <code>/lib/udev</code>) for the id. If it is listed, then you need to make sure the Android udev rules file (look for <code>51_android.rules</code> in the udev rules directory) is processed last to override the pre-configured rules that might stop the device working. This can be done by renaming said file to a higher number than the other files start with (as the files are run alphabetically), for example <code>99_android.rules</code>. At this point, restart the system and try again.</p>

<h3 id="64-bit_install_File_not_found_error">64-bit install "File not found" error</h3>

<p>If you're using a 64-bit install, and you get a "File not found" error when running 'adb' even though the file is present, you'll need to install 32-bit compatibility libraries. To do this with apt:</p>

<pre>sudo apt-get install ia32-libs</pre>

<p>If your device cannot be found when running 'adb devices', click <a href="https://gist.github.com/justinpotts/f0b0c3883d5947c219b5">here</a> to follow steps to fix it.</p>

<h2 id="Common_ADB_commands">Common ADB commands</h2>

<p>The following sections explain some common, useful <code>adb</code> commands.</p>

<h2 id="Restarting_the_b2g_process">Restarting the b2g process</h2>

<p>b2g is the equivalent of a <a href="/en-US/docs/XULRunner" title="/en-US/docs/XULRunner">XULRunner</a> application running on the phone atop an Android-based kernel. Sometimes you may want to restart it; this is a way to reset the application environment without rebooting the entire device. You can do this by entering the following on your terminal while your device is connected to your computer (or while running the debugger):</p>

<pre>adb shell killall b2g</pre>

<h2 id="Enabling_port_forwarding_for_debugging">Enabling port forwarding for debugging</h2>

<p>To simply enable port forwarding (for example if you are using the App Manager to debug apps on a Firefox OS device), enter the following command into your terminal:</p>

<pre class="language-html">adb forward tcp:6000 localfilesystem:/data/local/debugger-socket</pre>

<p>You'll need to do this every time the phone is restarted or unplugged then re-plugged. You can change the socket number if required.</p>

<h2 id="Forwarding_ports_to_a_local_machine">Forwarding ports to a local machine</h2>

<p>To forward ports to a local machine, you will need to download the <a href="http://people.mozilla.org/~jmuizelaar/forward/">netcat and ssh binaries</a>, and run the following commands:</p>

<pre class="brush: bash"># this is an awful hack but does in fact work...
host$ adb forward tcp:7979 tcp:6969

# make some named pipes so that we can make a bidirectional netcat
phone$ mknod readback p
host$ mknod readback p

# this sets up a one time use connection to back to the host
# listen on ports 6969 and 5959 and forward all the information between them
phone$ ./netcat -l -p 6969 &lt; readback | ./netcat -l -p 5959 &gt; readback
# connect to port 7979 (port 6969 on the device) and the local ssh server and forward all information between them
host$ ./netcat localhost 7979 &lt; readback | ./netcat localhost 22 &gt; readback

# now when we connect to port 5959 on the phone it will be like connecting to ssh server on the host

# use the netcat reversal to set up an ssh connection back to the host and forward port 9999 on the device to 'localhost:8000' (this could be anything like 'google.com:80')
phone$ ./ssh localhost -p 5959 -L 9999:localhost:8000</pre>

<p>This will forward port 9999 on the device to the host's port 8000.</p>

<p>Alternatively you can use an ssh server (<a href="http://people.mozilla.org/~jmuizelaar/forward/dropbear">dropbear</a> and <a href="http://people.mozilla.org/~jmuizelaar/forward/host_key">host_key</a>) directly on the device, using the following commands:</p>

<pre class="brush: bash">phone$ DROPBEAR_PASSWORD=root ./dropbear -p 9000 -F -v -a -r host_key ./dropbear
host$ adb forward tcp:8888 tcp:9000
# public key authentication has been hard coded to succeed (make sure you have a public key for ssh to use)
host$ ssh -vvv root@localhost -p 8888 -R 9999:people.mozilla.org:80
</pre>

<p>Further resources:</p>

<ul>
 <li><a href="http://k.japko.eu/android-dropbear.html">Instructions for building dropbear</a></li>
 <li><a href="http://people.mozilla.org/~jmuizelaar/forward/dropbear-b2g.patch">dropbear patch</a> to disable the crash from missing environment variables and hard code authetication sucess.</li>
</ul>