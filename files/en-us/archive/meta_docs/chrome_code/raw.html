<p>We currently have sparse, out-of-date, and vague documentation about the ins and outs of writing privileged code on Gecko. <span class="seoSummary">We need a good guide to writing chrome JavaScript code. This plan proposes a project to produce that documentation.</span></p>

<h2 id="Team">Team</h2>

<dl>
 <dt><a href="/profiles/wbamberg">wbamberg</a></dt>
 <dd>Primary writer.</dd>
 <dt><a href="/profiles/sheppy">sheppy</a></dt>
 <dd>Assisting as available/needed.</dd>
</dl>

<h2 id="Goals">Goals</h2>

<ul>
 <li>Move existing documentation into the proper places in the content hierarchy, getting rid of anything too out of date to reuse.</li>
 <li>Add an introduction to chrome code</li>
 <li>Improve and add content about wrappers and how they work.</li>
 <li>Provide documentation that explains Gecko-specific knowledge that newcomers to Gecko/XPCOM development will not understand; there's currently no resource for this other than the source code.</li>
</ul>

<h2 id="Audience">Audience</h2>

<p>The target audience for this documentation is:</p>

<ul>
 <li>Add-on developers</li>
 <li>Dev tool developers</li>
 <li>Gecko/Firefox developers</li>
</ul>

<h2 id="Target_milestones">Target milestones</h2>

<p>We need to device appropriate milestones for this project, then file bugs for each. These bugs should each block <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1050934" title="[META] Write better/more organized about writing chrome code">bug 1050934</a>, which is this project's tracking bug.</p>

<div class="note">
<p><strong>Note:</strong> Each milestone bug should block <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1050930" title="[META] Complete WebRTC documentation">bug 1050930</a>, which is a tracking/meta bug for this project.</p>
</div>

<h2 id="User_stories">User stories</h2>

<ul>
 <li>I want to write a Firefox add-on but don't know how to interact with Web content.</li>
 <li>I want to start working on core Gecko or Firefox code but have no idea how this stuff works!</li>
 <li>I'm working on an in-browser developer tool and need to be able to examine or manipulate Web content from within my tool.</li>
</ul>

<h2 id="Documents_needed">Documents needed</h2>

<p>The lists here detail specific types of content that need to be produced, as well as precise pages that we know need to be produced or updated.</p>

<h3 id="Types_of_pages">Types of pages</h3>

<p>The following types of pages will need to be produced.</p>

<ul>
 <li>Reference
  <ul>
   <li>Interfaces</li>
   <li>Properties</li>
   <li>Methods</li>
   <li>Events</li>
  </ul>
 </li>
 <li>Guides/tutorials</li>
 <li>Sample code</li>
</ul>

<h3 id="Reference_page_work_needed">Reference page work needed</h3>

<ul>
 <li>???</li>
</ul>

<h3 id="User_guide_work_needed">User guide work needed</h3>

<ul>
 <li>New guide: Writing chrome code
  <ul>
   <li>Intro: What's chrome code?
    <ul>
     <li>Various JavaScript contexts in Gecko: chrome (privileged code), content, and sandboxes</li>
    </ul>
   </li>
   <li>What's available in the chrome environment?
    <ul>
     <li>Components
      <ul>
       <li>Classes</li>
       <li>XPCOM</li>
       <li>JavaScript code modules (JSMs)</li>
       <li>Components.utils</li>
      </ul>
     </li>
     <li>gBrowser</li>
     <li>etc.</li>
    </ul>
   </li>
   <li>Working with content
    <ul>
     <li>Getting access to content</li>
     <li>Using message managers in multiprocess Firefox (e10s)</li>
     <li>Using service workers (eventually, once they stabilize)</li>
    </ul>
   </li>
   <li>Security
    <ul>
     <li>Compartments</li>
     <li>X-Ray vision</li>
     <li>Security principles</li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

<h2 id="References">References</h2>

<h2 id="Existing_content">Existing content</h2>

<h2 id="Other_notes">Other notes</h2>

<p><a href="/profiles/wbamberg">wbamberg</a> has been working with Bobby Holley and Gabor Krizsanits on the security and X-ray stuff, and Bill McCloskey on e10s. We should get other Firefox platform people involved in figuring out what else to do here.</p>