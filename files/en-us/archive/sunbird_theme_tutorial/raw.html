<p>This tutorial is a step-by-step guide to making a theme for Sunbird 0.3a1 and later versions. It is designed for beginners. It does not cover advanced
topics.
</p><p>You might be able to apply the same method to other Mozilla applications by changing some of the details.
</p>
<h3 id="Introduction"> Introduction </h3>
<p>A theme is a package that users can install in an application to change the
appearance of the application, without changing how the application works.
</p><p>For example, a theme can change the size and colour of the toolbar buttons,
and provide different icons on the buttons. But a theme cannot provide an
extra button.
</p>
<h4 id="What_do_you_need_to_make_a_theme"> What do you need to make a theme? </h4>
<p>To make a theme, you usually need these tools:
</p>
<ul><li> A jar tool or zip tool
</li><li> An editor for plain text files
</li><li> Software for creating and editing images
</li></ul>
<p><b>Note: </b> Some zip tools only work with files whose names have &lt;tt&gt;.zip&lt;/tt&gt; at the end. You can use this kind of zip tool if you rename
each file before and after using the tool.
</p><p>You also need knowledge of:
</p>
<ul><li> Using your operating system to create files and directories
</li><li> Using the tools listed above
</li><li> <a href="en/CSS">CSS</a>
</li><li> Graphic design
</li></ul>
<p>Knowledge of <a href="en/XUL">XUL</a>, <a href="en/XBL">XBL</a> and <a href="en/JavaScript">JavaScript</a> is useful for advanced themes.
</p>
<h3 id="Making_a_theme"> Making a theme </h3>
<p>A theme consists of:
</p>
<ul><li> A unique identifier
</li><li> A file containing information about the theme
</li><li> A file that registers the theme with Sunbird
</li><li> Some files containing the theme itself
</li></ul>
<p>Set up your theme in Sunbird's profile directory. For information on how to
find the profile directory, see the Mozillazine article: <a class="external" href="http://kb.mozillazine.org/Profile_Folder#Sunbird">Profile Folder</a>
</p><p>Inside the profile directory, go to the &lt;tt&gt;extensions&lt;/tt&gt; directory.
</p><p><b>Note: </b> If the &lt;tt&gt;extensions&lt;/tt&gt; directory is empty, you are in
the wrong place—start again and follow the instructions more carefully.
</p>
<h4 id="Creating_a_unique_identifier"> Creating a unique identifier </h4>
<p>Create an identifier that is likely to be unique, in the form:
</p>
<dl><dd>&lt;tt&gt;<i>something</i>@<i>domain-name</i>&lt;/tt&gt;
</dd></dl>
<p>It must contain an at-sign (&lt;tt&gt;@&lt;/tt&gt;), making it look something like an e-mail address, but it does not need to be a real e-mail address. Before and after the at-sign, it can only contain the characters A-Z, a-z, 0-9, full stop, hyphen and underscore. If you do not own a domain name, you can make up something else. If you want to make it clear that your made-up name is not a real domain, add &lt;tt&gt;.invalid&lt;/tt&gt; to the end.
</p><p>Create a new directory in the &lt;tt&gt;extensions&lt;/tt&gt; directory. Use the
identifer as your new directory's name. This new directory is your theme directory.
</p><p>Go into your theme directory.
</p>
<h4 id="Creating_information_about_your_theme"> Creating information about your theme </h4>
<p>In your theme directory, create a plain text file named &lt;tt&gt;install.rdf&lt;/tt&gt;.
</p><p>Copy and paste the content from here, making sure that you scroll to get all
of it:
</p>
<div style="width: 40em; overflow: auto;"><pre>&lt;?xml version="1.0"?&gt;

&lt;RDF xmlns="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:em="http://www.mozilla.org/2004/em-rdf#"&gt;

  &lt;Description about="urn:mozilla:install-manifest"

    em:id="just-testing@example.com"
    em:name="Just Testing"
    em:creator="Rod Whiteley"
    em:description="A test theme for Sunbird"
    em:homepageURL="http://developer.mozilla.org/"
    em:version="0.1"
    em:internalName="testing"

    em:type="4" &gt;

    &lt;em:targetApplication&gt;&lt;!-- Sunbird --&gt;
      &lt;Description
        em:id="{718e30fb-e89b-41dd-9da7-e25a45638b28}"
        em:minVersion="0.2.9"
        em:maxVersion="0.4" /&gt;
    &lt;/em:targetApplication&gt;

  &lt;/Description&gt;

&lt;/RDF&gt;
</pre></div>
<p>In the line that starts &lt;tt&gt;em:id&lt;/tt&gt;, paste your identifier between the
double-quote characters, replacing the identifier that is there now.
</p><p>Change the next six lines to describe your theme.
</p><p>Ensure that the internal name is a single word.
</p><p><b>Note: </b> If your theme is for a version of Sunbird later than 0.4, then
also change the maxVersion.
</p><p>Save the file.
</p>
<h4 id="Registering_your_theme"> Registering your theme </h4>
<p>To register your theme, create a plain text file named &lt;tt&gt;chrome.manifest&lt;/tt&gt;.
</p><p>Copy and paste the content from here (just one line):
</p>
<pre class="eval">skin calendar testing chrome/calendar/
</pre>
<p>Change &lt;tt&gt;testing&lt;/tt&gt; to your theme's one-word internal name.
</p><p>Save the file.
</p>
<h4 id="Creating_the_theme_itself"> Creating the theme itself </h4>
<p>To create the theme itself, go to Sunbird's program directory.
</p><p><b>Note: </b> If you do not know where the program directory is, look at the properties of the shortcut or launcher icon that you use to start Sunbird. There
you can see the location of the directory.
</p><p>In the program directory, go to the &lt;tt&gt;chrome&lt;/tt&gt; directory.
</p><p>Use a jar tool or zip tool to unpack the file &lt;tt&gt;calendar.jar&lt;/tt&gt; there.
</p><p>Go to the &lt;tt&gt;skin&lt;/tt&gt; directory that has just been created, then to the
&lt;tt&gt;classic&lt;/tt&gt; directory there. Copy the &lt;tt&gt;calendar&lt;/tt&gt; directory that
you find there.
</p><p>In your theme directory, create a new directory named &lt;tt&gt;chrome&lt;/tt&gt;.
</p><p>Paste the copied &lt;tt&gt;calendar&lt;/tt&gt; directory, together with all its contents, into your new &lt;tt&gt;chrome&lt;/tt&gt; directory.
</p><p>Now you have a theme, although it looks exactly the same as Sunbird's classic theme.
</p>
<h4 id="Modifying_your_theme"> Modifying your theme </h4>
<p>To modify your theme, change the CSS and image files in any way you like.
</p><p>For testing purposes, go to the &lt;tt&gt;calendar&lt;/tt&gt; directory that you have just
pasted. Edit the file &lt;tt&gt;calendar.css&lt;/tt&gt; there. Add this line at the end:
</p>
<pre class="eval">label {color: red;}
</pre>
<p>Save the file.
</p>
<h4 id="Fixing_bug_320823"> Fixing bug 320823 </h4>
<p>If you are using the Sunbird 0.3a1 release, or a test build before 2005-12-21, then you must apply a fix for bug 320823 to allow Sunbird to use themes.
</p><p>Go to Sunbird's program directory, then to the &lt;tt&gt;defaults&lt;/tt&gt; directory
there. In the &lt;tt&gt;pref&lt;/tt&gt; directory, edit the file &lt;tt&gt;sunbird.js&lt;/tt&gt; and
search for the &lt;tt&gt;pref("extensions&lt;/tt&gt; entries. Add the line:
</p>
<pre class="eval">pref("extensions.dss.enabled", false);
</pre>
<p>Save the file.
</p>
<h4 id="Using_your_theme"> Using your theme </h4>
<p>To use your theme, restart Sunbird.
</p><p>From the menu bar, choose Tools – Themes...
</p><p>In the Themes window, check that your new theme has appeared.
</p><p>Select it and press the Use Theme button.
</p><p>Restart Sunbird again.
</p><p>If your theme is working, you see the effect of the changes that you made.
</p>
<h3 id="Developing_your_theme"> Developing your theme </h3>
<p>To develop your theme, make further changes to the theme files. You might
prefer to do some design work in an image editor first, so that you have a
clear design concept to implement.
</p>
<h4 id="Understanding_Sunbird's_user_interface"> Understanding Sunbird's user interface </h4>
<p>To understand Sunbird's user interface, go to Sunbird's program directory,
then to the &lt;tt&gt;chrome/content/calendar&lt;/tt&gt; directory there. Examine the files there to understand how Sunbird's user interface is constructed.
</p><p>The basic interface is written in XUL, but some parts are constructed using
XBL or JavaScript.
</p><p>To discover details of the interface, you can also use the DOM Inspector tool in Firefox. Install a compatible test build of the Calendar extension in Firefox 1.5, and examine its interface. The details are mostly the same as in Sunbird.
</p><p><b>Note: </b> Sunbird's views changed at the end of December 2005. So do not waste time styling the old views. Work with a recent test build so that your theme will be compatible with the next release.
</p>
<h4 id="Testing_further_changes"> Testing further changes </h4>
<p>When you make further changes to your theme, test them by restarting Sunbird.
</p><p>To detect errors, choose Tools – JavaScript Console... The
JavaScript Console window displays CSS errors, not just JavaScript errors.
</p>
<h4 id="Making_an_icon_and_preview"> Making an icon and preview </h4>
<p>The Themes window can display an icon and a preview graphic. You normally make
these after you have designed the rest of your theme.
</p><p>Make an image file 32 by 32 pixels, and save it as &lt;tt&gt;icon.png&lt;/tt&gt; in your theme directory.
</p><p>Make an image file about 200 by 100 pixels, and save it as &lt;tt&gt;preview.png&lt;/tt&gt;
in your theme directory.
</p>
<h4 id="Adding_other_components"> Adding other components </h4>
<p>Your theme only modifies the calendar component. Sunbird also contains
communicator, global, help and mozapps components.
</p><p>To add these to your theme, unpack the file &lt;tt&gt;classic.jar&lt;/tt&gt; in Sunbird's
&lt;tt&gt;chrome&lt;/tt&gt; directory. From the unpacked &lt;tt&gt;skin/classic&lt;/tt&gt; directory,
copy the extra directories into your theme.
</p><p>In your &lt;tt&gt;chrome.manifest&lt;/tt&gt; file, add lines like this:
</p>
<pre class="eval">skin communicator testing chrome/communicator/
skin global testing chrome/global/
skin help testing chrome/help/
skin mozapps testing chrome/mozapps/
</pre>
<p>replacing &lt;tt&gt;testing&lt;/tt&gt; with your theme's one-word internal name as before.
</p><p>To understand the user interface provided by these other components, unpack the other jar files.
</p>
<h3 id="Packaging_your_theme"> Packaging your theme </h3>
<p>You can package your theme and make it available on a web site for other users to download and install.
</p><p>There are two methods: a simple method, and the normal method.
</p>
<h4 id="Simple_packaging"> Simple packaging </h4>
<p><b>Note: </b> If you use this simple method to package your theme, then it
can take up much more disk space than it really needs. You might prefer to use this method only while you are developing your theme, and to use the normal method for public releases.
</p><p>In Sunbird, use the default theme or some other theme.
</p><p>Move your theme directory to a temporary location. This uninstalls it from
Sunbird.
</p><p>Use a jar tool or zip tool to pack the contents of your theme directory. It is
usual to turn off compression so that your theme's speed is maximized. Make sure that the tool packs all the directories and files that make up your theme.
</p><p>Name the packed file with the &lt;tt&gt;.jar&lt;/tt&gt; extension.
</p><p>For example, when I wrote this article I used this command in my theme directory:
</p>
<pre class="eval">zip -0r testing-0.1.jar .
</pre>
<p>Make this jar file available to users.
</p>
<h4 id="Normal_packaging"> Normal packaging </h4>
<p>In Sunbird, use the default theme or some other theme.
</p><p>Move your theme directory to a temporary location. This uninstalls it from
Sunbird.
</p><p>Go to your &lt;tt&gt;chrome&lt;/tt&gt; directory. Use a jar tool or zip tool to pack everything in your &lt;tt&gt;chrome&lt;/tt&gt; directory into a file. It is usual to turn off compression so that your theme's speed is maximized. Make sure that the tool packs all the directories and files that make up your theme.
</p><p>Name the packed file with the &lt;tt&gt;.jar&lt;/tt&gt; extension.
</p><p>For example, when I wrote this article I used this command in my &lt;tt&gt;chrome&lt;/tt&gt; directory:
</p>
<pre class="eval">zip -0r testing.jar .
</pre>
<p>Go back to your theme directory and edit the file &lt;tt&gt;chrome.manifest&lt;/tt&gt;.
</p><p>Change the line for the calendar component to:
</p>
<pre class="eval">skin calendar testing jar:chrome/testing.jar!/calendar/
</pre>
<p>and make the corresponding change in any other lines that you added.
</p><p>Save the file.
</p><p>Use a jar tool or zip tool to pack the files in your theme directory together
with your &lt;tt&gt;.jar&lt;/tt&gt; file. It is usual to use maximum compression so that users can download your theme quickly. Make sure that the tool <i>does not</i> pack any component directories.
</p><p>Name the packed file with the &lt;tt&gt;.jar&lt;/tt&gt; extension.
</p><p>For example, when I wrote this article I used this command in my theme directory:
</p>
<pre class="eval">zip -9 testing-0.1.jar * chrome/testing.jar
</pre>
<p>Make this jar file available to users.
</p>
<h4 id="Installing_a_packaged_theme"> Installing a packaged theme </h4>
<p>Install your packaged theme in the normal way, by dragging the jar (or a link
to it) and dropping it in Sunbird's Themes window.
</p><p>Select the newly installed theme and press the Use Theme button.
</p><p>Restart Sunbird.
</p>