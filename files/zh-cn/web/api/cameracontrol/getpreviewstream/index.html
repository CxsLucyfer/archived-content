---
title: CameraControl.getPreviewStream
slug: Web/API/CameraControl/getPreviewStream
translation_of: Archive/B2G_OS/API/CameraControl/getPreviewStream
---
<p></p><section class="Quick_links" id="Quick_Links"><ol><li><strong><a href="/zh-CN/docs/Web/API/Camera_API">Camera API</a></strong></li><li><strong><a href="/zh-CN/docs/Web/API/CameraControl"><code>CameraControl</code></a></strong></li><li class="toggle"><details open><summary>继承</summary><ol><li><a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a></li><li><a href="/zh-CN/docs/Web/API/EventTarget"><code>EventTarget</code></a></li></ol></details></li><li class="toggle"><details open><summary>Related pages for Camera API</summary><ol><li><a href="/zh-CN/docs/Web/API/CameraCapabilities"><code>CameraCapabilities</code></a></li><li><a href="/zh-CN/docs/Web/API/CameraManager"><code>CameraManager</code></a></li><li><a href="/zh-CN/docs/Web/API/Navigator/mozCameras"><code>Navigator.mozCameras</code></a></li></ol></details></li></ol></section><div class="nonStandard nonStandardHeader notecard">
      <p><strong><span class="icon-only-inline" title="This API has not been standardized."><i class="icon-warning-sign"> </i></span> 非标准</strong><br>
      该特性是非标准的，请尽量不要在生产环境中使用它！</p>
      </div><p></p>

<h2 id="概述">概述</h2>

<p>该方法用来根据指定的配置,从摄像头获取到一个<a href="/zh-CN/docs/Web/API/MediaStream" title="MediaStream 接口是一个媒体内容的流.。一个流包含几个轨道，比如视频和音频轨道。"><code>MediaStream</code></a>数据流,你可以从该数据流中捕获到静态的照片.</p>

<div class="note">
<p><strong>注:使用该方法获取到的数据流仅能用来捕获静态的照片</strong>.如果你想录制视频,那么必须使用<a href="/zh-CN/docs/Web/API/CameraControl/getPreviewStreamVideoMode" title="此页面仍未被本地化, 期待您的翻译!"><code>CameraControl.getPreviewStreamVideoMode()</code></a>方法来代替.</p>
</div>

<h2 id="语法">语法</h2>

<pre>CameraControl.getPreviewStream(options, onsuccess[, onerror]);</pre>

<h3 id="参数">参数</h3>

<dl>
 <dt><code>options</code></dt>
 <dd>一个包含有两个属性<code>width</code>和<code>height的对象</code>.该对象可以通过<a href="/zh-CN/docs/Web/API/CameraCapabilities" title="此页面仍未被本地化, 期待您的翻译!"><code>CameraCapabilities</code></a><code>.previewSizes属性获取到.</code></dd>
 <dt><code>onsuccess</code></dt>
 <dd>一个回调函数,会被传入一个参数,这个参数是一个<a href="/zh-CN/docs/Web/API/MediaStream" title="MediaStream 接口是一个媒体内容的流.。一个流包含几个轨道，比如视频和音频轨道。"><code>MediaStream</code></a>数据流对象,可以使用该数据流对象捕获静态的图像.</dd>
 <dt><code>onerror</code> <span class="optional optionalInline notecard inline">可选</span></dt>
 <dd>一个回调函数,会被传入一个参数,这个参数是一个表示错误原因的字符串.如果在尝试获取<code>MediaStream</code>数据流对象时发生了错误,则会调用该函数.</dd>
</dl>

<h2 id="示例">示例</h2>

<p>这个例子演示了如何通过使用<a href="/zh-CN/docs/Web/API/MediaStream" title="MediaStream 接口是一个媒体内容的流.。一个流包含几个轨道，比如视频和音频轨道。"><code>MediaStream</code></a>数据流对象来从摄像头捕获并播放静态的图片.</p>

<pre class="brush: js">var display = document.getElementsByTagName(&apos;video&apos;)[0];
var options = {
  camera: navigator.mozCameras.getListOfCameras()[0]
};

function onStreamReady( stream ) {
  display.mozSrcObject = stream;
  display.play();
}

function onAccessCamera( camera ) {
  var size = camera.capabilities.previewSizes[0];

  camera.getPreviewStream(size, onStreamReady);
};

navigator.mozCameras.getCamera(options, onAccessCamera)
</pre>

<h2 id="Specification" name="Specification">规范</h2>

<p>不属于任何规范.当<a href="http://dev.w3.org/2011/webrtc/editor/getusermedia.html" class="external" rel="external" title="http://dev.w3.org/2011/webrtc/editor/getusermedia.html">WebRTC Capture and Stream API</a>实现时,该方法应该会被删除.</p>

<h2 id="相关链接">相关链接</h2>

<ul>
 <li><a href="/zh-CN/docs/Web/API/CameraControl"><code>CameraControl</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a></li>
 <li>The <code>mozSrcObject</code> property on <a href="/zh-CN/docs/Web/API/HTMLMediaElement"><code>HTMLMediaElement</code></a></li>
</ul>
