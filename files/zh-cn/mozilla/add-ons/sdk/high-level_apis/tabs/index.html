---
title: tabs
slug: Mozilla/Add-ons/SDK/High-Level_APIs/tabs
translation_of: Archive/Add-ons/Add-on_SDK/High-Level_APIs/tabs
---
<p></p><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions"><strong>Browser extensions</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Getting started</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">What are extensions?</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Your first extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Your second extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomy of an extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Examples">Example extensions</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_next_">What next?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Concepts</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Using the JavaScript APIs</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Content scripts</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Match patterns</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Working with files</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalization</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Security best practices</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Content Security Policy</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Native messaging</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>User interface</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface">User Interface</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Toolbar button</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Address bar button</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Sidebars</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Context menu items</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Options page</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Extension pages</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Address bar suggestions</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Developer tools panels</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>How to</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercept HTTP requests</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modify a web page</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insert external content</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Add a button to the toolbar</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Implement a settings page</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Work with the Tabs API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Work with the Bookmarks API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Work with the Cookies API</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Work with contextual identities</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/onboarding_upboarding_offboarding_best_practices">Onboard, upboard, and offboard users</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Porting</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porting a Google Chrome extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porting a legacy Firefox extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">Embedded WebExtensions</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparison with the Add-on SDK</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparison with XUL/XPCOM extensions</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">Differences between API implementations</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Chrome incompatibilities</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Differences between desktop and Android</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Firefox workflow</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Development_Tools">Developer tools</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">User Experience</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Temporary Installation in Firefox</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Debugging">Debugging</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Testing persistent and restart features</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Developing for Firefox for Android</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Getting started with web-ext</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">web-ext command reference</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Extensions and the Add-on ID</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Request the right permissions</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>JavaScript APIs</summary>
        <ol><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/contextMenus">contextMenus</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>

    <li class="toggle">
      <details>
      <summary>Manifest keys</summary>
      <ol><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">applications</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/%E4%B8%BB%E9%A1%B5%E5%9C%B0%E5%9D%80">主页地址</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">作者 - author</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">名称 - name</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">后台 - background</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">描述 - description</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">权限 - permissions</a></li><li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">短名称 - short_name</a></li></ol>
      </details>
    </li>

    <li><a href="/zh-CN/docs/Mozilla/Add-ons/Themes"><strong>Themes</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Browser themes</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Themes/Theme_concepts">Browser theme concepts</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution"><strong>Publishing and Distribution</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Publishing add-ons</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution">Signing and distribution overview</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Package your extension</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Submit an add-on</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Source_Code_Submission">Source code submission</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Resources for publishers</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Listing">Creating an appealing listing</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution/Make_money_from_browser_extensions">Make money from browser extensions</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution/Promoting_your_extension_or_theme">Promoting your extension or theme</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Review policies</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Developer agreement</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/AMO/Policy/Featured">Featured add-ons</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retiring your extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Distributing add-ons</summary>
        <ol>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">For sideloading</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">For desktop apps</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">For an enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Community and Support</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Channels</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Add-ons blog</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Add-on forums</a></li>
          <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
          <li><a href="/zh-CN/docs/Mozilla/Add-ons/#Contact_us">Contact us</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section><p></p>

<div class="note notecard">
<p>Stable</p>
</div>

<p><span class="seoSummary">打开、操作和访问标签页，以及接收标签页事件</span></p>

<h2 id="Usage">用法</h2>

<h3 id="Open_a_tab">打开标签页</h3>

<p>你可以注册事件监听器，以便在标签打开、关闭、完成DOM内容加载、被激活或被闲置时接收通知：</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);
tabs.open(&quot;http://www.example.com&quot;);</pre>

<h3 id="Track_tabs">跟踪标签页</h3>

<p>You can register event listeners to be notified when tabs open, close, finish loading DOM content, or are made active or inactive:</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);

// Listen for tab openings.
tabs.on(&apos;open&apos;, function onOpen(tab) {
  myOpenTabs.push(tab);
});

// Listen for tab content loads.
tabs.on(&apos;ready&apos;, function(tab) {
  console.log(&apos;tab is loaded&apos;, tab.title, tab.url);
});</pre>

<h3 id="Access_tabs">访问标签页</h3>

<p>The module itself can be used as a list of all opened tabs across all windows. In particular, you can enumerate it:</p>

<pre class="brush: js">var tabs = require(&apos;sdk/tabs&apos;);
for (let tab of tabs)
  console.log(tab.title);</pre>

<p>You can also access individual tabs by index:</p>

<pre class="brush: js">var tabs = require(&apos;sdk/tabs&apos;);

tabs.on(&apos;ready&apos;, function () {
  console.log(&apos;first: &apos; + tabs[0].title);
  console.log(&apos;last: &apos; + tabs[tabs.length-1].title);
});</pre>

<p>You can access the currently active tab:</p>

<pre class="brush: js">var tabs = require(&apos;sdk/tabs&apos;);

tabs.on(&apos;activate&apos;, function () {
  console.log(&apos;active: &apos; + tabs.activeTab.url);
});</pre>

<h3 id="Track_a_single_tab">跟踪单个标签页</h3>

<p>Given a tab, you can register event listeners to be notified when the tab is closed, activated or deactivated, or when the page hosted by the tab is loaded or retrieved from the <a href="https://developer.mozilla.org/en-US/docs/Working_with_BFCache">&quot;back-forward cache&quot;</a>:</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);

function onOpen(tab) {
  console.log(tab.url + &quot; is open&quot;);
  tab.on(&quot;pageshow&quot;, logShow);
  tab.on(&quot;activate&quot;, logActivate);
  tab.on(&quot;deactivate&quot;, logDeactivate);
  tab.on(&quot;close&quot;, logClose);
}

function logShow(tab) {
  console.log(tab.url + &quot; is loaded&quot;);
}

function logActivate(tab) {
  console.log(tab.url + &quot; is activated&quot;);
}

function logDeactivate(tab) {
  console.log(tab.url + &quot; is deactivated&quot;);
}

function logClose(tab) {
  console.log(tab.url + &quot; is closed&quot;);
}

tabs.on(&apos;open&apos;, onOpen);</pre>

<h3 id="Manipulate_a_tab">操作标签页</h3>

<p>You can get and set various properties of tabs (but note that properties relating to the tab&apos;s content, such as the URL, will not contain valid values until after the tab&apos;s <code>ready</code> event fires). By setting the <code>url</code> property you can load a new page in the tab:</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);
tabs.on(&apos;activate&apos;, function(tab) {
  tab.url = &quot;http://www.example.com&quot;;
});</pre>

<h3 id="Run_scripts_in_a_tab">在标签页中运行脚本</h3>

<p>You can attach a <a href="/en-US/Add-ons/SDK/Guides/Content_Scripts">content script</a> to the page hosted in a tab, and use that to access and manipulate the page&apos;s content (see the <a href="/en-US/Add-ons/SDK/Tutorials/Modifying_the_Page_Hosted_by_a_Tab">Modifying the Page Hosted by a Tab</a> tutorial):</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);

tabs.on(&apos;activate&apos;, function(tab) {
  var worker = tab.attach({
    contentScript: &apos;self.port.emit(&quot;html&quot;, document.body.innerHTML);&apos;
  });
  worker.port.on(&quot;html&quot;, function(message) {
    console.log(message)
  })
});</pre>

<p>Note that <code>tab.attach</code> is tab-centric: if the user navigates to a new page in the same tab, then the worker and content scripts will be reattached to the new page.</p>

<h3 id="Attaching_stylesheets">附加样式表</h3>

<div class="geckoVersionNote">
<p>Firefox 34 新增。</p>
</div>

<p>You can&apos;t attach style sheets to a tab using <code>tab.attach()</code>, but from Firefox 34 onwards you can attach and detach them using the low-level <a href="/en-US/Add-ons/SDK/Low-Level_APIs/stylesheet_style">stylesheet/style</a> and <a href="/en-US/Add-ons/SDK/Low-Level_APIs/content_mod">content/mod</a> APIs. Here&apos;s an add-on that uses a toggle button to attach a stylesheet to the active tab, and detach it again. The stylesheet is called &quot;style.css&quot; and is located in the add-on&apos;s &quot;data&quot; directory:</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);
var { attach, detach } = require(&apos;sdk/content/mod&apos;);
var { Style } = require(&apos;sdk/stylesheet/style&apos;);
var { ToggleButton } = require(&quot;sdk/ui/button/toggle&quot;);

var style = Style({
  uri: &apos;./style.css&apos;
});

var button = ToggleButton({
  id: &quot;stylist&quot;,
  label: &quot;stylist&quot;,
  icon: &quot;./icon-16.png&quot;,
  onChange: function(state) {
    if (state.checked) {
      attach(style, tabs.activeTab);
    }
    else {
      detach(style, tabs.activeTab);
    }
  }
});</pre>

<h3 id="Private_windows">隐私窗口</h3>

<p>If your add-on has not opted into private browsing, then you won&apos;t see any tabs that are hosted by private browser windows.</p>

<p>Tabs hosted by private browser windows won&apos;t be seen if you enumerate the <code>tabs</code> module itself, and you won&apos;t receive any events for them.</p>

<p>To learn more about private windows, how to opt into private browsing, and how to support private browsing, refer to the <a href="/en-US/Add-ons/SDK/High-Level_APIs/private-browsing">documentation for the <code>private-browsing</code> module</a>.</p>

<h3 id="Converting_to_XUL_tabs">转为XUL标签页</h3>

<p>To convert from the high-level <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#Tab"><code>Tab</code></a> objects used in this API to the low-level <a href="/en-US/docs/Mozilla/Tech/XUL/tab">XUL <code>tab</code></a> objects used in the <a href="/en-US/Add-ons/SDK/Low-Level_APIs/tabs_utils"><code>tabs/utils</code></a> API and by traditional add-ons, use the <code>viewFor()</code> function exported by the <code>viewFor</code> module.</p>

<p>To convert back the other way, from a XUL <code>tab</code> to a high-level <code>Tab</code> object, use the <code>modelFor()</code> function, exported by the <code>modelFor</code> module.</p>

<p>Here&apos;s an example converting from a high-level <code>Tab</code> to a XUL <code>tab</code> and then back the other way:</p>

<pre class="brush: js">var { modelFor } = require(&quot;sdk/model/core&quot;);
var { viewFor } = require(&quot;sdk/view/core&quot;);

var tabs = require(&quot;sdk/tabs&quot;);
var tab_utils = require(&quot;sdk/tabs/utils&quot;);

function mapHighLevelToLowLevel(tab) {
  // get the XUL tab that corresponds to this high-level tab
  var lowLevelTab = viewFor(tab);
  // now we can, for example, access the tab&apos;s content directly
  var browser = tab_utils.getBrowserForTab(lowLevelTab);
  console.log(browser.contentDocument.body.innerHTML);
  // get the high-level tab back from the XUL tab
  var highLevelTab = modelFor(lowLevelTab);
  console.log(highLevelTab.url);
}

tabs.on(&quot;ready&quot;, mapHighLevelToLowLevel);
</pre>

<p>Note that directly accessing XUL objects and web content like this means you&apos;re no longer protected by the compatibility guarantees made by the SDK&apos;s high-level APIs. In particular, your code might not work with <a href="http://billmccloskey.wordpress.com/2013/12/05/multiprocess-firefox/">multiprocess Firefox</a>.</p>

<h2 id="Globals">全局变量</h2>

<h3 id="Functions">函数</h3>

<h4 class="addon-sdk-api-name" id="open(options)"><code>open(options)</code></h4>

<p>Opens a new tab. The new tab will open in the active window or in a new window, depending on the <code>inNewWindow</code> option.</p>

<p><strong>示例</strong></p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);

// Open a new tab on active window and make tab active.
tabs.open(&quot;http://www.mysite.com&quot;);

// Open a new tab in a new window and make it active.
tabs.open({
  url: &quot;http://www.mysite.com&quot;,
  inNewWindow: true
});

// Open a new tab on active window in the background.
tabs.open({
  url: &quot;http://www.mysite.com&quot;,
  inBackground: true
});

// Open a new tab as an app tab and do something once it&apos;s open.
tabs.open({
  url: &quot;http://www.mysite.com&quot;,
  isPinned: true,
  onOpen: function onOpen(tab) {
    // do stuff like listen for content
    // loading.
  }
});</pre>

<h5 id="Parameters">参数</h5>

<p><strong>options : object</strong><br>
 必选项：</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Name</th>
   <th scope="col">Type</th>
   <th scope="col"> </th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>url</td>
   <td>string</td>
   <td>
    <p>String URL to be opened in the new tab. This is a required property.</p>
   </td>
  </tr>
 </tbody>
</table>

<p>可选项：</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Name</th>
   <th scope="col">Type</th>
   <th scope="col"> </th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>isPrivate</td>
   <td>boolean</td>
   <td>
    <p>Boolean which will determine whether the new tab should be private or not. If your add-on does not support private browsing this will have no effect. See the <a href="/en-US/Add-ons/SDK/High-Level_APIs/private-browsing">private-browsing</a> documentation for more information. Defaults to <code>false</code>.</p>
   </td>
  </tr>
  <tr>
   <td>inNewWindow</td>
   <td>boolean</td>
   <td>
    <p>If present and true, a new browser window will be opened and the URL will be opened in the first tab in that window. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>inBackground</td>
   <td>boolean</td>
   <td>
    <p>If present and true, the new tab will be opened to the right of the active tab and will not be active. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>isPinned</td>
   <td>boolean</td>
   <td>
    <p>If present and true, then the new tab will be pinned as an <a href="http://support.mozilla.com/en-US/kb/what-are-app-tabs">app tab</a>.</p>
   </td>
  </tr>
  <tr>
   <td>onOpen</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;open&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onClose</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;close&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onReady</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;ready&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onLoad</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;load&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onPageShow</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;pageshow&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onActivate</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;activate&apos; event. This is an optional property.</p>
   </td>
  </tr>
  <tr>
   <td>onDeactivate</td>
   <td>function</td>
   <td>
    <p>A callback function that will be registered for the &apos;deactivate&apos; event. This is an optional property.</p>
   </td>
  </tr>
 </tbody>
</table>

<h3 id="Properties">属性</h3>

<h4 class="addon-sdk-api-name" id="activeTab"><code>activeTab</code></h4>

<p>The currently active tab in the active window. This property is read-only. To activate a <code>Tab</code> object, call its <code>activate</code> method.</p>

<p><strong>示例</strong></p>

<pre class="brush: js">// Get the active tab&apos;s title.
var tabs = require(&quot;sdk/tabs&quot;);
console.log(&quot;title of active tab is &quot; + tabs.activeTab.title);</pre>

<h4 class="addon-sdk-api-name" id="length"><code>length</code></h4>

<p>The number of open tabs across all windows.</p>

<h3 id="Events">事件</h3>

<h4 class="addon-sdk-api-name" id="open"><code>open</code></h4>

<p>This event is emitted when a new tab is opened. This does not mean that the content has loaded, only that the browser tab itself is fully visible to the user.</p>

<p>Properties relating to the tab&apos;s content (for example: <code>title</code>, <code>favicon</code>, and <code>url</code>) will not be correct at this point. If you need to access these properties, listen for the <code>ready</code> event:</p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);
tabs.on(&apos;open&apos;, function(tab){
  tab.on(&apos;ready&apos;, function(tab){
    console.log(tab.url);
  });
});</pre>

<h5 id="Arguments">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object that just opened.</p>

<h4 class="addon-sdk-api-name" id="close"><code>close</code></h4>

<p>This event is emitted when a tab is closed. When a window is closed this event will be emitted for each of the open tabs in that window.</p>

<h5 id="Arguments_2">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object that has closed.</p>

<h4 class="addon-sdk-api-name" id="ready"><code>ready</code></h4>

<p>This event is emitted when the DOM for a tab&apos;s content is ready. It is equivalent to the <code>DOMContentLoaded</code> event for the given content page.</p>

<p>A single tab will emit this event every time the DOM is loaded: so it will be emitted again if the tab&apos;s location changes or the content is reloaded.</p>

<p>After this event has been emitted, all properties relating to the tab&apos;s content can be used.</p>

<h5 id="Arguments_3">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object that has loaded.</p>

<h4 class="addon-sdk-api-name" id="activate"><code>activate</code></h4>

<p>This event is emitted when an inactive tab is made active.</p>

<h5 id="Arguments_4">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object that has become active.</p>

<h4 class="addon-sdk-api-name" id="deactivate"><code>deactivate</code></h4>

<p>This event is emitted when the active tab is made inactive.</p>

<h5 id="Arguments_5">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object that has become inactive.</p>

<h2 id="Tab">Tab</h2>

<p>A <code>Tab</code> instance represents a single open tab. It contains various tab properties, several methods for manipulation, as well as per-tab event registration.</p>

<p>Tabs emit all the events described in the Events section. Listeners are passed the <code>Tab</code> object that triggered the event.</p>

<h3 id="Methods">方法</h3>

<h4 class="addon-sdk-api-name" id="pin()"><code>pin()</code></h4>

<p>Pins this tab as an <a href="http://support.mozilla.com/en-US/kb/what-are-app-tabs">app tab</a>.</p>

<h4 class="addon-sdk-api-name" id="unpin()"><code>unpin()</code></h4>

<p>Unpins this tab.</p>

<h4 class="addon-sdk-api-name" id="close(callback)"><code>close(callback)</code></h4>

<p>Closes this tab.</p>

<h5 id="Parameters_2">参数</h5>

<p><strong>callback : function</strong><br>
 A function to be called when the tab finishes its closing process. This is an optional argument.</p>

<h4 class="addon-sdk-api-name" id="reload()"><code>reload()</code></h4>

<p>Reloads this tab.</p>

<h4 class="addon-sdk-api-name" id="activate()"><code>activate()</code></h4>

<p>Makes this tab active, which will bring this tab to the foreground.</p>

<h4 class="addon-sdk-api-name" id="getThumbnail()"><code>getThumbnail()</code></h4>

<p>Returns thumbnail data URI of the page currently loaded in this tab.</p>

<h4 class="addon-sdk-api-name" id="attach(options)"><code>attach(options)</code></h4>

<p>Attach one or more scripts to the document loaded in the tab. Note that by attaching inside <em>ready</em> event, this becomes tab-centric: if the user navigates to a new page in the same tab, then the content scripts will be reattached to the new page.</p>

<p><strong>示例</strong></p>

<pre class="brush: js">var tabs = require(&quot;sdk/tabs&quot;);

tabs.on(&apos;ready&apos;, function(tab) {
  var worker = tab.attach({
      contentScript:
        &apos;document.body.style.border = &quot;5px solid red&quot;;&apos;
  });
});</pre>

<h5 id="Parameters_3">参数</h5>

<p><strong>options : object</strong><br>
 可选项:</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Name</th>
   <th scope="col">Type</th>
   <th scope="col"> </th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>contentScriptFile</td>
   <td>string,array</td>
   <td>
    <p>The local file URLs of content scripts to load. Content scripts specified by this option are loaded <em>before</em> those specified by the <code>contentScript</code> option. Optional.</p>
   </td>
  </tr>
  <tr>
   <td>contentScript</td>
   <td>string,array</td>
   <td>
    <p>A string or an array of strings of code to be evaluated in the context. Content scripts specified by this option are loaded <em>after</em> those specified by the <code>contentScriptFile</code> option. Optional.</p>
   </td>
  </tr>
  <tr>
   <td>contentScriptOptions</td>
   <td>object</td>
   <td>
    <p>You can use this option to define read-only values for your content scripts.</p>

    <p>The option consists of an object literal listing <code>name:value</code> pairs for the values you want to provide to the content script. For example:</p>

    <pre class="brush: js">// main.js

const tabs = require(&quot;sdk/tabs&quot;);

tabs.open({
  url: &quot;./page.html&quot;,
  onReady: function(tab) {
    tab.attach({
      contentScriptFile: &quot;./content-script.js&quot;,
      contentScriptOptions: {
        a: &quot;blah&quot;
      }
    });
  }
});</pre>

    <p>The values are accessible to content scripts via the <code>self.options</code> property:</p>

    <pre class="brush: js">// content-script.js

alert(self.options.a);</pre>
   </td>
  </tr>
  <tr>
   <td>onMessage</td>
   <td>function</td>
   <td>
    <p>A function called when the content worker receives a message from content scripts. Listeners are passed a single argument, the message posted from the content script. Optional.</p>
   </td>
  </tr>
  <tr>
   <td>onError</td>
   <td>function</td>
   <td>A function called when the content worker receives an error from content scripts. Listeners are passed a single argument, <code>error</code>, which is the error posted from the content script and an object of type <a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error">Error</a>. Optional</td>
  </tr>
 </tbody>
</table>

<h5 id="Returns">返回</h5>

<p><strong>Worker</strong> : <a href="/en-US/Add-ons/SDK/Low-Level_APIs/content_worker">Worker</a> 对象能够用来和内容脚本通信。查看 <a href="/en-US/Add-ons/SDK/Guides/Content_Scripts">Content Scripts guide</a> 了解详细信息。</p>

<h3 id="Properties_2">属性</h3>

<h4 class="addon-sdk-api-name" id="id"><code>id</code></h4>

<p>The unique id for the tab. This property is read-only.</p>

<h4 class="addon-sdk-api-name" id="title"><code>title</code></h4>

<p>The title of the tab (usually the title of the page currently loaded in the tab) This property can be set to change the tab title.</p>

<h4 class="addon-sdk-api-name" id="url"><code>url</code></h4>

<p>The URL of the page currently loaded in the tab. This property can be set to load a different URL in the tab.</p>

<h4 class="addon-sdk-api-name" id="favicon"><code>favicon</code></h4>

<p>The URL of the favicon for the page currently loaded in the tab. This property is read-only.</p>

<div class="warning notecard">This property is deprecated. From version 1.15, use the <a href="/en-US/Add-ons/SDK/Low-Level_APIs/places_favicon">favicon module&apos;s <code>getFavicon()</code></a> function instead.</div>

<h4 class="addon-sdk-api-name" id="contentType"><code>contentType</code></h4>

<div class="note notecard">
<p><strong>This is currently an experimental API, so we might change it in future releases.</strong></p>

<p>Returns the MIME type that the document currently loaded in the tab is being rendered as. This may come from HTTP headers or other sources of MIME information, and might be affected by automatic type conversions performed by either the browser or extensions. This property is read-only.</p>
</div>

<h4 class="addon-sdk-api-name" id="index"><code>index</code></h4>

<p>The index of the tab relative to other tabs in the application window. This property can be set to change its relative position.</p>

<h4 class="addon-sdk-api-name" id="isPinned"><code>isPinned</code></h4>

<p>Whether or not this tab is pinned as an <a href="http://support.mozilla.com/en-US/kb/what-are-app-tabs">app tab</a>. This property is read-only.</p>

<h4 class="addon-sdk-api-name" id="window"><code>window</code></h4>

<p><code>标签页的</code><a href="/en-US/Add-ons/SDK/High-Level_APIs/windows#BrowserWindow"><code>window</code></a>对象.</p>

<h4 class="addon-sdk-api-name" id="readyState"><code>readyState</code></h4>

<div class="geckoVersionNote">
<p>Firefox 33 新增。</p>
</div>

<p>A string telling you the load state of the document hosted by this tab. This corresponds directly to <a href="/en-US/docs/Web/API/document.readyState"><code>Document.readyState</code></a>. It has one of four possible values:</p>

<ul>
 <li>&quot;uninitialized&quot;: the tab&apos;s document is not yet loading</li>
 <li>&quot;loading&quot;: the tab&apos;s document is still in the process of loading</li>
 <li>&quot;interactive&quot;: the tab&apos;s document has loaded and is parsed, but resources such as images and stylesheets may still be loading</li>
 <li>&quot;complete&quot;: the tab&apos;s document and all resources are fully loaded</li>
</ul>

<p>Once a tab&apos;s <code>readyState</code> has entered &quot;interactive&quot;, you can retrieve properties such as the document&apos;s URL.</p>

<h3 id="Events_2">事件</h3>

<h4 class="addon-sdk-api-name" id="close_2"><code>close</code></h4>

<p>This event is emitted when the tab is closed. It&apos;s also emitted when the tab&apos;s window is closed.</p>

<h5 id="Arguments_6">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>

<h4 class="addon-sdk-api-name" id="ready_2"><code>ready</code></h4>

<p>This event is emitted when the DOM for the tab&apos;s content is ready. It is equivalent to the <a href="https://developer.mozilla.org/en-US/docs/Web/Reference/Events/DOMContentLoaded"><code>DOMContentLoaded</code></a> event for the given content page. At this point the document itself is fully loaded and parsed, but resources such as stylesheets and images may still be loading.</p>

<p>A single tab will emit this event every time the DOM is loaded: so it will be emitted again if the tab&apos;s location changes or the content is reloaded. After this event has been emitted, all properties relating to the tab&apos;s content can be used.</p>

<h5 id="Arguments_7">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>

<h4 class="addon-sdk-api-name" id="load"><code>load</code></h4>

<p>This event is emitted when the page for the tab&apos;s content is loaded. It is equivalent to the <a href="https://developer.mozilla.org/en-US/docs/Web/Reference/Events/load"><code>load</code></a> event for the given content page. At this point the document and its resources, such as images and stylesheets, have finished loading.</p>

<p>This event can be used for pages that do not have a <code>DOMContentLoaded</code> event, like images. For pages that have a <code>DOMContentLoaded</code> event, <code>load</code> is fired after <code>ready</code>.</p>

<p>A single tab will emit this event every time the page is loaded: so it will be emitted again if the tab&apos;s location changes or the content is reloaded. After this event has been emitted, all properties relating to the tab&apos;s content can be used.</p>

<h5 id="Arguments_8">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>

<h4 class="addon-sdk-api-name" id="pageshow"><code>pageshow</code></h4>

<p>The <code>pageshow</code> event is emitted when the page for a tab&apos;s content is loaded. It is equivalent to the <a href="https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/pageshow"><code>pageshow</code></a> event for the given content page.</p>

<p>This event is similar to the <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#load"><code>load</code></a> and <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#ready"><code>ready</code></a> events, except unlike <code>load</code> and <code>ready</code>, <code>pageshow</code> is triggered if the page was retrieved from the <a href="https://developer.mozilla.org/en-US/docs/Working_with_BFCache">bfcache</a>. This means that if the user loads a page, loads a new page, then moves back to the previous page using the &quot;Back&quot; button, the <code>pageshow</code> event is emitted when the user moves back to the previous page, while the <code>load</code> and <code>ready</code> events are not.</p>

<p>This event is <em>not</em> emitted when the tab is made the active tab: to get notified about that, you need to listen to the <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#activate"><code>activate</code></a> event.</p>

<p>After this event has been emitted, all properties relating to the tab&apos;s content can be used. It is emitted after <code>load</code> and <code>ready</code>.</p>

<h5 id="Arguments_9">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>

<p><strong>persisted</strong> : Listeners are passed a boolean value indicating whether or not the page was loaded from the <a href="https://developer.mozilla.org/en-US/docs/Working_with_BFCache">bfcache</a>.</p>

<h4 class="addon-sdk-api-name" id="activate_2"><code>activate</code></h4>

<p>This event is emitted when the tab is made active.</p>

<p>Note that you cannot guarantee that a tab&apos;s content, or even its <code>url</code>, are initialized at the time <code>activate</code> is emitted. This is because when a new tab is opened, its <code>activate</code> event may be emitted before the content is loaded.</p>

<p>You can use the tab&apos;s <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#readyState"><code>readyState</code></a> property to determine whether the tab&apos;s content and <code>url</code> will be available: if <code>readyState</code> is <code>uninitialized</code> or <code>loading</code>, then you can&apos;t access the tab&apos;s properties and must wait for the tab&apos;s <a href="/en-US/Add-ons/SDK/High-Level_APIs/tabs#ready_2"><code>ready</code></a> event.</p>

<h5 id="Arguments_10">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>

<h4 class="addon-sdk-api-name" id="deactivate_2"><code>deactivate</code></h4>

<p>This event is emitted when the tab is made inactive.</p>

<h5 id="Arguments_11">参数</h5>

<p><strong>Tab</strong> : Listeners are passed the tab object.</p>
