---
title: JavaScript timers
slug: Mozilla/Add-ons/Code_snippets/Timers
translation_of: Archive/Add-ons/Code_snippets/Timers
---
<p><span style="color: #000000; display: inline !important; float: none; font-family: Cantarell; font-size: 14.666666984558105px; font-style: normal; font-weight: normal; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal;"></span></p><div class="blockIndicator warning"><p>我们即将放弃这篇文档中描述的 Firefox 附加组件技术。</p><p>请勿使用下列技术开发新的附加组件。请改用 <a href="/zh-CN/Add-ons/WebExtensions">WebExtension</a> 代替。</p><p>如果您在维护使用下列技术的附加组件，请考虑将其迁移为使用 WebExtensions 技术。</p><p></p><p>使用下列技术开发的附加组件可能不适用于多进程 Firefox（e10s），它已在 Firefox Nightly 和 Firefox Developer Edition 中默认启用，并很快将遍及 Firefox 的公测版（Beta）和正式版。我们准备了<a href="/zh-CN/Add-ons/Working_with_multiprocess_Firefox">制作多进程兼容的附加组件</a>的文档，但迁移到 WebExtension 是更加着眼于未来的选择。</p><p>有关的 wiki 页面写有协助开发人员过渡到新技术的<a href="https://wiki.mozilla.org/Add-ons/developer/communication">有关资源、迁移路径、办公时间等信息</a>。</p></div><p></p>

<p> </p>

<p>JavaScript的代码块通常情况下是顺序执行的。不过有几个JavaScript内置函数（计时器），能够让我们推迟任意指令的执行：</p>

<ul>
 <li><a href="/zh-CN/docs/Web/API/Window/setTimeout" title="WindowOrWorkerGlobalScope 混合的 setTimeout()方法设置一个定时器，该定时器在定时器到期后执行一个函数或指定的一段代码。"><code>setTimeout()</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/Window/setInterval" title="WindowOrWorkerGlobalScope 的 setInterval() 方法重复调用一个函数或执行一个代码段，在每次调用之间具有固定的时间延迟。"><code>setInterval()</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/Window/setImmediate" title="该方法用来把一些需要长时间运行的操作放在一个回调函数里,在浏览器完成后面的其他语句后,就立刻执行这个回调函数,"><code>setImmediate()</code></a></li>
 <li><a href="/zh-CN/docs/Web/API/Window/requestAnimationFrame" title="window.requestAnimationFrame() 方法告诉浏览器您希望执行动画并请求浏览器在下一次重绘之前调用指定的函数来更新动画。该方法使用一个回调函数作为参数，这个回调函数会在浏览器重绘之前调用。"><code>requestAnimationFrame()</code></a></li>
</ul>

<p>The <code>setTimeout()</code> function is commonly used if you wish to have your function called <em>once</em> after the specified delay. The <code>setInterval()</code> function is commonly used to set a delay for functions that are executed again and again, such as animations. The <code>setImmediate()</code> function can be used instead of the <code>setTimeout(<em>fn</em>, <strong>0</strong>)</code> method to execute heavy operations in IE. The <code>requestAnimationFrame()</code> function tells the browser that you wish to perform an animation and requests that the browser schedule a repaint of the window for the next animation frame.</p>

<h2 class="Documentation" name="Documentation" id="Documentation">Documentation</h2>

<dl>
 <dt><a href="/zh-CN/docs/Web/API/Window/setTimeout" title="WindowOrWorkerGlobalScope 混合的 setTimeout()方法设置一个定时器，该定时器在定时器到期后执行一个函数或指定的一段代码。"><code>setTimeout()</code></a></dt>
 <dd>Calls a function or executes a code snippet after specified delay.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/setInterval" title="WindowOrWorkerGlobalScope 的 setInterval() 方法重复调用一个函数或执行一个代码段，在每次调用之间具有固定的时间延迟。"><code>setInterval()</code></a></dt>
 <dd>Calls a function or executes a code snippet repeatedly, with a fixed time delay between each call to that function.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/setImmediate" title="该方法用来把一些需要长时间运行的操作放在一个回调函数里,在浏览器完成后面的其他语句后,就立刻执行这个回调函数,"><code>setImmediate()</code></a></dt>
 <dd>Calls a function immediately after the browser has completed other operations, such as events and display updates.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/clearTimeout" title="此页面仍未被本地化, 期待您的翻译!"><code>clearTimeout()</code></a></dt>
 <dd>Clears the delay set by <code>setTimeout()</code>.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/clearInterval" title="取消用setInterval设置的重复定时任务。"><code>clearInterval()</code></a></dt>
 <dd>Cancels repeated action which was set up using <code>setInterval()</code>.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/clearImmediate" title="此方法用来清除 window.setImmediate."><code>clearImmediate()</code></a></dt>
 <dd>Cancels the immediate actions, just like <a href="/zh-CN/docs/Web/API/Window/clearTimeout" title="此页面仍未被本地化, 期待您的翻译!"><code>clearTimeout()</code></a> for <a href="/zh-CN/docs/Web/API/Window/setTimeout" title="WindowOrWorkerGlobalScope 混合的 setTimeout()方法设置一个定时器，该定时器在定时器到期后执行一个函数或指定的一段代码。"><code>setTimeout()</code></a>.</dd>
 <dt><a href="/en-US/docs/Web/JavaScript/Timers/Daemons">Using JavaScript timers within animations (Javascript Daemons Management)</a></dt>
 <dd>In Computer science a <em>daemon</em> is a task that runs as a background process, rather than being under the direct control of an interactive user. In JavaScript programming language, all <em>daemons</em> are processes created by JavaScript timers or by a <a href="/zh-CN/docs/Web/API/Worker" title="运行者 Worker 接口是Web Workers API 的一部分，代表一个后台任务，它容易被创建并向创建者发回消息。创建一个运行者只要简单的调用Worker()构造函数，指定一个脚本，在工作线程中执行。"><code>Worker</code></a> instantiation. Here are some code snippets which simplify and abstract the management of daemons.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Window/requestAnimationFrame" title="window.requestAnimationFrame() 方法告诉浏览器您希望执行动画并请求浏览器在下一次重绘之前调用指定的函数来更新动画。该方法使用一个回调函数作为参数，这个回调函数会在浏览器重绘之前调用。"><code>requestAnimationFrame()</code></a></dt>
 <dd><code>requestAnimationFrame()</code> tells the browser that you wish to perform an animation and requests that the browser schedule a repaint of the window for the next animation frame. The method takes as an argument a callback to be invoked before the repaint.</dd>
 <dt><a href="/zh-CN/docs/Web/API/Performance/now" title="performance.now()方法返回一个精确到毫秒的  DOMHighResTimeStamp 。"><code>performance.now()</code></a></dt>
 <dd>
 <p><code>performance.now()</code> returns a timestamp, measured in milliseconds, accurate to one thousandth of a millisecond. This timestamp is equal to the number of milliseconds since the <code>navigationStart </code>attribute of the <a href="/en-US/docs/Navigation_timing" title="/en-US/docs/Navigation_timing"><code>performance.timing</code></a> interface.</p>
 </dd>
 <dt><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now" title="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now"><code>Date.now()</code></a></dt>
 <dd><code>Date.now()</code> returns the number of milliseconds elapsed since 1 January 1970 00:00:00 UTC.</dd>
 <dt><a href="/en-US/docs/Web/Guide/Performance/Using_web_workers#Timeouts_and_intervals">Using JavaScript timers within workers</a></dt>
 <dd>Workers can use timeouts and intervals just like the main thread can. This can be useful, for example, if you want to have your worker thread run code periodically instead of nonstop.</dd>
 <dt><a href="/en-US/docs/Web/Guide/Needs_categorization/Functions_available_to_workers">Functions available to workers</a></dt>
 <dd>In addition to the standard JavaScript set of functions (such as String, Array, Object, JSON etc), there are a variety of functions available from the DOM to workers. This article provides a list of those.</dd>
 <dt><a href="/en-US/docs/Web/HTML/Canvas/Tutorial/Basic_animations">Basic animations</a></dt>
 <dd>Since we're using script to control canvas elements it's also very easy to make (interactive) animations. Unfortunately the canvas element was never designed to be used in this way (unlike Flash) so there are limitations.</dd>
 <dt><a href="/en-US/docs/Mozilla/JavaScript_code_modules/Timer.jsm" title="/en-US/docs/Mozilla/JavaScript_code_modules/Timer.jsm">Timer.jsm</a></dt>
 <dd>The <code>Timer.jsm</code> JavaScript code module contains pure-JavaScript implementations of <a href="/en-US/docs/DOM/window.setTimeout" title="/en-US/docs/DOM/window.setTimeout"><code>setTimeout </code></a>and <a href="/en-US/docs/DOM/window.clearTimeout" title="/en-US/docs/DOM/window.clearTimeout"><code>clearTimeout</code></a> that are compatible with the DOM window functions, but that can be used by code that does not have access to a DOM window (for example, <a href="/en-US/docs/Mozilla/JavaScript_code_modules" title="/en-US/docs/Mozilla/JavaScript_code_modules">JavaScript code modules </a>or <a href="/en-US/docs/The_message_manager" title="/en-US/docs/The_message_manager">content frame scripts</a>).</dd>
</dl>

<h2 id="See_also">See also</h2>

<ul>
 <li><a href="/en-US/docs/Web/API/window.setTimeout#Callback_arguments">Callback arguments polyfill</a></li>
 <li><a href="/en-US/docs/Web/API/window.setInterval#A_little_framework">A little <code>setInterval</code> framework</a></li>
 <li><a href="/en-US/docs/Web/JavaScript">JavaScript</a>, <a href="/en-US/docs/Web/Guide/Performance/Using_web_workers">Workers</a></li>
 <li><a href="/en-US/docs/Web/Guide/Performance/Using_web_workers">Using web workers</a></li>
 <li><a href="/zh-CN/docs/Web/API/Window/performance" title="此页面仍未被本地化, 期待您的翻译!"><code>window.performance</code></a></li>
 <li><a href="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" title="/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date"><code>Date</code></a></li>
</ul>

<p>&lt;embed height="0" id="xunlei_com_thunder_helper_plugin_d462f475-c18e-46be-bd10-327458d045bd" type="application/thunder_download_plugin" width="0"&gt;</p>
