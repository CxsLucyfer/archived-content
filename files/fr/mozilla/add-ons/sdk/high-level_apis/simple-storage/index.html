---
title: simple-storage
slug: Mozilla/Add-ons/SDK/High-Level_APIs/simple-storage
translation_of: Archive/Add-ons/Add-on_SDK/High-Level_APIs/simple-storage
---
<p></p><section class="Quick_links" id="Quick_Links">
  <ol>
    <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions"><strong>WebExtensions</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Démarrage</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">Que sont les WebExtensions ?</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Votre première WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Votre deuxième WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomie d'une WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Examples">Exemples de WebExtensions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_">Que faire ensuite ?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Concepts</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Utilisation des API JavaScript</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Scripts de contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Motifs de correspondance (Match patterns)</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Travailler avec les fichiers</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalisation</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Security_best_practices">Sécurité : bonnes pratiques</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Politique de sécurité du contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Message natifs</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Interface Utilisateur</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface">Introduction</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Bouton de la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Bouton de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Barres latérales</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">Éléments du menu contextuel</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Page d'options</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Pages pour l'extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Suggestions de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Panneaux d'outils de développement</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Mode d'emploi</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercepter les requêtes HTTP</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modifier une page web</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Insérer un contenu externe</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Ajouter un bouton à la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Mettre en place une page de paramètres</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Travailler avec l'API Tabs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Travailler avec l'API Bookmarks</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Travailler avec l'API Cookies</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Travailler avec des identités contextuelles</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/onboarding_upboarding_offboarding_best_practices">Onboard, upboard, and offboard users</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Portage</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Porting_a_Google_Chrome_extension">Porter une extension Google Chrome</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Porting_a_legacy_Firefox_add-on">Porter une ancienne extension Firefox</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Embedded_WebExtensions">WebExtensions intégrées</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_the_Add-on_SDK">Comparaison avec le SDK Add-on</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Comparison_with_XUL_XPCOM_extensions">Comparaison avec les extensions XUL/XPCOM</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">Differences between API implementations</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Incompatibilités avec Chrome</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_desktop_and_Android">Différence entre le bureau et Android</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Déroulement avec Firefox</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Development_Tools">Developer tools</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/User_experience_best_practices">Expérience utilisateur : bonnes pratiques</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Temporary_Installation_in_Firefox">Installation temporaire dans Firefox</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Debugging">Débogage</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Testing_persistent_and_restart_features">Test des fonctionnalités persistantes et de redémarrage</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Developing_WebExtensions_for_Firefox_for_Android">Écrire des extensions pour Firefox sur Android</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Getting_started_with_web-ext">Démarrer avec web-ext</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/web-ext_command_reference">Détail de la commande web-ext</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID">Les WebExtensions et l'ID Add-on</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Request_the_right_permissions">Demander les bonnes permissions</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Les API JavaScript</summary>
        <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.inspectedWindow">devtools.inspectedWindow</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.network">devtools.network</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools.panels">devtools.panels</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>

    <li class="toggle">
      <details>
      <summary>Clés de manifeste</summary>
      <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/auteur">author</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/arriere-plan">background</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">browser_specific_settings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled">offline_enabled</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page">options_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol>
      </details>
    </li>

    <li><a href="/fr/docs/Mozilla/Add-ons/Themes"><strong>Thèmes</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Thème de navigateur</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/Themes/Theme_concepts">Concepts des thèmes</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/fr/docs/Mozilla/Add-ons/Distribution"><strong>Publication et distribution</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Publication de votre extension</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution">Signature et distribution de votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Package_your_extension_">Zipper votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Submitting_an_add-on">Soumettre une extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Source_Code_Submission">Soumission du code source</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Resources_for_publishers">Ressources pour les développeurs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Listing">Créer une page attrayante pour votre extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Make_money_from_browser_extensions">Make money from browser extensions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Promoting_your_extension_or_theme">Promoting your extension or theme</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Reviews">Processus de revue</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Agreement">Accord développeur</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/AMO/Policy/Featured">Extensions mises en avant</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/Distribution/Retiring_your_extension">Retrait de votre extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Distribuer votre module</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Sideloading_add-ons">Pour une installation manuelle</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_for_desktop_apps">En tant qu'application de bureau</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Alternative_distribution_options/Add-ons_in_the_enterprise">Dans un contexte d'entreprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="https://discourse.mozilla.org/c/add-ons"><strong>Communauté et Support</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Canaux de discussions</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Blog extensions</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Forum extensions</a></li>
          <li><a href="http://stackoverflow.com/questions/tagged/firefox-addon">Stack Overflow</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/#Contact_us">Nous contacter</a></li>
        </ol>
      </details>
    </li>
  </ol>
</section><p></p>

<div class="note">
<p>Stable</p>
</div>

<p><span class="seoSummary">Permet au add-on le stockage des données afin qu'il soit conservé entre les redémarrages de Firefox. </span> Ce module fonctionne de façon similaire au <a href="https://developer.mozilla.org/en/DOM/Storage" title="https://developer.mozilla.org/en/DOM/Storage"> DOM Storage</a> du Web, mais il est uniquement disponible pour des add-ons.</p>

<h2 id="Utilisation">Utilisation</h2>

<p>Le module de stockage simple exporte un objet appelé <code>storage</code> qui est persistant et à porté de votre add-on. C'est un objet JavaScript normal, et vous pouvez le traiter comme vous le feriez pour tout autre.</p>

<p>Pour stocker une valeur, il faut juste l'affecter avec la propriété <code>storage</code>:</p>

<pre class="brush: js">var ss = require("sdk/simple-storage");
ss.storage.myArray = [1, 1, 2, 3, 5, 8, 13];
ss.storage.myBoolean = true;
ss.storage.myNull = null;
ss.storage.myNumber = 3.1337;
ss.storage.myObject = { a: "foo", b: { c: true }, d: null };
ss.storage.myString = "O frabjous day!";</pre>

<p>Vous pouvez stocker des valeurs tableau, booléennes, nombre, objet, null et des textes. Si vous souhaitez stocker d'autres types de valeurs, vous devrez d'abord les convertir en chaînes ou un autre de ces types.</p>

<p>Veillez à définir les propriétés avec <code>storage</code> et non avec le module lui-même:</p>

<pre class="brush: js">// This is not good!
var ss = require("sdk/simple-storage");
ss.foo = "I will not be saved! :(";</pre>

<h3 id="stockage_simple_et_jpm_run">stockage simple et "jpm run"</h3>

<p>Le module de stockage simple stocke ses données dans votre profil. Parce que <code>jpm run</code> utilise par défaut un profil frais chaque fois qu'il est exécuté, le stockage simple ne fonctionnera pas avec des add-ons exécutées en utilisant <code>jpm run</code> - les données stockées ne persisteront pas d'une exécution à l'autre.</p>

<p>La solution la plus simple à ce problème est d'utiliser l'option <a href="https://developer.mozilla.org/fr/Add-ons/SDK/Tools/jpm#Using_profiles_2">--profile de jpm</a> avec un chemin d'accès à un profil - pas seulement un nom de profil. Vous pouvez aussi avoir besoin d'inclure l'option<a href="https://developer.mozilla.org/fr/Add-ons/SDK/Tools/jpm#Using_profiles_2"> --no-copie</a> pour empêcher Firefox de copier le profil dans un répertoire de temporaire chaque fois qu'il démarre.</p>

<pre class="brush: bash">jpm run --no-copy --profile path/to/profile/dir</pre>

<p>Si vous spécifiez un profil non-existant, il sera créé.</p>

<blockquote>
<p>Important: Si vous utilisez cette méthode, vous devez mettre fin à votre session de débogage en quittant Firefox normalement, en annulant la commande shell. Si vous ne fermez pas Firefox normalement, puis un simple stockage ne sera pas informé que la session est terminée, et ne sera pas écrire vos données à la mémoire de sauvegarde.</p>
</blockquote>

<h3 id="Accès_au_stockage_à_partir_de_la_console">Accès au stockage à partir de la console</h3>

<p>Dans l'<a href="/fr/Add-ons/Add-on_Debugger" title="/fr/Add-ons/Add-on_Debugger"> Add-on Debugger </a>, vous pouvez accéder à vos addons simple stockage par programmation à partir de la console en utilisant ce qui suit:</p>

<pre class="brush: js">loader.modules['resource://gre/modules/commonjs/sdk/simple-storage.js'].exports.storage</pre>

<h3 id="Constructing_arrays">Constructeur de tableaux</h3>

<p>Pour ne pas remettre à zéro un tableau, attention au constructeur. Par exemple, cet add-on essaie de stocker les URL des pages visitées:</p>

<pre class="brush: js">var ss = require("sdk/simple-storage");
ss.storage.pages = [];

require("sdk/tabs").on("ready", function(tab) {
  ss.storage.pages.push(tab.url);
});

require("sdk/ui/button/action").ActionButton({
  id: "read",
  label: "Read",
  icon: "./read.png",
  onClick: function() {
    console.log(ss.storage.pages);
  }
});</pre>

<p>Mais cela ne fonctonne pas, car il vide le tableau chaque fois que l'add-on est apellée (par exemple, chaque fois que Firefox est lancé). La ligne 2 a besoin d'être subordonné, de sorte que le tableau est uniquement construite si il n'existe pas déjà:</p>

<pre class="brush: js">if (!ss.storage.pages)
  ss.storage.pages = [];</pre>

<h3 id="Deleting_data">Suppression de données</h3>

<p>Vous pouvez supprimer des propriétés en utilisant l'opérateur <code>delete</code>. Voici une add-on qui ajoute trois boutons pour écrire, lire et supprimer une valeur:</p>

<pre class="brush: js">var ss = require("sdk/simple-storage");

require("sdk/ui/button/action").ActionButton({
  id: "write",
  label: "Write",
  icon: "./write.png",
  onClick: function() {
    ss.storage.value = 1;
    console.log("Setting value");
  }
});

require("sdk/ui/button/action").ActionButton({
  id: "read",
  label: "Read",
  icon: "./read.png",
  onClick: function() {
    console.log(ss.storage.value);
  }
});

require("sdk/ui/button/action").ActionButton({
  id: "delete",
  label: "Delete",
  icon: "./delete.png",
  onClick: function() {
    delete ss.storage.value;
    console.log("Deleting value");
  }
});</pre>

<p>Si vous l'exécutez, vous verrez que si vous cliquez sur "Lire" après avoir cliqué sur "Supprimer" vous aurez le résultat escompté:</p>

<pre>info: undefined
</pre>

<p>Notez que pour exécuter cet add-on, vous aurez à enregistrer des fichiers icône nommées "write.png", "read.png", et "delete.png" dans le répertoire "data".</p>

<h3 id="Quotas">Quotas</h3>

<p>Le stockage simple à la disposition de votre add-on est limité. Actuellement, cette limite est environ cinq mégaoctets (5,242,880 octets). Vous pouvez choisir d'être averti lorsque vous dépassez le quota, et vous devez répondre en réduisant la quantité de données dans le stockage. Si vous quittez l'application pendant que vous êtes hors quota, toutes les données stockées depuis la dernière fois que vous étiez sous le quota ne sont pas conservées. Vous ne devriez pas laisser cela se produire.</p>

<p>Pour écouter les notifications du quota, utiliser l'evenement <code>"OverQuota"</code>. il sera appelée quand votre stockage dépasse le quota.</p>

<pre class="brush: js">function myOnOverQuotaListener() {
  console.log("Uh oh.");
}
ss.on("OverQuota", myOnOverQuotaListener);</pre>

<p>Les auditeurs peuvent également être retirés:</p>

<pre><code><code class="brush: js">ss.removeListener("OverQuota", myOnOverQuotaListener);</code></code></pre>

<p>Pour connaitre le % de saturation du quota utiliser la proprieté <code>quotaUsage</code>. Si vous êtes dans votre quota, c'est un nombre entre 0 et 1. Si votre add-on utilise plus que son quota, cette valeur est supérieure à 1,0.</p>

<p>Par conséquent, lorsque vous êtes averti que vous êtes hors quota, vous devez répondre en supprimant les données de l'espace de stockage jusqu'à ce que votre <code>quotaUsage</code> soit inférieur ou égal à 1.</p>

<pre class="brush: js">ss.storage.myList = [ /* some long array */ ];
ss.on("OverQuota", function () {
  while (ss.quotaUsage &gt; 1)
    ss.storage.myList.pop();
});</pre>

<h3 id="Private_browsing">Navigation privée</h3>

<p>Si votre mémoire est liée à l'histoire de vos utilisateurs Web, des renseignements personnels, ou d'autres données sensibles, votre add-on devrait respecter la <a href="http://support.mozilla.com/fr/kb/Private+Browsing" title="http://support.mozilla.com/fr/kb/Private+Browsing"> navigation privé </a>.</p>

<p>Pour en savoir plus sur la façon de choisir en mode de navigation privée et comment utiliser le SDK pour éviter de stocker des données d'utilisateur associées aux fenêtres privées, reportez-vous à la documentation du <a href="/fr/Add-ons/SDK/High-Level_APIs/private-browsing" title="/fr/Add-ons/SDK/High-Level_APIs/private-browsing"> <code>private-browsing</code> Module </a> .</p>

<h2 id="Globals">Globals</h2>

<h3 id="Properties">Propriétés</h3>

<h4 class="addon-sdk-api-name" id="storage"><code>storage</code></h4>

<p>Un objet persistant privé de votre add-on.</p>

<h4 class="addon-sdk-api-name" id="quotaUsage"><code>quotaUsage</code></h4>

<p>Un certain nombre dans l'intervalle [0, Infinity) qui indique le pourcentage de quota occupé par le stockage. Une valeur dans l'intervalle [0, 1] indique que le stockage est dans le quota. Une valeur supérieure à 1 indique que le stockage dépasse le quota.</p>

<h3 id="Events">Événements</h3>

<h4 class="addon-sdk-api-name" id="OverQuota"><code>OverQuota</code></h4>

<p>Le module émet cet événement lorsque votre stockage add-ons dépasse son quota.</p>
